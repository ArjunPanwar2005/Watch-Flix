{"version":3,"file":"appBundle.js","sources":["../node_modules/@lightningjs/sdk/src/Settings/index.js","../node_modules/@lightningjs/sdk/src/Log/index.js","../node_modules/@michieljs/execute-as-promise/src/execute-as-promise.js","../node_modules/@lightningjs/sdk/src/Metrics/index.js","../node_modules/@lightningjs/sdk/src/VideoPlayer/events.js","../node_modules/@lightningjs/sdk/src/helpers/autoSetupMixin.js","../node_modules/@lightningjs/sdk/src/helpers/easeExecution.js","../node_modules/@lightningjs/sdk/src/Utils/index.js","../node_modules/@lightningjs/sdk/src/Profile/index.js","C:/Users/Deepak Kumar/AppData/Roaming/npm/node_modules/@lightningjs/cli/src/alias/lightningjs-core.js","../node_modules/@lightningjs/sdk/src/Lightning/index.js","../node_modules/@lightningjs/sdk/src/MediaPlayer/index.js","../node_modules/localCookie/module/localCookie.js","../node_modules/@lightningjs/sdk/src/Storage/index.js","../node_modules/@lightningjs/sdk/src/Router/utils/regex.js","../node_modules/@lightningjs/sdk/src/Router/utils/register.js","../node_modules/@lightningjs/sdk/src/Router/model/Request.js","../node_modules/@lightningjs/sdk/src/Router/model/Route.js","../node_modules/@lightningjs/sdk/src/Router/utils/route.js","../node_modules/@lightningjs/sdk/src/Router/utils/emit.js","../node_modules/@lightningjs/sdk/src/Router/utils/widgets.js","../node_modules/@lightningjs/sdk/src/Router/utils/components.js","../node_modules/@lightningjs/sdk/src/Router/utils/history.js","../node_modules/deepmerge/dist/cjs.js","../node_modules/@lightningjs/sdk/src/Locale/index.js","../node_modules/@lightningjs/sdk/src/VersionLabel/index.js","../node_modules/@lightningjs/sdk/src/FpsCounter/index.js","../node_modules/@lightningjs/sdk/src/Language/index.js","../node_modules/@lightningjs/sdk/src/Registry/index.js","../node_modules/@lightningjs/sdk/src/Colors/utils.js","../node_modules/@lightningjs/sdk/src/Colors/index.js","../node_modules/@lightningjs/sdk/src/Application/index.js","../node_modules/@lightningjs/sdk/src/Router/utils/router.js","../node_modules/@lightningjs/sdk/src/Router/utils/helpers.js","../node_modules/@lightningjs/sdk/src/Router/utils/provider.js","../node_modules/@lightningjs/sdk/src/Router/transitions.js","../node_modules/@lightningjs/sdk/src/Router/utils/transition.js","../node_modules/@lightningjs/sdk/src/Router/utils/loader.js","../node_modules/@lightningjs/sdk/src/Router/base.js","../node_modules/@lightningjs/sdk/src/Router/index.js","../node_modules/@lightningjs/sdk/src/TV/defaults.js","../node_modules/@lightningjs/sdk/src/TV/index.js","../node_modules/@lightningjs/sdk/src/Purchase/index.js","../node_modules/@lightningjs/sdk/src/Pin/dialog.js","../node_modules/@lightningjs/sdk/src/Pin/index.js","../node_modules/@lightningjs/sdk/src/Launch/index.js","../node_modules/@lightningjs/sdk/src/VideoPlayer/VideoTexture.js","../node_modules/@lightningjs/sdk/src/VideoPlayer/index.js","../node_modules/@lightningjs/sdk/src/Ads/index.js","../node_modules/@lightningjs/sdk/src/Img/ScaledImageTexture.js","../node_modules/@lightningjs/sdk/src/Img/index.js","../node_modules/@lightningjs/ui/src/helpers/CollectionWrapper.js","../node_modules/@lightningjs/ui/src/helpers/Cursor.js","../node_modules/@lightningjs/ui/src/helpers/ItemWrapper.js","../node_modules/@lightningjs/ui/src/helpers/KeyWrapper.js","../node_modules/@lightningjs/ui/src/helpers/index.js","../node_modules/@lightningjs/ui/src/InputField.js","../node_modules/@lightningjs/ui/src/Key.js","../node_modules/@lightningjs/ui/src/Keyboard.js","../node_modules/@lightningjs/ui/src/List.js","../node_modules/@lightningjs/ui/src/ScrollingLabel.js","../src/pages/Main.js","../src/lib/tools.js","../src/components/Button.js","../src/components/TextWithBox.js","../src/components/CustomTextBox.js","../src/components/ImageButton.js","../src/pages/Details.js","../src/pages/TVDetails.js","../src/shader/NoiseShader.js","../src/components/ErrorScreen.js","../src/lib/helpers.js","../src/components/IconButton.js","../src/components/ProgressBar.js","../src/Background.js","../src/pages/Player.js","../src/pages/Error.js","../src/pages/NotFound.js","../src/pages/Splash.js","../src/lib/models/Container.js","../src/lib/models/Movie.js","../src/lib/models/Tv.js","../src/lib/models/Details.js","../src/lib/models/TVDetails.js","../src/lib/models/Credits.js","../src/components/item/Item.js","../src/components/ItemWrapper.js","../src/components/list/List.js","../src/lib/api.js","../src/lib/routes.js","../src/widgets/Menu.js","../src/widgets/MenuWithBackButton.js","../src/widgets/MenuWithTitle.js","../src/App.js","../src/index.js"],"sourcesContent":["/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst settings = {}\nconst subscribers = {}\n\nexport const initSettings = (appSettings, platformSettings) => {\n  settings['app'] = appSettings\n  settings['platform'] = platformSettings\n  settings['user'] = {}\n}\n\nconst publish = (key, value) => {\n  subscribers[key] && subscribers[key].forEach(subscriber => subscriber(value))\n}\n\nconst dotGrab = (obj = {}, key) => {\n  if (obj === null) return undefined\n  const keys = key.split('.')\n  for (let i = 0; i < keys.length; i++) {\n    obj = obj[keys[i]] = obj[keys[i]] !== undefined ? obj[keys[i]] : {}\n  }\n  return typeof obj === 'object' && obj !== null ? (Object.keys(obj).length ? obj : undefined) : obj\n}\n\nexport default {\n  get(type, key, fallback = undefined) {\n    const val = dotGrab(settings[type], key)\n    return val !== undefined ? val : fallback\n  },\n  has(type, key) {\n    return !!this.get(type, key)\n  },\n  set(key, value) {\n    settings['user'][key] = value\n    publish(key, value)\n  },\n  subscribe(key, callback) {\n    subscribers[key] = subscribers[key] || []\n    subscribers[key].push(callback)\n  },\n  unsubscribe(key, callback) {\n    if (callback) {\n      const index = subscribers[key] && subscribers[key].findIndex(cb => cb === callback)\n      index > -1 && subscribers[key].splice(index, 1)\n    } else {\n      if (key in subscribers) {\n        subscribers[key] = []\n      }\n    }\n  },\n  clearSubscribers() {\n    for (const key of Object.getOwnPropertyNames(subscribers)) {\n      delete subscribers[key]\n    }\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\n\nconst prepLog = (type, args) => {\n  const colors = {\n    Info: 'green',\n    Debug: 'gray',\n    Warn: 'orange',\n    Error: 'red',\n  }\n\n  args = Array.from(args)\n  return [\n    '%c' + (args.length > 1 && typeof args[0] === 'string' ? args.shift() : type),\n    'background-color: ' + colors[type] + '; color: white; padding: 2px 4px; border-radius: 2px',\n    args,\n  ]\n}\n\nexport default {\n  info() {\n    Settings.get('platform', 'log') && console.log.apply(console, prepLog('Info', arguments))\n  },\n  debug() {\n    Settings.get('platform', 'log') && console.debug.apply(console, prepLog('Debug', arguments))\n  },\n  error() {\n    Settings.get('platform', 'log') && console.error.apply(console, prepLog('Error', arguments))\n  },\n  warn() {\n    Settings.get('platform', 'log') && console.warn.apply(console, prepLog('Warn', arguments))\n  },\n}\n","export default (method, args = null, context = null) => {\n  let result\n  if (method && typeof method === 'function') {\n    try {\n      result = method.apply(context, args)\n    } catch (e) {\n      result = e\n    }\n  } else {\n    result = method\n  }\n\n  // if it looks like a duck .. ehm ... promise and talks like a promise, let's assume it's a promise\n  if (\n    result !== null &&\n    typeof result === 'object' &&\n    result.then &&\n    typeof result.then === 'function'\n  ) {\n    return result\n  }\n  // otherwise make it into a promise\n  else {\n    return new Promise((resolve, reject) => {\n      if (result instanceof Error) {\n        reject(result)\n      } else {\n        resolve(result)\n      }\n    })\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\n\nlet sendMetric = (type, event, params) => {\n  Log.info('Sending metric', type, event, params)\n}\n\nexport const initMetrics = config => {\n  sendMetric = config.sendMetric\n}\n\n// available metric per category\nconst metrics = {\n  app: ['launch', 'loaded', 'ready', 'close'],\n  page: ['view', 'leave'],\n  user: ['click', 'input'],\n  media: [\n    'abort',\n    'canplay',\n    'ended',\n    'pause',\n    'play',\n    // with some videos there occur almost constant suspend events ... should investigate\n    // 'suspend',\n    'volumechange',\n    'waiting',\n    'seeking',\n    'seeked',\n  ],\n}\n\n// error metric function (added to each category)\nconst errorMetric = (type, message, code, visible, params = {}) => {\n  params = { params, ...{ message, code, visible } }\n  sendMetric(type, 'error', params)\n}\n\nconst Metric = (type, events, options = {}) => {\n  return events.reduce(\n    (obj, event) => {\n      obj[event] = (name, params = {}) => {\n        params = { ...options, ...(name ? { name } : {}), ...params }\n        sendMetric(type, event, params)\n      }\n      return obj\n    },\n    {\n      error(message, code, params) {\n        errorMetric(type, message, code, params)\n      },\n      event(name, params) {\n        sendMetric(type, name, params)\n      },\n    }\n  )\n}\n\nconst Metrics = types => {\n  return Object.keys(types).reduce(\n    (obj, type) => {\n      // media metric works a bit different!\n      // it's a function that accepts a url and returns an object with the available metrics\n      // url is automatically passed as a param in every metric\n      type === 'media'\n        ? (obj[type] = url => Metric(type, types[type], { url }))\n        : (obj[type] = Metric(type, types[type]))\n      return obj\n    },\n    { error: errorMetric, event: sendMetric }\n  )\n}\n\nexport default Metrics(metrics)\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default {\n  abort: 'Abort',\n  canplay: 'CanPlay',\n  canplaythrough: 'CanPlayThrough',\n  durationchange: 'DurationChange',\n  emptied: 'Emptied',\n  encrypted: 'Encrypted',\n  ended: 'Ended',\n  error: 'Error',\n  interruptbegin: 'InterruptBegin',\n  interruptend: 'InterruptEnd',\n  loadeddata: 'LoadedData',\n  loadedmetadata: 'LoadedMetadata',\n  loadstart: 'LoadStart',\n  pause: 'Pause',\n  play: 'Play',\n  playing: 'Playing',\n  progress: 'Progress',\n  ratechange: 'Ratechange',\n  seeked: 'Seeked',\n  seeking: 'Seeking',\n  stalled: 'Stalled',\n  // suspend: 'Suspend', // this one is called a looooot for some videos\n  timeupdate: 'TimeUpdate',\n  volumechange: 'VolumeChange',\n  waiting: 'Waiting',\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default (sourceObject, setup = () => {}) => {\n  let ready = false\n\n  const doSetup = () => {\n    if (ready === false) {\n      setup()\n      ready = true\n    }\n  }\n\n  return Object.keys(sourceObject).reduce((obj, key) => {\n    if (typeof sourceObject[key] === 'function') {\n      obj[key] = function() {\n        doSetup()\n        return sourceObject[key].apply(sourceObject, arguments)\n      }\n    } else if (typeof Object.getOwnPropertyDescriptor(sourceObject, key).get === 'function') {\n      obj.__defineGetter__(key, function() {\n        doSetup()\n        return Object.getOwnPropertyDescriptor(sourceObject, key).get.apply(sourceObject)\n      })\n    } else if (typeof Object.getOwnPropertyDescriptor(sourceObject, key).set === 'function') {\n      obj.__defineSetter__(key, function() {\n        doSetup()\n        return Object.getOwnPropertyDescriptor(sourceObject, key).set.sourceObject[key].apply(\n          sourceObject,\n          arguments\n        )\n      })\n    } else {\n      obj[key] = sourceObject[key]\n    }\n    return obj\n  }, {})\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nlet timeout = null\n\nexport default (cb, delay) => {\n  clearTimeout(timeout)\n  timeout = setTimeout(() => {\n    cb()\n  }, delay)\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nlet basePath\nlet proxyUrl\n\nexport const initUtils = config => {\n  basePath = ensureUrlWithProtocol(makeFullStaticPath(window.location.pathname, config.path || '/'))\n\n  if (config.proxyUrl) {\n    proxyUrl = ensureUrlWithProtocol(config.proxyUrl)\n  }\n}\n\nexport default {\n  asset(relPath) {\n    return basePath + relPath\n  },\n  proxyUrl(url, options = {}) {\n    return proxyUrl ? proxyUrl + '?' + makeQueryString(url, options) : url\n  },\n  makeQueryString() {\n    return makeQueryString(...arguments)\n  },\n  // since imageworkers don't work without protocol\n  ensureUrlWithProtocol() {\n    return ensureUrlWithProtocol(...arguments)\n  },\n}\n\nexport const ensureUrlWithProtocol = url => {\n  if (/^\\/\\//.test(url)) {\n    return window.location.protocol + url\n  }\n  if (!/^(?:https?:)/i.test(url)) {\n    return window.location.origin + url\n  }\n  return url\n}\n\nexport const makeFullStaticPath = (pathname = '/', path) => {\n  // ensure path has traling slash\n  path = path.charAt(path.length - 1) !== '/' ? path + '/' : path\n\n  // if path is URL, we assume it's already the full static path, so we just return it\n  if (/^(?:https?:)?(?:\\/\\/)/.test(path)) {\n    return path\n  }\n\n  if (path.charAt(0) === '/') {\n    return path\n  } else {\n    // cleanup the pathname (i.e. remove possible index.html)\n    pathname = cleanUpPathName(pathname)\n\n    // remove possible leading dot from path\n    path = path.charAt(0) === '.' ? path.substr(1) : path\n    // ensure path has leading slash\n    path = path.charAt(0) !== '/' ? '/' + path : path\n    return pathname + path\n  }\n}\n\nexport const cleanUpPathName = pathname => {\n  if (pathname.slice(-1) === '/') return pathname.slice(0, -1)\n  const parts = pathname.split('/')\n  if (parts[parts.length - 1].indexOf('.') > -1) parts.pop()\n  return parts.join('/')\n}\n\nconst makeQueryString = (url, options = {}, type = 'url') => {\n  // add operator as an option\n  options.operator = 'metrological' // Todo: make this configurable (via url?)\n  // add type (= url or qr) as an option, with url as the value\n  options[type] = url\n\n  return Object.keys(options)\n    .map(key => {\n      return encodeURIComponent(key) + '=' + encodeURIComponent('' + options[key])\n    })\n    .join('&')\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\nimport { defaultProfile } from './defaults'\n\nlet getInfo = key => {\n  const profile = { ...defaultProfile, ...Settings.get('platform', 'profile') }\n  return Promise.resolve(typeof profile[key] === 'function' ? profile[key]() : profile[key])\n}\n\nlet setInfo = (key, params) => {\n  if (key in defaultProfile) defaultProfile[key] = params\n}\n\nexport const initProfile = config => {\n  getInfo = config.getInfo\n  setInfo = config.setInfo\n}\n\nconst getOrSet = (key, params) => (params ? setInfo(key, params) : getInfo(key))\n\n// public API\nexport default {\n  ageRating(params) {\n    return getOrSet('ageRating', params)\n  },\n  city(params) {\n    return getOrSet('city', params)\n  },\n  zipCode(params) {\n    return getOrSet('zipCode', params)\n  },\n  countryCode(params) {\n    return getOrSet('countryCode', params)\n  },\n  ip(params) {\n    return getOrSet('ip', params)\n  },\n  household(params) {\n    return getOrSet('household', params)\n  },\n  language(params) {\n    return getOrSet('language', params)\n  },\n  latlon(params) {\n    return getOrSet('latlon', params)\n  },\n  locale(params) {\n    return getOrSet('locale', params)\n  },\n  mac(params) {\n    return getOrSet('mac', params)\n  },\n  operator(params) {\n    return getOrSet('operator', params)\n  },\n  platform(params) {\n    return getOrSet('platform', params)\n  },\n  packages(params) {\n    return getOrSet('packages', params)\n  },\n  uid(params) {\n    return getOrSet('uid', params)\n  },\n  stbType(params) {\n    return getOrSet('stbType', params)\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default window.lng\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '@lightningjs/core'\nexport default Lightning\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Metrics from '../Metrics'\nimport Settings from '../Settings'\nimport Log from '../Log'\n\nconst events = [\n  'timeupdate',\n  'error',\n  'ended',\n  'loadeddata',\n  'canplay',\n  'play',\n  'playing',\n  'pause',\n  'loadstart',\n  'seeking',\n  'seeked',\n  'encrypted',\n]\n\nlet mediaUrl = url => url\n\nexport const initMediaPlayer = config => {\n  if (config.mediaUrl) {\n    mediaUrl = config.mediaUrl\n  }\n}\n\nexport default class Mediaplayer extends Lightning.Component {\n  _construct() {\n    this._skipRenderToTexture = false\n    this._metrics = null\n    this._textureMode = Settings.get('platform', 'textureMode') || false\n    Log.info('Texture mode: ' + this._textureMode)\n    console.warn(\n      [\n        \"The 'MediaPlayer'-plugin in the Lightning-SDK is deprecated and will be removed in future releases.\",\n        \"Please consider using the new 'VideoPlayer'-plugin instead.\",\n        'https://rdkcentral.github.io/Lightning-SDK/#/plugins/videoplayer',\n      ].join('\\n\\n')\n    )\n  }\n\n  static _template() {\n    return {\n      Video: {\n        VideoWrap: {\n          VideoTexture: {\n            visible: false,\n            pivot: 0.5,\n            texture: { type: Lightning.textures.StaticTexture, options: {} },\n          },\n        },\n      },\n    }\n  }\n\n  set skipRenderToTexture(v) {\n    this._skipRenderToTexture = v\n  }\n\n  get textureMode() {\n    return this._textureMode\n  }\n\n  get videoView() {\n    return this.tag('Video')\n  }\n\n  _init() {\n    //re-use videotag if already there\n    const videoEls = document.getElementsByTagName('video')\n    if (videoEls && videoEls.length > 0) this.videoEl = videoEls[0]\n    else {\n      this.videoEl = document.createElement('video')\n      this.videoEl.setAttribute('id', 'video-player')\n      this.videoEl.style.position = 'absolute'\n      this.videoEl.style.zIndex = '1'\n      this.videoEl.style.display = 'none'\n      this.videoEl.setAttribute('width', '100%')\n      this.videoEl.setAttribute('height', '100%')\n\n      this.videoEl.style.visibility = this.textureMode ? 'hidden' : 'visible'\n      document.body.appendChild(this.videoEl)\n    }\n    if (this.textureMode && !this._skipRenderToTexture) {\n      this._createVideoTexture()\n    }\n\n    this.eventHandlers = []\n  }\n\n  _registerListeners() {\n    events.forEach(event => {\n      const handler = e => {\n        if (this._metrics && this._metrics[event] && typeof this._metrics[event] === 'function') {\n          this._metrics[event]({ currentTime: this.videoEl.currentTime })\n        }\n        this.fire(event, { videoElement: this.videoEl, event: e })\n      }\n      this.eventHandlers.push(handler)\n      this.videoEl.addEventListener(event, handler)\n    })\n  }\n\n  _deregisterListeners() {\n    Log.info('Deregistering event listeners MediaPlayer')\n    events.forEach((event, index) => {\n      this.videoEl.removeEventListener(event, this.eventHandlers[index])\n    })\n    this.eventHandlers = []\n  }\n\n  _attach() {\n    this._registerListeners()\n  }\n\n  _detach() {\n    this._deregisterListeners()\n    this.close()\n  }\n\n  _createVideoTexture() {\n    const stage = this.stage\n\n    const gl = stage.gl\n    const glTexture = gl.createTexture()\n    gl.bindTexture(gl.TEXTURE_2D, glTexture)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)\n\n    this.videoTexture.options = { source: glTexture, w: this.videoEl.width, h: this.videoEl.height }\n  }\n\n  _startUpdatingVideoTexture() {\n    if (this.textureMode && !this._skipRenderToTexture) {\n      const stage = this.stage\n      if (!this._updateVideoTexture) {\n        this._updateVideoTexture = () => {\n          if (this.videoTexture.options.source && this.videoEl.videoWidth && this.active) {\n            const gl = stage.gl\n\n            const currentTime = new Date().getTime()\n\n            // When BR2_PACKAGE_GST1_PLUGINS_BAD_PLUGIN_DEBUGUTILS is not set in WPE, webkitDecodedFrameCount will not be available.\n            // We'll fallback to fixed 30fps in this case.\n            const frameCount = this.videoEl.webkitDecodedFrameCount\n\n            const mustUpdate = frameCount\n              ? this._lastFrame !== frameCount\n              : this._lastTime < currentTime - 30\n\n            if (mustUpdate) {\n              this._lastTime = currentTime\n              this._lastFrame = frameCount\n              try {\n                gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n                gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false)\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.videoEl)\n                this._lastFrame = this.videoEl.webkitDecodedFrameCount\n                this.videoTextureView.visible = true\n\n                this.videoTexture.options.w = this.videoEl.videoWidth\n                this.videoTexture.options.h = this.videoEl.videoHeight\n                const expectedAspectRatio = this.videoTextureView.w / this.videoTextureView.h\n                const realAspectRatio = this.videoEl.videoWidth / this.videoEl.videoHeight\n                if (expectedAspectRatio > realAspectRatio) {\n                  this.videoTextureView.scaleX = realAspectRatio / expectedAspectRatio\n                  this.videoTextureView.scaleY = 1\n                } else {\n                  this.videoTextureView.scaleY = expectedAspectRatio / realAspectRatio\n                  this.videoTextureView.scaleX = 1\n                }\n              } catch (e) {\n                Log.error('texImage2d video', e)\n                this._stopUpdatingVideoTexture()\n                this.videoTextureView.visible = false\n              }\n              this.videoTexture.source.forceRenderUpdate()\n            }\n          }\n        }\n      }\n      if (!this._updatingVideoTexture) {\n        stage.on('frameStart', this._updateVideoTexture)\n        this._updatingVideoTexture = true\n      }\n    }\n  }\n\n  _stopUpdatingVideoTexture() {\n    if (this.textureMode) {\n      const stage = this.stage\n      stage.removeListener('frameStart', this._updateVideoTexture)\n      this._updatingVideoTexture = false\n      this.videoTextureView.visible = false\n\n      if (this.videoTexture.options.source) {\n        const gl = stage.gl\n        gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n        gl.clearColor(0, 0, 0, 1)\n        gl.clear(gl.COLOR_BUFFER_BIT)\n      }\n    }\n  }\n\n  updateSettings(settings = {}) {\n    // The Component that 'consumes' the media player.\n    this._consumer = settings.consumer\n\n    if (this._consumer && this._consumer.getMediaplayerSettings) {\n      // Allow consumer to add settings.\n      settings = Object.assign(settings, this._consumer.getMediaplayerSettings())\n    }\n\n    if (!Lightning.Utils.equalValues(this._stream, settings.stream)) {\n      if (settings.stream && settings.stream.keySystem) {\n        navigator\n          .requestMediaKeySystemAccess(\n            settings.stream.keySystem.id,\n            settings.stream.keySystem.config\n          )\n          .then(keySystemAccess => {\n            return keySystemAccess.createMediaKeys()\n          })\n          .then(createdMediaKeys => {\n            return this.videoEl.setMediaKeys(createdMediaKeys)\n          })\n          .then(() => {\n            if (settings.stream && settings.stream.src) this.open(settings.stream.src)\n          })\n          .catch(() => {\n            console.error('Failed to set up MediaKeys')\n          })\n      } else if (settings.stream && settings.stream.src) {\n        // This is here to be backwards compatible, will be removed\n        // in future sdk release\n        if (Settings.get('app', 'hls')) {\n          if (!window.Hls) {\n            window.Hls = class Hls {\n              static isSupported() {\n                console.warn('hls-light not included')\n                return false\n              }\n            }\n          }\n          if (window.Hls.isSupported()) {\n            if (!this._hls) this._hls = new window.Hls({ liveDurationInfinity: true })\n            this._hls.loadSource(settings.stream.src)\n            this._hls.attachMedia(this.videoEl)\n            this.videoEl.style.display = 'block'\n          }\n        } else {\n          this.open(settings.stream.src)\n        }\n      } else {\n        this.close()\n      }\n      this._stream = settings.stream\n    }\n\n    this._setHide(settings.hide)\n    this._setVideoArea(settings.videoPos)\n  }\n\n  _setHide(hide) {\n    if (this.textureMode) {\n      this.tag('Video').setSmooth('alpha', hide ? 0 : 1)\n    } else {\n      this.videoEl.style.visibility = hide ? 'hidden' : 'visible'\n    }\n  }\n\n  open(url, settings = { hide: false, videoPosition: null }) {\n    // prep the media url to play depending on platform (mediaPlayerplugin)\n    url = mediaUrl(url)\n    this._metrics = Metrics.media(url)\n    Log.info('Playing stream', url)\n    if (this.application.noVideo) {\n      Log.info('noVideo option set, so ignoring: ' + url)\n      return\n    }\n    // close the video when opening same url as current (effectively reloading)\n    if (this.videoEl.getAttribute('src') === url) {\n      this.close()\n    }\n    this.videoEl.setAttribute('src', url)\n\n    // force hide, then force show (in next tick!)\n    // (fixes comcast playback rollover issue)\n    this.videoEl.style.visibility = 'hidden'\n    this.videoEl.style.display = 'none'\n\n    setTimeout(() => {\n      this.videoEl.style.display = 'block'\n      this.videoEl.style.visibility = 'visible'\n    })\n\n    this._setHide(settings.hide)\n    this._setVideoArea(settings.videoPosition || [0, 0, 1920, 1080])\n  }\n\n  close() {\n    // We need to pause first in order to stop sound.\n    this.videoEl.pause()\n    this.videoEl.removeAttribute('src')\n\n    // force load to reset everything without errors\n    this.videoEl.load()\n\n    this._clearSrc()\n\n    this.videoEl.style.display = 'none'\n  }\n\n  playPause() {\n    if (this.isPlaying()) {\n      this.doPause()\n    } else {\n      this.doPlay()\n    }\n  }\n\n  get muted() {\n    return this.videoEl.muted\n  }\n\n  set muted(v) {\n    this.videoEl.muted = v\n  }\n\n  get loop() {\n    return this.videoEl.loop\n  }\n\n  set loop(v) {\n    this.videoEl.loop = v\n  }\n\n  isPlaying() {\n    return this._getState() === 'Playing'\n  }\n\n  doPlay() {\n    this.videoEl.play()\n  }\n\n  doPause() {\n    this.videoEl.pause()\n  }\n\n  reload() {\n    var url = this.videoEl.getAttribute('src')\n    this.close()\n    this.videoEl.src = url\n  }\n\n  getPosition() {\n    return Promise.resolve(this.videoEl.currentTime)\n  }\n\n  setPosition(pos) {\n    this.videoEl.currentTime = pos\n  }\n\n  getDuration() {\n    return Promise.resolve(this.videoEl.duration)\n  }\n\n  seek(time, absolute = false) {\n    if (absolute) {\n      this.videoEl.currentTime = time\n    } else {\n      this.videoEl.currentTime += time\n    }\n  }\n\n  get videoTextureView() {\n    return this.tag('Video').tag('VideoTexture')\n  }\n\n  get videoTexture() {\n    return this.videoTextureView.texture\n  }\n\n  _setVideoArea(videoPos) {\n    if (Lightning.Utils.equalValues(this._videoPos, videoPos)) {\n      return\n    }\n\n    this._videoPos = videoPos\n\n    if (this.textureMode) {\n      this.videoTextureView.patch({\n        smooth: {\n          x: videoPos[0],\n          y: videoPos[1],\n          w: videoPos[2] - videoPos[0],\n          h: videoPos[3] - videoPos[1],\n        },\n      })\n    } else {\n      const precision = this.stage.getRenderPrecision()\n      this.videoEl.style.left = Math.round(videoPos[0] * precision) + 'px'\n      this.videoEl.style.top = Math.round(videoPos[1] * precision) + 'px'\n      this.videoEl.style.width = Math.round((videoPos[2] - videoPos[0]) * precision) + 'px'\n      this.videoEl.style.height = Math.round((videoPos[3] - videoPos[1]) * precision) + 'px'\n    }\n  }\n\n  _fireConsumer(event, args) {\n    if (this._consumer) {\n      this._consumer.fire(event, args)\n    }\n  }\n\n  _equalInitData(buf1, buf2) {\n    if (!buf1 || !buf2) return false\n    if (buf1.byteLength != buf2.byteLength) return false\n    const dv1 = new Int8Array(buf1)\n    const dv2 = new Int8Array(buf2)\n    for (let i = 0; i != buf1.byteLength; i++) if (dv1[i] != dv2[i]) return false\n    return true\n  }\n\n  error(args) {\n    this._fireConsumer('$mediaplayerError', args)\n    this._setState('')\n    return ''\n  }\n\n  loadeddata(args) {\n    this._fireConsumer('$mediaplayerLoadedData', args)\n  }\n\n  play(args) {\n    this._fireConsumer('$mediaplayerPlay', args)\n  }\n\n  playing(args) {\n    this._fireConsumer('$mediaplayerPlaying', args)\n    this._setState('Playing')\n  }\n\n  canplay(args) {\n    this.videoEl.play()\n    this._fireConsumer('$mediaplayerStart', args)\n  }\n\n  loadstart(args) {\n    this._fireConsumer('$mediaplayerLoad', args)\n  }\n\n  seeked() {\n    this._fireConsumer('$mediaplayerSeeked', {\n      currentTime: this.videoEl.currentTime,\n      duration: this.videoEl.duration || 1,\n    })\n  }\n\n  seeking() {\n    this._fireConsumer('$mediaplayerSeeking', {\n      currentTime: this.videoEl.currentTime,\n      duration: this.videoEl.duration || 1,\n    })\n  }\n\n  durationchange(args) {\n    this._fireConsumer('$mediaplayerDurationChange', args)\n  }\n\n  encrypted(args) {\n    const video = args.videoElement\n    const event = args.event\n    // FIXME: Double encrypted events need to be properly filtered by Gstreamer\n    if (video.mediaKeys && !this._equalInitData(this._previousInitData, event.initData)) {\n      this._previousInitData = event.initData\n      this._fireConsumer('$mediaplayerEncrypted', args)\n    }\n  }\n\n  static _states() {\n    return [\n      class Playing extends this {\n        $enter() {\n          this._startUpdatingVideoTexture()\n        }\n        $exit() {\n          this._stopUpdatingVideoTexture()\n        }\n        timeupdate() {\n          this._fireConsumer('$mediaplayerProgress', {\n            currentTime: this.videoEl.currentTime,\n            duration: this.videoEl.duration || 1,\n          })\n        }\n        ended(args) {\n          this._fireConsumer('$mediaplayerEnded', args)\n          this._setState('')\n        }\n        pause(args) {\n          this._fireConsumer('$mediaplayerPause', args)\n          this._setState('Playing.Paused')\n        }\n        _clearSrc() {\n          this._fireConsumer('$mediaplayerStop', {})\n          this._setState('')\n        }\n        static _states() {\n          return [class Paused extends this {}]\n        }\n      },\n    ]\n  }\n}\n","class localCookie{constructor(e){return e=e||{},this.forceCookies=e.forceCookies||!1,!0===this._checkIfLocalStorageWorks()&&!0!==e.forceCookies?{getItem:this._getItemLocalStorage,setItem:this._setItemLocalStorage,removeItem:this._removeItemLocalStorage,clear:this._clearLocalStorage}:{getItem:this._getItemCookie,setItem:this._setItemCookie,removeItem:this._removeItemCookie,clear:this._clearCookies}}_checkIfLocalStorageWorks(){if(\"undefined\"==typeof localStorage)return!1;try{return localStorage.setItem(\"feature_test\",\"yes\"),\"yes\"===localStorage.getItem(\"feature_test\")&&(localStorage.removeItem(\"feature_test\"),!0)}catch(e){return!1}}_getItemLocalStorage(e){return window.localStorage.getItem(e)}_setItemLocalStorage(e,t){return window.localStorage.setItem(e,t)}_removeItemLocalStorage(e){return window.localStorage.removeItem(e)}_clearLocalStorage(){return window.localStorage.clear()}_getItemCookie(e){var t=document.cookie.match(RegExp(\"(?:^|;\\\\s*)\"+function(e){return e.replace(/([.*+?\\^${}()|\\[\\]\\/\\\\])/g,\"\\\\$1\")}(e)+\"=([^;]*)\"));return t&&\"\"===t[1]&&(t[1]=null),t?t[1]:null}_setItemCookie(e,t){var o=new Date,r=new Date(o.getTime()+15768e7);document.cookie=`${e}=${t}; expires=${r.toUTCString()};`}_removeItemCookie(e){document.cookie=`${e}=;Max-Age=-99999999;`}_clearCookies(){document.cookie.split(\";\").forEach(e=>{document.cookie=e.replace(/^ +/,\"\").replace(/=.*/,\"=;expires=Max-Age=-99999999\")})}}export default localCookie;\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\nimport localCookie from 'localCookie/module/localCookie.js'\n\nlet namespace\nlet lc\n\nexport const initStorage = () => {\n  namespace = Settings.get('platform', 'id')\n  // todo: pass options (for example to force the use of cookies)\n  lc = new localCookie()\n}\n\nconst namespacedKey = key => (namespace ? [namespace, key].join('.') : key)\n\nexport default {\n  get(key) {\n    try {\n      return JSON.parse(lc.getItem(namespacedKey(key)))\n    } catch (e) {\n      return null\n    }\n  },\n  set(key, value) {\n    try {\n      lc.setItem(namespacedKey(key), JSON.stringify(value))\n      return true\n    } catch (e) {\n      return false\n    }\n  },\n  remove(key) {\n    lc.removeItem(namespacedKey(key))\n  },\n  clear() {\n    if (namespace) {\n      lc.keys().forEach(key => {\n        // remove the item if in the namespace\n        key.indexOf(namespace + '.') === 0 ? lc.removeItem(key) : null\n      })\n    } else {\n      lc.clear()\n    }\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const hasRegex = /\\{\\/(.*?)\\/([igm]{0,3})\\}/g\nexport const isWildcard = /^[!*$]$/\nexport const hasLookupId = /\\/:\\w+?@@([0-9]+?)@@/\nexport const isNamedGroup = /^\\/:/\n\n/**\n * Test if a route is part regular expressed\n * and replace it for a simple character\n * @param route\n * @returns {*}\n */\nexport const stripRegex = (route, char = 'R') => {\n  // if route is part regular expressed we replace\n  // the regular expression for a character to\n  // simplify floor calculation and backtracking\n  if (hasRegex.test(route)) {\n    route = route.replace(hasRegex, char)\n  }\n  return route\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Create a local request register\n * @param flags\n * @returns {Map<any, any>}\n */\nexport const createRegister = flags => {\n  const reg = new Map()\n  // store user defined and router\n  // defined flags in register\n  ;[...Object.keys(flags), ...Object.getOwnPropertySymbols(flags)].forEach(key => {\n    reg.set(key, flags[key])\n  })\n  return reg\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isBoolean, isObject, symbols } from '../utils/helpers'\nimport { createRegister } from '../utils/register'\nimport Log from '../../Log'\n\nexport default class Request {\n  constructor(hash = '', navArgs, storeCaller) {\n    /**\n     * Hash we navigate to\n     * @type {string}\n     * @private\n     */\n    this._hash = hash\n\n    /**\n     * Do we store previous hash in history\n     * @type {boolean}\n     * @private\n     */\n    this._storeCaller = storeCaller\n\n    /**\n     * Request and navigate data\n     * @type {Map}\n     * @private\n     */\n    this._register = new Map()\n\n    /**\n     * Flag if the instance is created due to\n     * this request\n     * @type {boolean}\n     * @private\n     */\n    this._isCreated = false\n\n    /**\n     * Flag if the instance is shared between\n     * previous and current request\n     * @type {boolean}\n     * @private\n     */\n    this._isSharedInstance = false\n\n    /**\n     * Flag if the request has been cancelled\n     * @type {boolean}\n     * @private\n     */\n    this._cancelled = false\n\n    /**\n     * if instance is shared between requests we copy state object\n     * from instance before the new request overrides state\n     * @type {null}\n     * @private\n     */\n    this._copiedHistoryState = null\n\n    // if there are arguments attached to navigate()\n    // we store them in new request\n    if (isObject(navArgs)) {\n      this._register = createRegister(navArgs)\n    } else if (isBoolean(navArgs)) {\n      // if second navigate() argument is explicitly\n      // set to false we prevent the calling page\n      // from ending up in history\n      this._storeCaller = navArgs\n    }\n    // @todo: remove because we can simply check\n    // ._storeCaller property\n    this._register.set(symbols.store, this._storeCaller)\n  }\n\n  cancel() {\n    Log.debug('[router]:', `cancelled ${this._hash}`)\n    this._cancelled = true\n  }\n\n  get url() {\n    return this._hash\n  }\n\n  get register() {\n    return this._register\n  }\n\n  get hash() {\n    return this._hash\n  }\n\n  set hash(args) {\n    this._hash = args\n  }\n\n  get route() {\n    return this._route\n  }\n\n  set route(args) {\n    this._route = args\n  }\n\n  get provider() {\n    return this._provider\n  }\n\n  set provider(args) {\n    this._provider = args\n  }\n\n  get providerType() {\n    return this._providerType\n  }\n\n  set providerType(args) {\n    this._providerType = args\n  }\n\n  set page(args) {\n    this._page = args\n  }\n\n  get page() {\n    return this._page\n  }\n\n  set isCreated(args) {\n    this._isCreated = args\n  }\n\n  get isCreated() {\n    return this._isCreated\n  }\n\n  get isSharedInstance() {\n    return this._isSharedInstance\n  }\n\n  set isSharedInstance(args) {\n    this._isSharedInstance = args\n  }\n\n  get isCancelled() {\n    return this._cancelled\n  }\n\n  set copiedHistoryState(v) {\n    this._copiedHistoryState = v\n  }\n\n  get copiedHistoryState() {\n    return this._copiedHistoryState\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isFunction } from '../utils/helpers'\n\nexport default class Route {\n  constructor(config = {}) {\n    // keep backwards compatible\n    let type = ['on', 'before', 'after'].reduce((acc, type) => {\n      return isFunction(config[type]) ? type : acc\n    }, undefined)\n\n    this._cfg = config\n    if (type) {\n      this._provider = {\n        type,\n        request: config[type],\n      }\n    }\n  }\n\n  get path() {\n    return this._cfg.path\n  }\n\n  get component() {\n    return this._cfg.component\n  }\n\n  get options() {\n    return this._cfg.options\n  }\n\n  get widgets() {\n    return this._cfg.widgets\n  }\n\n  get cache() {\n    return this._cfg.cache\n  }\n\n  get hook() {\n    return this._cfg.hook\n  }\n\n  get beforeNavigate() {\n    return this._cfg.beforeNavigate\n  }\n\n  get provider() {\n    return this._provider\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { hasRegex, hasLookupId, isNamedGroup, stripRegex } from './regex'\nimport { routes, routeExists, bootRequest, getRoutes } from './router'\nimport Request from '../model/Request'\nimport Route from '../model/Route'\nimport { objectToQueryString, isObject, isString } from './helpers'\n\n/**\n * Simple route length calculation\n * @param route {string}\n * @returns {number} - floor\n */\nexport const getFloor = route => {\n  return stripRegex(route).split('/').length\n}\n\n/**\n * return all stored routes that live on the same floor\n * @param floor\n * @returns {Array}\n */\nconst getRoutesByFloor = floor => {\n  const matches = []\n  // simple filter of level candidates\n  for (let [route] of routes.entries()) {\n    if (getFloor(route) === floor) {\n      matches.push(route)\n    }\n  }\n  return matches\n}\n\n/**\n * return a matching route by provided hash\n * hash: home/browse/12 will match:\n * route: home/browse/:categoryId\n * @param hash {string}\n * @returns {boolean|{}} - route\n */\nexport const getRouteByHash = hash => {\n  // @todo: clean up on handleHash\n  hash = hash.replace(/^#/, '')\n\n  const getUrlParts = /(\\/?:?[^/]+)/g\n  // grab possible candidates from stored routes\n  const candidates = getRoutesByFloor(getFloor(hash))\n  // break hash down in chunks\n  const hashParts = hash.match(getUrlParts) || []\n\n  // to simplify the route matching and prevent look around\n  // in our getUrlParts regex we get the regex part from\n  // route candidate and store them so that we can reference\n  // them when we perform the actual regex against hash\n  let regexStore = []\n\n  let matches = candidates.filter(route => {\n    let isMatching = true\n    // replace regex in route with lookup id => @@{storeId}@@\n    if (hasRegex.test(route)) {\n      const regMatches = route.match(hasRegex)\n      if (regMatches && regMatches.length) {\n        route = regMatches.reduce((fullRoute, regex) => {\n          const lookupId = regexStore.length\n          fullRoute = fullRoute.replace(regex, `@@${lookupId}@@`)\n          regexStore.push(regex.substring(1, regex.length - 1))\n          return fullRoute\n        }, route)\n      }\n    }\n\n    const routeParts = route.match(getUrlParts) || []\n\n    for (let i = 0, j = routeParts.length; i < j; i++) {\n      const routePart = routeParts[i]\n      const hashPart = hashParts[i]\n\n      // Since we support catch-all and regex driven name groups\n      // we first test for regex lookup id and see if the regex\n      // matches the value from the hash\n      if (hasLookupId.test(routePart)) {\n        const routeMatches = hasLookupId.exec(routePart)\n        const storeId = routeMatches[1]\n        const routeRegex = regexStore[storeId]\n\n        // split regex and modifiers so we can use both\n        // to create a new RegExp\n        // eslint-disable-next-line\n                const regMatches = /\\/([^\\/]+)\\/([igm]{0,3})/.exec(routeRegex)\n\n        if (regMatches && regMatches.length) {\n          const expression = regMatches[1]\n          const modifiers = regMatches[2]\n\n          const regex = new RegExp(`^/${expression}$`, modifiers)\n\n          if (!regex.test(hashPart)) {\n            isMatching = false\n          }\n        }\n      } else if (isNamedGroup.test(routePart)) {\n        // we kindly skip namedGroups because this is dynamic\n        // we only need to the static and regex drive parts\n        continue\n      } else if (hashPart && routePart.toLowerCase() !== hashPart.toLowerCase()) {\n        isMatching = false\n      }\n    }\n    return isMatching\n  })\n\n  if (matches.length) {\n    if (matches.indexOf(hash) !== -1) {\n      const match = matches[matches.indexOf(hash)]\n      return routes.get(match)\n    } else {\n      // we give prio to static routes over dynamic\n      matches = matches.sort(a => {\n        return isNamedGroup.test(a) ? -1 : 1\n      })\n      // would be strange if this fails\n      // but still we test\n      if (routeExists(matches[0])) {\n        return routes.get(matches[0])\n      }\n    }\n  }\n  return false\n}\n\nexport const getValuesFromHash = (hash = '', path) => {\n  // replace the regex definition from the route because\n  // we already did the matching part\n  path = stripRegex(path, '')\n\n  const getUrlParts = /(\\/?:?[\\w%\\s:.-]+)/g\n  const hashParts = hash.match(getUrlParts) || []\n  const routeParts = path.match(getUrlParts) || []\n  const getNamedGroup = /^\\/:([\\w-]+)\\/?/\n\n  return routeParts.reduce((storage, value, index) => {\n    const match = getNamedGroup.exec(value)\n    if (match && match.length) {\n      storage.set(match[1], decodeURIComponent(hashParts[index].replace(/^\\//, '')))\n    }\n    return storage\n  }, new Map())\n}\n\nexport const getOption = (stack, prop) => {\n  // eslint-disable-next-line\n    if(stack && stack.hasOwnProperty(prop)){\n    return stack[prop]\n  }\n  // we explicitly return undefined since we're testing\n  // for explicit test values\n}\n\n/**\n * create and return new Route instance\n * @param config\n */\nexport const createRoute = config => {\n  // we need to provide a bit of additional logic\n  // for the bootComponent\n  if (config.path === '$') {\n    let options = {\n      preventStorage: true,\n    }\n    if (isObject(config.options)) {\n      options = {\n        ...config.options,\n        ...options,\n      }\n    }\n    config.options = options\n    // if configured add reference to bootRequest\n    // as router after provider\n    if (bootRequest) {\n      config.after = bootRequest\n    }\n  }\n  return new Route(config)\n}\n\n/**\n * Create a new Router request object\n * @param url\n * @param args\n * @param store\n * @returns {*}\n */\nexport const createRequest = (url, args, store) => {\n  return new Request(url, args, store)\n}\n\nexport const getHashByName = obj => {\n  if (!obj.to && !obj.name) {\n    return false\n  }\n  const route = getRouteByName(obj.to || obj.name)\n  const hasDynamicGroup = /\\/:([\\w-]+)\\/?/\n  let hash = route\n\n  // if route contains dynamic group\n  // we replace them with the provided params\n  if (hasDynamicGroup.test(route)) {\n    if (obj.params) {\n      const keys = Object.keys(obj.params)\n      hash = keys.reduce((acc, key) => {\n        return acc.replace(`:${key}`, obj.params[key])\n      }, route)\n    }\n    if (obj.query) {\n      return `${hash}${objectToQueryString(obj.query)}`\n    }\n  }\n  return hash\n}\n\nconst getRouteByName = name => {\n  for (let [path, route] of routes.entries()) {\n    if (route.name === name) {\n      return path\n    }\n  }\n  return false\n}\n\nexport const keepActivePageAlive = (route, request) => {\n  if (isString(route)) {\n    const routes = getRoutes()\n    if (routes.has(route)) {\n      route = routes.get(route)\n    } else {\n      return false\n    }\n  }\n\n  const register = request.register\n  const routeOptions = route.options\n\n  if (register.has('keepAlive')) {\n    return register.get('keepAlive')\n  } else if (routeOptions && routeOptions.keepAlive) {\n    return routeOptions.keepAlive\n  }\n\n  return false\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isArray, isFunction, ucfirst } from './helpers'\n\nexport default (page, events = [], params = {}) => {\n  if (!isArray(events)) {\n    events = [events]\n  }\n  events.forEach(e => {\n    const event = `_on${ucfirst(e)}`\n    if (isFunction(page[event])) {\n      page[event](params)\n    }\n  })\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { app, widgetsHost } from './router'\nimport { ucfirst } from './helpers'\nimport emit from './emit'\n\nlet activeWidget = null\n\nexport const getReferences = () => {\n  if (!widgetsHost) {\n    return\n  }\n  return widgetsHost.get().reduce((storage, widget) => {\n    const key = widget.ref.toLowerCase()\n    storage[key] = widget\n    return storage\n  }, {})\n}\n\n/**\n * update the visibility of the available widgets\n * for the current page / route\n * @param page\n */\nexport const updateWidgets = (widgets, page) => {\n  // force lowercase lookup\n  const configured = (widgets || []).map(ref => ref.toLowerCase())\n\n  widgetsHost.forEach(widget => {\n    widget.visible = configured.indexOf(widget.ref.toLowerCase()) !== -1\n    if (widget.visible) {\n      emit(widget, ['activated'], page)\n    }\n  })\n  if (app.state === 'Widgets' && activeWidget && !activeWidget.visible) {\n    app._setState('')\n  }\n}\n\nconst getWidgetByName = name => {\n  name = ucfirst(name)\n  return widgetsHost.getByRef(name) || false\n}\n\n/**\n * delegate app focus to a on-screen widget\n * @param name - {string}\n */\nexport const focusWidget = name => {\n  const widget = getWidgetByName(name)\n  if (widget) {\n    setActiveWidget(widget)\n\n    // if app is already in 'Widgets' state we can assume that\n    // focus has been delegated from one widget to another so\n    // we need to set the new widget reference and trigger a\n    // new focus calculation of Lightning's focuspath\n    if (app.state === 'Widgets') {\n      app.reload(activeWidget)\n    } else {\n      app._setState('Widgets', [activeWidget])\n    }\n  }\n}\n\nexport const handleRemote = (type, name) => {\n  if (type === 'widget') {\n    focusWidget(name)\n  } else if (type === 'page') {\n    restoreFocus()\n  }\n}\n\nexport const restoreFocus = () => {\n  activeWidget = null\n  app._setState('')\n}\n\nexport const getActiveWidget = () => {\n  return activeWidget\n}\n\nexport const setActiveWidget = instance => {\n  activeWidget = instance\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getReferences } from './widgets'\n\nexport const createComponent = (stage, type) => {\n  return stage.c({\n    type,\n    visible: false,\n    widgets: getReferences(),\n  })\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getActiveHash, getActivePage } from './router'\nimport { getOption, getRouteByHash } from './route'\nimport { isFunction, isObject, isArray, isBoolean, symbols } from './helpers'\nimport { getRouterConfig } from './router'\n\n/**\n * Simple flat array that holds the visited hashes + state Object\n * so the router can navigate back to them\n * @type {Array}\n */\nlet history = []\n\nexport const updateHistory = request => {\n  const hash = getActiveHash()\n  if (!hash) {\n    return\n  }\n\n  // navigate storage flag\n  const register = request.register\n  const forceNavigateStore = register.get(symbols.store)\n\n  // test preventStorage on route configuration\n  const activeRoute = getRouteByHash(hash)\n  const preventStorage = getOption(activeRoute.options, 'preventStorage')\n\n  // we give prio to navigate storage flag\n  let store = isBoolean(forceNavigateStore) ? forceNavigateStore : !preventStorage\n\n  if (store) {\n    const toStore = hash.replace(/^\\//, '')\n    const location = locationInHistory(toStore)\n    const stateObject = getStateObject(getActivePage(), request)\n    const routerConfig = getRouterConfig()\n\n    // store hash if it's not a part of history or flag for\n    // storage of same hash is true\n    if (location === -1 || routerConfig.get('storeSameHash')) {\n      history.push({ hash: toStore, state: stateObject })\n    } else {\n      // if we visit the same route we want to sync history\n      const prev = history.splice(location, 1)[0]\n      history.push({ hash: prev.hash, state: stateObject })\n    }\n  }\n}\n\nconst locationInHistory = hash => {\n  for (let i = 0; i < history.length; i++) {\n    if (history[i].hash === hash) {\n      return i\n    }\n  }\n  return -1\n}\n\nexport const getHistoryState = hash => {\n  let state = null\n  if (history.length) {\n    // if no hash is provided we get the last\n    // pushed history record\n    if (!hash) {\n      const record = history[history.length - 1]\n      // could be null\n      state = record.state\n    } else {\n      if (locationInHistory(hash) !== -1) {\n        const record = history[locationInHistory(hash)]\n        state = record.state\n      }\n    }\n  }\n  return state\n}\n\nexport const replaceHistoryState = (state = null, hash) => {\n  if (!history.length) {\n    return\n  }\n  const location = hash ? locationInHistory(hash) : history.length - 1\n  if (location !== -1 && isObject(state)) {\n    history[location].state = state\n  }\n}\n\nconst getStateObject = (page, request) => {\n  // if the new request shared instance with the\n  // previous request we used the copied state object\n  if (request.isSharedInstance) {\n    if (request.copiedHistoryState) {\n      return request.copiedHistoryState\n    }\n  } else if (page && isFunction(page.historyState)) {\n    return page.historyState()\n  }\n  return null\n}\n\nexport const getHistory = () => {\n  return history.slice(0)\n}\n\nexport const setHistory = (arr = []) => {\n  if (isArray(arr)) {\n    history = arr\n  }\n}\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Simple module for localization of strings.\n *\n * How to use:\n * 1. Create localization file with following JSON format:\n * {\n *   \"en\" :{\n *     \"how\": \"How do you want your egg today?\",\n *     \"boiledEgg\": \"Boiled egg\",\n *     \"softBoiledEgg\": \"Soft-boiled egg\",\n *     \"choice\": \"How to choose the egg\",\n *     \"buyQuestion\": \"I'd like to buy {0} eggs, {1} dollars each.\"\n *   },\n *\n *   \"it\": {\n *     \"how\": \"Come vuoi il tuo uovo oggi?\",\n *     \"boiledEgg\": \"Uovo sodo\",\n *     \"softBoiledEgg\": \"Uovo alla coque\",\n *     \"choice\": \"Come scegliere l'uovo\",\n *     \"buyQuestion\": \"Mi piacerebbe comprare {0} uova, {1} dollari ciascuna.\"\n *   }\n * }\n *\n * 2. Use Locale's module load method, specifying path to your localization file and set chosen language, e.g.:\n *    > Locale.load('static/locale/locale.json');\n *    > Locale.setLanguage('en');\n *\n * 3. Use localization strings:\n *    > console.log(Locale.tr.how);\n *    How do you want your egg today?\n *    > console.log(Locale.tr.boiledEgg);\n *    Boiled egg\n *\n * 4. String formatting\n *    > console.log(Locale.tr.buyQuestion.format(10, 0.5));\n *    I'd like to buy 10 eggs, 0.5 dollars each.\n */\n\nimport Log from '../Log'\n\nlet warned = false\nconst deprecated = (force = false) => {\n  if (force === true || warned === false) {\n    console.warn(\n      [\n        \"The 'Locale'-plugin in the Lightning-SDK is deprecated and will be removed in future releases.\",\n        \"Please consider using the new 'Language'-plugin instead.\",\n        'https://rdkcentral.github.io/Lightning-SDK/#/plugins/language',\n      ].join('\\n\\n')\n    )\n  }\n  warned = true\n}\nclass Locale {\n  constructor() {\n    this.__enabled = false\n  }\n\n  /**\n   * Loads translation object from external json file.\n   *\n   * @param {String} path Path to resource.\n   * @return {Promise}\n   */\n  async load(path) {\n    if (!this.__enabled) {\n      return\n    }\n\n    await fetch(path)\n      .then(resp => resp.json())\n      .then(resp => {\n        this.loadFromObject(resp)\n      })\n  }\n\n  /**\n   * Sets language used by module.\n   *\n   * @param {String} lang\n   */\n  setLanguage(lang) {\n    deprecated()\n    this.__enabled = true\n    this.language = lang\n  }\n\n  /**\n   * Returns reference to translation object for current language.\n   *\n   * @return {Object}\n   */\n  get tr() {\n    deprecated(true)\n    return this.__trObj[this.language]\n  }\n\n  /**\n   * Loads translation object from existing object (binds existing object).\n   *\n   * @param {Object} trObj\n   */\n  loadFromObject(trObj) {\n    deprecated()\n    const fallbackLanguage = 'en'\n    if (Object.keys(trObj).indexOf(this.language) === -1) {\n      Log.warn('No translations found for: ' + this.language)\n      if (Object.keys(trObj).indexOf(fallbackLanguage) > -1) {\n        Log.warn('Using fallback language: ' + fallbackLanguage)\n        this.language = fallbackLanguage\n      } else {\n        const error = 'No translations found for fallback language: ' + fallbackLanguage\n        Log.error(error)\n        throw Error(error)\n      }\n    }\n\n    this.__trObj = trObj\n    for (const lang of Object.values(this.__trObj)) {\n      for (const str of Object.keys(lang)) {\n        lang[str] = new LocalizedString(lang[str])\n      }\n    }\n  }\n}\n\n/**\n * Extended string class used for localization.\n */\nclass LocalizedString extends String {\n  /**\n   * Returns formatted LocalizedString.\n   * Replaces each placeholder value (e.g. {0}, {1}) with corresponding argument.\n   *\n   * E.g.:\n   * > new LocalizedString('{0} and {1} and {0}').format('A', 'B');\n   * A and B and A\n   *\n   * @param  {...any} args List of arguments for placeholders.\n   */\n  format(...args) {\n    const sub = args.reduce((string, arg, index) => string.split(`{${index}}`).join(arg), this)\n    return new LocalizedString(sub)\n  }\n}\n\nexport default new Locale()\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\n\nexport default class VersionLabel extends Lightning.Component {\n  static _template() {\n    return {\n      rect: true,\n      color: 0xbb0078ac,\n      h: 40,\n      w: 100,\n      x: w => w - 50,\n      y: h => h - 50,\n      mount: 1,\n      Text: {\n        w: w => w,\n        h: h => h,\n        y: 5,\n        x: 20,\n        text: {\n          fontSize: 22,\n          lineHeight: 26,\n        },\n      },\n    }\n  }\n\n  _firstActive() {\n    this.tag('Text').text = `APP - v${this.version}\\nSDK - v${this.sdkVersion}`\n    this.tag('Text').loadTexture()\n    this.w = this.tag('Text').renderWidth + 40\n    this.h = this.tag('Text').renderHeight + 5\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Settings from '../Settings'\nimport Log from '../Log'\nexport default class FpsIndicator extends Lightning.Component {\n  static _template() {\n    return {\n      rect: true,\n      color: 0xffffffff,\n      texture: Lightning.Tools.getRoundRect(80, 80, 40),\n      h: 80,\n      w: 80,\n      x: 100,\n      y: 100,\n      mount: 1,\n      Background: {\n        x: 3,\n        y: 3,\n        texture: Lightning.Tools.getRoundRect(72, 72, 36),\n        color: 0xff008000,\n      },\n      Counter: {\n        w: w => w,\n        h: h => h,\n        y: 10,\n        text: {\n          fontSize: 32,\n          textAlign: 'center',\n        },\n      },\n      Text: {\n        w: w => w,\n        h: h => h,\n        y: 48,\n        text: {\n          fontSize: 15,\n          textAlign: 'center',\n          text: 'FPS',\n        },\n      },\n    }\n  }\n\n  _setup() {\n    this.config = {\n      ...{\n        log: false,\n        interval: 500,\n        threshold: 1,\n      },\n      ...Settings.get('platform', 'showFps'),\n    }\n\n    this.fps = 0\n    this.lastFps = this.fps - this.config.threshold\n\n    const fpsCalculator = () => {\n      this.fps = ~~(1 / this.stage.dt)\n    }\n    this.stage.on('frameStart', fpsCalculator)\n    this.stage.off('framestart', fpsCalculator)\n    this.interval = setInterval(this.showFps.bind(this), this.config.interval)\n  }\n\n  _firstActive() {\n    this.showFps()\n  }\n\n  _detach() {\n    clearInterval(this.interval)\n  }\n\n  showFps() {\n    if (Math.abs(this.lastFps - this.fps) <= this.config.threshold) return\n    this.lastFps = this.fps\n    // green\n    let bgColor = 0xff008000\n    // orange\n    if (this.fps <= 40 && this.fps > 20) bgColor = 0xffffa500\n    // red\n    else if (this.fps <= 20) bgColor = 0xffff0000\n\n    this.tag('Background').setSmooth('color', bgColor)\n    this.tag('Counter').text = `${this.fps}`\n\n    this.config.log && Log.info('FPS', this.fps)\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\nimport Utils from '../Utils'\n\nlet meta = {}\nlet translations = {}\nlet language = null\nlet dictionary = null\n\nexport const initLanguage = (file, language = null) => {\n  return new Promise((resolve, reject) => {\n    fetch(file)\n      .then(response => response.json())\n      .then(json => {\n        setTranslations(json)\n        // set language (directly or in a promise)\n        typeof language === 'object' && 'then' in language && typeof language.then === 'function'\n          ? language\n              .then(lang =>\n                setLanguage(lang)\n                  .then(resolve)\n                  .catch(reject)\n              )\n              .catch(e => {\n                Log.error(e)\n                reject(e)\n              })\n          : setLanguage(language)\n              .then(resolve)\n              .catch(reject)\n      })\n      .catch(() => {\n        const error = 'Language file ' + file + ' not found'\n        Log.error(error)\n        reject(error)\n      })\n  })\n}\n\nconst setTranslations = obj => {\n  if ('meta' in obj) {\n    meta = { ...obj.meta }\n    delete obj.meta\n  }\n  translations = obj\n}\n\nconst getLanguage = () => {\n  return language\n}\n\nconst setLanguage = lng => {\n  language = null\n  dictionary = null\n\n  return new Promise((resolve, reject) => {\n    if (lng in translations) {\n      language = lng\n    } else {\n      if ('map' in meta && lng in meta.map && meta.map[lng] in translations) {\n        language = meta.map[lng]\n      } else if ('default' in meta && meta.default in translations) {\n        const error =\n          'Translations for Language ' +\n          language +\n          ' not found. Using default language ' +\n          meta.default\n        Log.warn(error)\n        language = meta.default\n      } else {\n        const error = 'Translations for Language ' + language + ' not found.'\n        Log.error(error)\n        reject(error)\n      }\n    }\n\n    if (language) {\n      Log.info('Setting language to', language)\n\n      const translationsObj = translations[language]\n      if (typeof translationsObj === 'object') {\n        dictionary = translationsObj\n        resolve()\n      } else if (typeof translationsObj === 'string') {\n        const url = Utils.asset(translationsObj)\n\n        fetch(url)\n          .then(response => response.json())\n          .then(json => {\n            // save the translations for this language (to prevent loading twice)\n            translations[language] = json\n            dictionary = json\n            resolve()\n          })\n          .catch(e => {\n            const error = 'Error while fetching ' + url\n            Log.error(error, e)\n            reject(error)\n          })\n      }\n    }\n  })\n}\n\nexport default {\n  translate(key) {\n    let replacements = [...arguments].slice(1)\n\n    // no replacements so just translated string\n    if (replacements.length === 0) {\n      return (dictionary && dictionary[key]) || key\n    } else {\n      if (replacements.length === 1 && typeof replacements[0] === 'object') {\n        replacements = replacements.pop()\n      }\n\n      return Object.keys(\n        // maps array input to an object {0: 'item1', 1: 'item2'}\n        Array.isArray(replacements) ? Object.assign({}, replacements) : replacements\n      ).reduce((text, replacementKey) => {\n        return text.replace(\n          new RegExp('{\\\\s?' + replacementKey + '\\\\s?}', 'g'),\n          replacements[replacementKey]\n        )\n      }, (dictionary && dictionary[key]) || key)\n    }\n  },\n\n  translations(obj) {\n    setTranslations(obj)\n  },\n\n  set(language) {\n    return setLanguage(language)\n  },\n\n  get() {\n    return getLanguage()\n  },\n\n  available() {\n    const languageKeys = Object.keys(translations)\n    return languageKeys.map(key => ({ code: key, name: (meta.names && meta.names[key]) || key }))\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\n\nconst registry = {\n  eventListeners: [],\n  timeouts: [],\n  intervals: [],\n  targets: [],\n}\n\nexport default {\n  // Timeouts\n  setTimeout(cb, timeout, ...params) {\n    const timeoutId = setTimeout(\n      () => {\n        registry.timeouts = registry.timeouts.filter(id => id !== timeoutId)\n        cb.apply(null, params)\n      },\n      timeout,\n      params\n    )\n    Log.info('Set Timeout', 'ID: ' + timeoutId)\n    registry.timeouts.push(timeoutId)\n    return timeoutId\n  },\n\n  clearTimeout(timeoutId) {\n    if (registry.timeouts.indexOf(timeoutId) > -1) {\n      registry.timeouts = registry.timeouts.filter(id => id !== timeoutId)\n      Log.info('Clear Timeout', 'ID: ' + timeoutId)\n      clearTimeout(timeoutId)\n    } else {\n      Log.error('Clear Timeout', 'ID ' + timeoutId + ' not found')\n    }\n  },\n\n  clearTimeouts() {\n    registry.timeouts.forEach(timeoutId => {\n      this.clearTimeout(timeoutId)\n    })\n  },\n\n  // Intervals\n  setInterval(cb, interval, ...params) {\n    const intervalId = setInterval(\n      () => {\n        registry.intervals.filter(id => id !== intervalId)\n        cb.apply(null, params)\n      },\n      interval,\n      params\n    )\n    Log.info('Set Interval', 'ID: ' + intervalId)\n    registry.intervals.push(intervalId)\n    return intervalId\n  },\n\n  clearInterval(intervalId) {\n    if (registry.intervals.indexOf(intervalId) > -1) {\n      registry.intervals = registry.intervals.filter(id => id !== intervalId)\n      Log.info('Clear Interval', 'ID: ' + intervalId)\n      clearInterval(intervalId)\n    } else {\n      Log.error('Clear Interval', 'ID ' + intervalId + ' not found')\n    }\n  },\n\n  clearIntervals() {\n    registry.intervals.forEach(intervalId => {\n      this.clearInterval(intervalId)\n    })\n  },\n\n  // Event listeners\n  addEventListener(target, event, handler) {\n    target.addEventListener(event, handler)\n    const targetIndex =\n      registry.targets.indexOf(target) > -1\n        ? registry.targets.indexOf(target)\n        : registry.targets.push(target) - 1\n\n    registry.eventListeners[targetIndex] = registry.eventListeners[targetIndex] || {}\n    registry.eventListeners[targetIndex][event] = registry.eventListeners[targetIndex][event] || []\n    registry.eventListeners[targetIndex][event].push(handler)\n    Log.info(\n      'Add eventListener',\n      'Target:',\n      target,\n      'Event: ' + event,\n      'Handler:',\n      handler.toString()\n    )\n  },\n\n  removeEventListener(target, event, handler) {\n    const targetIndex = registry.targets.indexOf(target)\n    if (\n      targetIndex > -1 &&\n      registry.eventListeners[targetIndex] &&\n      registry.eventListeners[targetIndex][event] &&\n      registry.eventListeners[targetIndex][event].indexOf(handler) > -1\n    ) {\n      registry.eventListeners[targetIndex][event] = registry.eventListeners[targetIndex][\n        event\n      ].filter(fn => fn !== handler)\n      Log.info(\n        'Remove eventListener',\n        'Target:',\n        target,\n        'Event: ' + event,\n        'Handler:',\n        handler.toString()\n      )\n      target.removeEventListener(event, handler)\n    } else {\n      Log.error(\n        'Remove eventListener',\n        'Not found',\n        'Target',\n        target,\n        'Event: ' + event,\n        'Handler',\n        handler.toString()\n      )\n    }\n  },\n\n  // if `event` is omitted, removes all registered event listeners for target\n  // if `target` is also omitted, removes all registered event listeners\n  removeEventListeners(target, event) {\n    if (target && event) {\n      const targetIndex = registry.targets.indexOf(target)\n      if (targetIndex > -1) {\n        registry.eventListeners[targetIndex][event].forEach(handler => {\n          this.removeEventListener(target, event, handler)\n        })\n      }\n    } else if (target) {\n      const targetIndex = registry.targets.indexOf(target)\n      if (targetIndex > -1) {\n        Object.keys(registry.eventListeners[targetIndex]).forEach(_event => {\n          this.removeEventListeners(target, _event)\n        })\n      }\n    } else {\n      Object.keys(registry.eventListeners).forEach(targetIndex => {\n        this.removeEventListeners(registry.targets[targetIndex])\n      })\n    }\n  },\n\n  // Clear everything (to be called upon app close for proper cleanup)\n  clear() {\n    this.clearTimeouts()\n    this.clearIntervals()\n    this.removeEventListeners()\n    registry.eventListeners = []\n    registry.timeouts = []\n    registry.intervals = []\n    registry.targets = []\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const isObject = v => {\n  return typeof v === 'object' && v !== null\n}\n\nexport const isString = v => {\n  return typeof v === 'string'\n}\n\nexport const getRgbaComponents = argb => {\n  return {\n    r: ((argb / 65536) | 0) % 256,\n    g: ((argb / 256) | 0) % 256,\n    b: (argb * 1) % 256,\n    a: (argb / 16777216) | 0,\n  }\n}\n\nexport const limitWithinRange = (num, min, max) => {\n  return Math.min(Math.max(num, min), max)\n}\n\nexport const mergeColors = (c1, c2, p) => {\n  let r1 = ((c1 / 65536) | 0) % 256\n  let g1 = ((c1 / 256) | 0) % 256\n  let b1 = c1 % 256\n  let a1 = (c1 / 16777216) | 0\n  let r2 = ((c2 / 65536) | 0) % 256\n  let g2 = ((c2 / 256) | 0) % 256\n  let b2 = c2 % 256\n  let a2 = (c2 / 16777216) | 0\n  let r = r1 * p + r2 * (1 - p)\n  let g = g1 * p + g2 * (1 - p)\n  let b = b1 * p + b2 * (1 - p)\n  let a = a1 * p + a2 * (1 - p)\n  return Math.round(a) * 16777216 + Math.round(r) * 65536 + Math.round(g) * 256 + Math.round(b)\n}\n\nexport const calculateAlpha = (argb, p) => {\n  if (p > 1) {\n    p /= 100\n  } else if (p < 0) {\n    p = 0\n  }\n  let r = ((argb / 65536) | 0) % 256\n  let g = ((argb / 256) | 0) % 256\n  let b = argb % 256\n  return (r << 16) + (g << 8) + b + ((p * 255) | 0) * 16777216\n}\n\nexport const mergeColorAlpha = (c, alpha) => {\n  let a = (((c / 16777216) | 0) * alpha) | 0\n  return (\n    (((((c >> 16) & 0xff) * a) / 255) & 0xff) +\n    ((((c & 0xff00) * a) / 255) & 0xff00) +\n    (((((c & 0xff) << 16) * a) / 255) & 0xff0000) +\n    (a << 24)\n  )\n}\n\nconst getArgbNumber = rgba => {\n  rgba[0] = Math.max(0, Math.min(255, rgba[0]))\n  rgba[1] = Math.max(0, Math.min(255, rgba[1]))\n  rgba[2] = Math.max(0, Math.min(255, rgba[2]))\n  rgba[3] = Math.max(0, Math.min(255, rgba[3]))\n  let v = ((rgba[3] | 0) << 24) + ((rgba[0] | 0) << 16) + ((rgba[1] | 0) << 8) + (rgba[2] | 0)\n  if (v < 0) {\n    v = 0xffffffff + v + 1\n  }\n  return v\n}\n\nexport const argbToHsva = argb => {\n  const color = getRgbaComponents(argb)\n  let r = color.r / 255\n  let g = color.g / 255\n  let b = color.b / 255\n  let h = 0\n  let s = 0\n\n  const cMax = Math.max(r, g, b)\n  const cMin = Math.min(r, g, b)\n  const delta = cMax - cMin\n\n  //calculate hue\n  if (delta < 0.00001) {\n    h = 0\n  } else if (cMax !== 0 || cMin !== 0) {\n    if (r === cMax) {\n      h = (60 * ((g - b) / delta) + 360) % 360\n    } else if (g === cMax) {\n      h = (60 * ((b - r) / delta) + 120) % 360\n    } else if (b === cMax) {\n      h = (60 * ((r - g) / delta) + 240) % 360\n    }\n  }\n\n  //calc saturation\n  if (cMax > 0) {\n    s = delta / cMax\n  }\n  return {\n    h,\n    s,\n    v: cMax,\n    a: color.a / 255,\n  }\n}\n\nexport const hsvaToArgb = color => {\n  const h = color.h\n  const c = color.v * color.s\n  const m = color.v - c\n  const x = c * (1.0 - Math.abs(((h / 60) % 2) - 1))\n  let r = 0\n  let g = 0\n  let b = 0\n\n  if (0 <= h && h < 60) {\n    r = c\n    g = x\n  } else if (60 <= h && h < 120) {\n    r = x\n    g = c\n  } else if (120 <= h && h < 180) {\n    g = c\n    b = x\n  } else if (180 <= h && h < 240) {\n    g = x\n    b = c\n  } else if (240 <= h && h < 300) {\n    r = x\n    b = c\n  } else if (300 <= h && h < 360) {\n    r = c\n    b = x\n  }\n\n  r = Math.round((r + m) * 255.0)\n  g = Math.round((g + m) * 255.0)\n  b = Math.round((b + m) * 255.0)\n  return getArgbNumber([r, g, b, color.a * 255])\n}\n\nexport const argbToHSLA = argb => {\n  const col = getRgbaComponents(argb)\n  const r = col.r / 255\n  const g = col.g / 255\n  const b = col.b / 255\n\n  const max = Math.max(r, g, b)\n  const min = Math.min(r, g, b)\n\n  let h = 0\n  let s = 0\n  const l = (min + max) * 0.5\n  if (l > 0) {\n    const maxMin = max - min\n    if (maxMin > 0) {\n      const r2 = (max - r) / maxMin\n      const g2 = (max - g) / maxMin\n      const b2 = (max - b) / maxMin\n      if (l < 0.5) {\n        s = max + min\n      } else {\n        s = 2 - max - min\n      }\n\n      if (r === max && g === min) {\n        h = 5.0 + b2\n      } else if (r === max) {\n        h = 1.0 - g2\n      } else if (g === max && b === min) {\n        h = 1.0 + r2\n      } else if (g === max) {\n        h = 3.0 - b2\n      } else if (b === max) {\n        h = 3.0 + g2\n      } else {\n        h = 5.0 - r2\n      }\n      h = h / 6\n    }\n  }\n  return { h: h % 1, s, l, a: col.a }\n}\n\nexport const hslaToARGB = hsla => {\n  let r = 1\n  let g = 1\n  let b = 1\n\n  let h = hsla.h\n  let s = hsla.s\n  let l = hsla.l\n\n  if (h < 0) {\n    h += 1\n  }\n  let max = 0\n  if (l <= 0.5) {\n    max = l * (1.0 + s)\n  } else {\n    max = l + s - l * s\n  }\n\n  if (max > 0) {\n    h *= 6.0\n    const min = l + l - max\n    const minMax = (max - min) / max\n    const sextant = Math.floor(h)\n    const fract = h - sextant\n    const minMaxFract = max * minMax * fract\n    const mid1 = min + minMaxFract\n    const mid2 = max - minMaxFract\n\n    if (sextant === 0) {\n      r = max\n      g = mid1\n      b = min\n    }\n    if (sextant === 1) {\n      r = mid2\n      g = max\n      b = min\n    }\n    if (sextant === 2) {\n      r = min\n      g = max\n      b = mid1\n    }\n    if (sextant === 3) {\n      r = min\n      g = mid2\n      b = max\n    }\n    if (sextant === 4) {\n      r = mid1\n      g = min\n      b = max\n    }\n    if (sextant === 5) {\n      r = max\n      g = min\n      b = mid2\n    }\n  }\n  return getArgbNumber([Math.floor(r * 255), Math.floor(g * 255), Math.floor(b * 255), hsla.a])\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\nimport { mergeColors, calculateAlpha, isObject, isString, argbToHSLA, hslaToARGB } from './utils.js'\n\nlet colors = {\n  white: '#ffffff',\n  black: '#000000',\n  red: '#ff0000',\n  green: '#00ff00',\n  blue: '#0000ff',\n  yellow: '#feff00',\n  cyan: '#00feff',\n  magenta: '#ff00ff',\n}\n\nconst normalizedColors = {\n  //store for normalized colors\n}\n\nconst addColors = (colorsToAdd, value) => {\n  if (isObject(colorsToAdd)) {\n    // clean up normalizedColors if they exist in the to be added colors\n    Object.keys(colorsToAdd).forEach(color => cleanUpNormalizedColors(color))\n    colors = Object.assign({}, colors, colorsToAdd)\n  } else if (isString(colorsToAdd) && value) {\n    cleanUpNormalizedColors(colorsToAdd)\n    colors[colorsToAdd] = value\n  }\n}\n\nconst cleanUpNormalizedColors = color => {\n  for (let c in normalizedColors) {\n    if (c.indexOf(color) > -1) {\n      delete normalizedColors[c]\n    }\n  }\n}\n\nexport const initColors = file => {\n  return new Promise((resolve, reject) => {\n    if (typeof file === 'object') {\n      addColors(file)\n      resolve()\n    }\n    fetch(file)\n      .then(response => response.json())\n      .then(json => {\n        addColors(json)\n        resolve()\n      })\n      .catch(() => {\n        const error = 'Colors file ' + file + ' not found'\n        Log.error(error)\n        reject(error)\n      })\n  })\n}\n\nconst normalizeColorToARGB = color => {\n  let targetColor = normalizedColors[color] || colors[color] || color\n  if (!targetColor) {\n    targetColor = color\n  }\n  const check = /^#([0-9A-F]{3}|[0-9A-F]{6})$/i\n  if (isString(targetColor) && check.test(targetColor)) {\n    let hex = check.exec(targetColor)[1]\n    if (hex.length === 3) {\n      hex = hex\n        .split('')\n        .map(value => {\n          return value + value\n        })\n        .join('')\n    }\n    targetColor = `0xff${hex}` * 1\n  }\n  if (!normalizedColors[color]) {\n    normalizedColors[color] = targetColor\n  }\n  return targetColor || 0xffffffff\n}\n\nexport default color => {\n  return Color.generate(color)\n}\n\nconst Color = {\n  color: null,\n  generate: function(value = this.color) {\n    if (normalizedColors[value]) {\n      this.color = normalizedColors[value]\n    } else {\n      this.color = normalizeColorToARGB(value)\n    }\n    return this\n  },\n  get() {\n    return this.color\n  },\n  alpha: function(percentage) {\n    this.color = calculateAlpha(this.color, Math.abs(percentage))\n    return this\n  },\n  darker(percentage) {\n    const hsl = argbToHSLA(this.color)\n    hsl.l = hsl.l * (1 - percentage)\n    this.color = hslaToARGB(hsl)\n    return this\n  },\n  lighter(percentage) {\n    const hsl = argbToHSLA(this.color)\n    hsl.l = hsl.l + (1 - hsl.l) * percentage\n    this.color = hslaToARGB(hsl)\n    return this\n  },\n  saturation(percentage) {\n    const hsl = argbToHSLA(this.color)\n    hsl.s = percentage\n    this.color = hslaToARGB(hsl)\n    return this\n  },\n  lightness(percentage) {\n    const hsl = argbToHSLA(this.color)\n    hsl.l = percentage\n    this.color = hslaToARGB(hsl)\n    return this\n  },\n  hue(degrees) {\n    const hsl = argbToHSLA(this.color)\n    hsl.h = degrees\n    this.color = hslaToARGB(hsl)\n    return this\n  },\n  mix(argb, p) {\n    this.color = mergeColors(this.color, argb, p)\n    return this\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Deepmerge from 'deepmerge'\nimport Lightning from '../Lightning'\nimport Locale from '../Locale'\nimport Metrics from '../Metrics'\nimport VersionLabel from '../VersionLabel'\nimport FpsCounter from '../FpsCounter'\nimport Log from '../Log'\nimport Settings from '../Settings'\nimport { initLanguage } from '../Language'\nimport Utils from '../Utils'\nimport Registry from '../Registry'\nimport { initColors } from '../Colors'\n\nimport packageInfo from '../../package.json'\n\nexport let AppInstance\nexport let AppData\n\nconst defaultOptions = {\n  stage: { w: 1920, h: 1080, clearColor: 0x00000000, canvas2d: false },\n  debug: false,\n  defaultFontFace: 'RobotoRegular',\n  keys: {\n    8: 'Back',\n    13: 'Enter',\n    27: 'Menu',\n    37: 'Left',\n    38: 'Up',\n    39: 'Right',\n    40: 'Down',\n    174: 'ChannelDown',\n    175: 'ChannelUp',\n    178: 'Stop',\n    250: 'PlayPause',\n    191: 'Search', // Use \"/\" for keyboard\n    409: 'Search',\n  },\n}\n\nconst customFontFaces = []\n\nconst fontLoader = (fonts, store) =>\n  new Promise((resolve, reject) => {\n    fonts\n      .map(({ family, url, urls, descriptors }) => () => {\n        const src = urls\n          ? urls.map(url => {\n              return 'url(' + url + ')'\n            })\n          : 'url(' + url + ')'\n        const fontFace = new FontFace(family, src, descriptors || {})\n        store.push(fontFace)\n        Log.info('Loading font', family)\n        document.fonts.add(fontFace)\n        return fontFace.load()\n      })\n      .reduce((promise, method) => {\n        return promise.then(() => method())\n      }, Promise.resolve(null))\n      .then(resolve)\n      .catch(reject)\n  })\n\nexport default function(App, appData, platformSettings) {\n  const { width, height } = platformSettings\n\n  if (width && height) {\n    defaultOptions.stage['w'] = width\n    defaultOptions.stage['h'] = height\n    defaultOptions.stage['precision'] = width / 1920\n  }\n\n  // support for 720p browser\n  if (!width && !height && window.innerHeight === 720) {\n    defaultOptions.stage['w'] = 1280\n    defaultOptions.stage['h'] = 720\n    defaultOptions.stage['precision'] = 1280 / 1920\n  }\n\n  return class Application extends Lightning.Application {\n    constructor(options) {\n      const config = Deepmerge(defaultOptions, options)\n      // Deepmerge breaks HTMLCanvasElement, so restore the passed in canvas.\n      if (options.stage.canvas) {\n        config.stage.canvas = options.stage.canvas\n      }\n      super(config)\n      this.config = config\n    }\n\n    static _template() {\n      return {\n        w: 1920,\n        h: 1080,\n      }\n    }\n\n    _setup() {\n      Promise.all([\n        this.loadFonts((App.config && App.config.fonts) || (App.getFonts && App.getFonts()) || []),\n        // to be deprecated\n        Locale.load((App.config && App.config.locale) || (App.getLocale && App.getLocale())),\n        App.language && this.loadLanguage(App.language()),\n        App.colors && this.loadColors(App.colors()),\n      ])\n        .then(() => {\n          Metrics.app.loaded()\n\n          AppData = appData\n\n          AppInstance = this.stage.c({\n            ref: 'App',\n            type: App,\n            zIndex: 1,\n            forceZIndexContext: !!platformSettings.showVersion || !!platformSettings.showFps,\n          })\n\n          this.childList.a(AppInstance)\n\n          this._refocus()\n\n          Log.info('App version', this.config.version)\n          Log.info('SDK version', packageInfo.version)\n\n          if (platformSettings.showVersion) {\n            this.childList.a({\n              ref: 'VersionLabel',\n              type: VersionLabel,\n              version: this.config.version,\n              sdkVersion: packageInfo.version,\n              zIndex: 1,\n            })\n          }\n\n          if (platformSettings.showFps) {\n            this.childList.a({\n              ref: 'FpsCounter',\n              type: FpsCounter,\n              zIndex: 1,\n            })\n          }\n\n          super._setup()\n        })\n        .catch(console.error)\n    }\n\n    _handleBack() {\n      this.closeApp()\n    }\n\n    _handleExit() {\n      this.closeApp()\n    }\n\n    closeApp() {\n      Log.info('Signaling App Close')\n\n      if (platformSettings.onClose && typeof platformSettings.onClose === 'function') {\n        platformSettings.onClose(...arguments)\n      } else {\n        this.close()\n      }\n    }\n\n    close() {\n      Log.info('Closing App')\n\n      Settings.clearSubscribers()\n      Registry.clear()\n\n      this.childList.remove(this.tag('App'))\n      this.cleanupFonts()\n      // force texture garbage collect\n      this.stage.gc()\n      this.destroy()\n    }\n\n    loadFonts(fonts) {\n      return platformSettings.fontLoader && typeof platformSettings.fontLoader === 'function'\n        ? platformSettings.fontLoader(fonts, customFontFaces)\n        : fontLoader(fonts, customFontFaces)\n    }\n\n    cleanupFonts() {\n      if ('delete' in document.fonts) {\n        customFontFaces.forEach(fontFace => {\n          Log.info('Removing font', fontFace.family)\n          document.fonts.delete(fontFace)\n        })\n      } else {\n        Log.info('No support for removing manually-added fonts')\n      }\n    }\n\n    loadLanguage(config) {\n      let file = Utils.asset('translations.json')\n      let language = config\n\n      if (typeof language === 'object') {\n        language = config.language || null\n        file = config.file || file\n      }\n\n      return initLanguage(file, language)\n    }\n\n    loadColors(config) {\n      let file = Utils.asset('colors.json')\n      if (config && (typeof config === 'string' || typeof config === 'object')) {\n        file = config\n      }\n      return initColors(file)\n    }\n\n    set focus(v) {\n      this._focussed = v\n      this._refocus()\n    }\n\n    _getFocused() {\n      return this._focussed || this.tag('App')\n    }\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  getConfigMap,\n  isArray,\n  isBoolean,\n  isComponentConstructor,\n  isFunction,\n  isPage,\n  symbols,\n  cleanHash,\n} from './helpers'\nimport { step, navigateQueue } from '../index'\nimport { createRoute, getOption } from './route'\nimport { createComponent } from './components'\nimport Log from '../../Log'\nimport { isWildcard } from './regex'\nimport emit from './emit'\nimport { updateWidgets } from './widgets'\nimport { setHistory, updateHistory } from './history'\nimport { AppInstance } from '../../Application'\n\n/**\n * @type {Lightning.Application}\n */\nexport let application\n\n/**\n * Actual instance of the app\n * @type {Lightning.Component}\n */\nexport let app\n\n/**\n * Component that hosts all routed pages\n * @type {Lightning.Component}\n */\nexport let pagesHost\n\n/**\n * @type {Lightning.Stage}\n */\nexport let stage\n\n/**\n * Platform driven Router configuration\n * @type {Map<string>}\n */\nexport let routerConfig\n\n/**\n * Component that hosts all attached widgets\n * @type {Lightning.Component}\n */\nexport let widgetsHost\n\n/**\n * Hash we point the browser to when we boot the app\n * and there is no deep-link provided\n * @type {string|Function}\n */\nlet rootHash\n\n/**\n * Boot request will fire before app start\n * can be used to execute some global logic\n * and can be configured\n */\nexport let bootRequest\n\n/**\n * Flag if we need to update the browser location hash.\n * Router can work without.\n * @type {boolean}\n */\nexport let updateHash = true\n\n/**\n * Will be called before a route starts, can be overridden\n * via routes config\n * @param from - route we came from\n * @param to - route we navigate to\n * @returns {Promise<*>}\n */\n// eslint-disable-next-line\nexport let beforeEachRoute = async (from, to)=>{\n  return true\n}\n\n/**\n *  * Will be called after a navigate successfully resolved,\n * can be overridden via routes config\n */\nexport let afterEachRoute = () => {}\n\n/**\n * All configured routes\n * @type {Map<string, object>}\n */\nexport let routes = new Map()\n\n/**\n * Store all page components per route\n * @type {Map<string, object>}\n */\nexport let components = new Map()\n\n/**\n * Flag if router has been initialised\n * @type {boolean}\n */\nlet initialised = false\n\n/**\n * Current page being rendered on screen\n * @type {null}\n */\nlet activePage = null\nlet activeHash\nlet activeRoute\n\n/**\n *  During the process of a navigation request a new\n *  request can start, to prevent unwanted behaviour\n *  the navigate()-method stores the last accepted hash\n *  so we can invalidate any prior requests\n */\nlet lastAcceptedHash\n\n/**\n * With on()-data providing behaviour the Router forced the App\n * in a Loading state. When the data-provider resolves we want to\n * change the state back to where we came from\n */\nlet previousState\n\nconst mixin = app => {\n  // by default the Router Baseclass provides the component\n  // reference in which we store our pages\n  if (app.pages) {\n    pagesHost = app.pages.childList\n  }\n  // if the app is using widgets we grab refs\n  // and hide all the widgets\n  if (app.widgets && app.widgets.children) {\n    widgetsHost = app.widgets.childList\n    // hide all widgets on boot\n    widgetsHost.forEach(w => (w.visible = false))\n  }\n  app._handleBack = e => {\n    step(-1)\n    e.preventDefault()\n  }\n}\n\nexport const bootRouter = (config, instance) => {\n  let { appInstance, routes } = config\n\n  // if instance is provided and it's and Lightning Component instance\n  if (instance && isPage(instance)) {\n    app = instance\n  }\n  if (!app) {\n    app = appInstance || AppInstance\n  }\n\n  application = app.application\n  pagesHost = application.childList\n  stage = app.stage\n  routerConfig = getConfigMap()\n\n  mixin(app)\n\n  if (isArray(routes)) {\n    setup(config)\n  } else if (isFunction(routes)) {\n    console.warn('[Router]: Calling Router.route() directly is deprecated.')\n    console.warn(\n      'Use object config: https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration'\n    )\n  }\n}\n\nconst setup = config => {\n  if (!initialised) {\n    init(config)\n  }\n  config.routes.forEach(r => {\n    const path = cleanHash(r.path)\n    if (!routeExists(path)) {\n      const route = createRoute(r)\n      routes.set(path, route)\n      // if route has a configured component property\n      // we store it in a different map to simplify\n      // the creating and destroying per route\n      if (route.component) {\n        let type = route.component\n        if (isComponentConstructor(type)) {\n          if (!routerConfig.get('lazyCreate')) {\n            type = createComponent(stage, type)\n            pagesHost.a(type)\n          }\n        }\n        components.set(path, type)\n      }\n    } else {\n      console.error(`${path} already exists in routes configuration`)\n    }\n  })\n}\n\nconst init = config => {\n  rootHash = config.root\n  if (isFunction(config.boot)) {\n    bootRequest = config.boot\n  }\n  if (isBoolean(config.updateHash)) {\n    updateHash = config.updateHash\n  }\n  if (isFunction(config.beforeEachRoute)) {\n    beforeEachRoute = config.beforeEachRoute\n  }\n  if (isFunction(config.afterEachRoute)) {\n    afterEachRoute = config.afterEachRoute\n  }\n  if (config.bootComponent) {\n    console.warn(\n      '[Router]: Boot Component is now available as a special router: https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration?id=special-routes'\n    )\n    console.warn(\n      '[Router]: setting { bootComponent } property will be deprecated in a future release'\n    )\n    if (isPage(config.bootComponent)) {\n      config.routes.push({\n        path: '$',\n        component: config.bootComponent,\n        // we try to assign the bootRequest as after data-provider\n        // so it will behave as any other component\n        after: bootRequest || null,\n        options: {\n          preventStorage: true,\n        },\n      })\n    } else {\n      console.error(`[Router]: ${config.bootComponent} is not a valid boot component`)\n    }\n  }\n  initialised = true\n}\n\nexport const storeComponent = (route, type) => {\n  if (components.has(route)) {\n    components.set(route, type)\n  }\n}\n\nexport const getComponent = route => {\n  if (components.has(route)) {\n    return components.get(route)\n  }\n  return null\n}\n/**\n * Test if router needs to update browser location hash\n * @returns {boolean}\n */\nexport const mustUpdateLocationHash = () => {\n  if (!routerConfig || !routerConfig.size) {\n    return false\n  }\n  // we need support to either turn change hash off\n  // per platform or per app\n  const updateConfig = routerConfig.get('updateHash')\n  return !((isBoolean(updateConfig) && !updateConfig) || (isBoolean(updateHash) && !updateHash))\n}\n\n/**\n * Will be called when a new navigate() request has completed\n * and has not been expired due to it's async nature\n * @param request\n */\nexport const onRequestResolved = request => {\n  const hash = request.hash\n  const route = request.route\n  const register = request.register\n  const page = request.page\n\n  // clean up history if modifier is set\n  if (getOption(route.options, 'clearHistory')) {\n    setHistory([])\n  } else if (hash && !isWildcard.test(route.path)) {\n    updateHistory(request)\n  }\n\n  // we only update the stackLocation if a route\n  // is not expired before it resolves\n  storeComponent(route.path, page)\n\n  if (request.isSharedInstance || !request.isCreated) {\n    emit(page, 'changed')\n  } else if (request.isCreated) {\n    emit(page, 'mounted')\n  }\n\n  // only update widgets if we have a host\n  if (widgetsHost) {\n    updateWidgets(route.widgets, page)\n  }\n\n  // we want to clean up if there is an\n  // active page that is not being shared\n  // between current and previous route\n  if (getActivePage() && !request.isSharedInstance) {\n    cleanUp(activePage, request)\n  }\n\n  // provide history object to active page\n  if (register.get(symbols.historyState) && isFunction(page.historyState)) {\n    page.historyState(register.get(symbols.historyState))\n  }\n\n  setActivePage(page)\n\n  activeHash = request.hash\n  activeRoute = route.path\n\n  // cleanup all cancelled requests\n  for (let request of navigateQueue.values()) {\n    if (request.isCancelled && request.hash) {\n      navigateQueue.delete(request.hash)\n    }\n  }\n\n  afterEachRoute(request)\n\n  Log.info('[route]:', route.path)\n  Log.info('[hash]:', hash)\n}\n\nconst cleanUp = (page, request) => {\n  const route = activeRoute\n  const register = request.register\n  const lazyDestroy = routerConfig.get('lazyDestroy')\n  const destroyOnBack = routerConfig.get('destroyOnHistoryBack')\n  const keepAlive = register.get('keepAlive')\n  const isFromHistory = register.get(symbols.backtrack)\n\n  let doCleanup = false\n\n  // if this request is executed due to a step back in history\n  // and we have configured to destroy active page when we go back\n  // in history or lazyDestory is enabled\n  if (isFromHistory && (destroyOnBack || lazyDestroy)) {\n    doCleanup = true\n  }\n\n  // clean up if lazyDestroy is enabled and the keepAlive flag\n  // in navigation register is false\n  if (lazyDestroy && !keepAlive) {\n    doCleanup = true\n  }\n\n  // if the current and new request share the same route blueprint\n  if (activeRoute === request.route.path) {\n    doCleanup = true\n  }\n\n  if (doCleanup) {\n    // grab original class constructor if\n    // statemachine routed else store constructor\n    storeComponent(route, page._routedType || page.constructor)\n\n    // actual remove of page from memory\n    pagesHost.remove(page)\n\n    // force texture gc() if configured\n    // so we can cleanup textures in the same tick\n    if (routerConfig.get('gcOnUnload')) {\n      stage.gc()\n    }\n  } else {\n    // If we're not removing the page we need to\n    // reset it's properties\n    page.patch({\n      x: 0,\n      y: 0,\n      scale: 1,\n      alpha: 1,\n      visible: false,\n    })\n  }\n}\n\nexport const getActiveHash = () => {\n  return activeHash\n}\n\nexport const setActiveHash = hash => {\n  activeHash = hash\n}\n\nexport const setActivePage = page => {\n  activePage = page\n}\n\nexport const getActivePage = () => {\n  return activePage\n}\n\nexport const getActiveRoute = () => {\n  return activeRoute\n}\n\nexport const getLastHash = () => {\n  return lastAcceptedHash\n}\n\nexport const setLastHash = hash => {\n  lastAcceptedHash = hash\n}\n\nexport const setPreviousState = state => {\n  previousState = state\n}\n\nexport const getPreviousState = () => {\n  return previousState\n}\n\nexport const routeExists = key => {\n  return routes.has(key)\n}\n\nexport const getRootHash = () => {\n  return rootHash\n}\n\nexport const getBootRequest = () => {\n  return bootRequest\n}\n\nexport const getRouterConfig = () => {\n  return routerConfig\n}\n\nexport const getRoutes = () => {\n  return routes\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../../Lightning'\nimport Settings from '../../Settings'\nimport { getActiveHash } from './router'\nimport { getResumeHash } from '../index'\n\nexport const isFunction = v => {\n  return typeof v === 'function'\n}\n\nexport const isObject = v => {\n  return typeof v === 'object' && v !== null\n}\n\nexport const isBoolean = v => {\n  return typeof v === 'boolean'\n}\n\nexport const isPage = v => {\n  if (v instanceof Lightning.Element || isComponentConstructor(v)) {\n    return true\n  }\n  return false\n}\n\nexport const isComponentConstructor = type => {\n  return type.prototype && 'isComponent' in type.prototype\n}\n\nexport const isArray = v => {\n  return Array.isArray(v)\n}\n\nexport const ucfirst = v => {\n  return `${v.charAt(0).toUpperCase()}${v.slice(1)}`\n}\n\nexport const isString = v => {\n  return typeof v === 'string'\n}\n\nexport const isPromise = method => {\n  let result\n  if (isFunction(method)) {\n    try {\n      result = method.apply(null)\n    } catch (e) {\n      result = e\n    }\n  } else {\n    result = method\n  }\n  return isObject(result) && isFunction(result.then)\n}\n\nexport const cleanHash = (hash = '') => {\n  return hash.replace(/^#/, '').replace(/\\/+$/, '')\n}\n\nexport const getConfigMap = () => {\n  const routerSettings = Settings.get('platform', 'router')\n  const isObj = isObject(routerSettings)\n  return [\n    'backtrack',\n    'gcOnUnload',\n    'destroyOnHistoryBack',\n    'lazyCreate',\n    'lazyDestroy',\n    'reuseInstance',\n    'autoRestoreRemote',\n    'numberNavigation',\n    'updateHash',\n    'storeSameHash',\n  ].reduce((config, key) => {\n    config.set(key, isObj ? routerSettings[key] : Settings.get('platform', key))\n    return config\n  }, new Map())\n}\n\nexport const incorrectParams = (cb, route) => {\n  const isIncorrect = /^\\w*?\\s?\\(\\s?\\{.*?\\}\\s?\\)/i\n  if (isIncorrect.test(cb.toString())) {\n    console.warn(\n      [\n        `DEPRECATION: The data-provider for route: ${route} is not correct.`,\n        '\"page\" is no longer a property of the params object but is now the first function parameter: ',\n        'https://github.com/rdkcentral/Lightning-SDK/blob/feature/router/docs/plugins/router/dataproviding.md#data-providing',\n        \"It's supported for now but will be removed in a future release.\",\n      ].join('\\n')\n    )\n    return true\n  }\n  return false\n}\n\nexport const getQueryStringParams = (hash = getActiveHash()) => {\n  const resumeHash = getResumeHash()\n  if ((hash === '$' || !hash) && resumeHash) {\n    if (isString(resumeHash)) {\n      hash = resumeHash\n    }\n  }\n\n  let parse = ''\n  const getQuery = /([?&].*)/\n  const matches = getQuery.exec(hash)\n  const params = {}\n\n  if (document.location && document.location.search) {\n    parse = document.location.search\n  }\n\n  if (matches && matches.length) {\n    let hashParams = matches[1]\n    if (parse) {\n      // if location.search is not empty we\n      // remove the leading ? to create a\n      // valid string\n      hashParams = hashParams.replace(/^\\?/, '')\n      // we parse hash params last so they we can always\n      // override search params with hash params\n      parse = `${parse}&${hashParams}`\n    } else {\n      parse = hashParams\n    }\n  }\n\n  if (parse) {\n    const urlParams = new URLSearchParams(parse)\n    for (const [key, value] of urlParams.entries()) {\n      params[key] = value\n    }\n    return params\n  } else {\n    return false\n  }\n}\n\nexport const objectToQueryString = obj => {\n  if (!isObject(obj)) {\n    return ''\n  }\n  return (\n    '?' +\n    Object.keys(obj)\n      .map(key => {\n        return `${key}=${obj[key]}`\n      })\n      .join('&')\n  )\n}\n\nexport const symbols = {\n  route: Symbol('route'),\n  hash: Symbol('hash'),\n  store: Symbol('store'),\n  fromHistory: Symbol('fromHistory'),\n  expires: Symbol('expires'),\n  resume: Symbol('resume'),\n  backtrack: Symbol('backtrack'),\n  historyState: Symbol('historyState'),\n  queryParams: Symbol('queryParams'),\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { symbols, getQueryStringParams } from './helpers'\nimport { app, routes, routeExists } from './router'\nimport { getValuesFromHash } from './route'\nimport emit from './emit'\n\nexport let previousState\n\nexport const dataHooks = {\n  on: request => {\n    previousState = app.state || ''\n    app._setState('Loading')\n    return execProvider(request)\n  },\n  before: request => {\n    return execProvider(request)\n  },\n  after: request => {\n    try {\n      execProvider(request, true)\n    } catch (e) {\n      // for now we fail silently\n    }\n    return Promise.resolve()\n  },\n}\n\nconst execProvider = (request, emitProvided) => {\n  const route = request.route\n  const provider = route.provider\n  const expires = route.cache ? route.cache * 1000 : 0\n  const params = addPersistData(request)\n  return provider.request(request.page, { ...params }).then(() => {\n    request.page[symbols.expires] = Date.now() + expires\n    if (emitProvided) {\n      emit(request.page, 'dataProvided')\n    }\n  })\n}\n\nexport const addPersistData = ({ page, route, hash, register = new Map() }) => {\n  const urlValues = getValuesFromHash(hash, route.path)\n  const queryParams = getQueryStringParams(hash)\n  const pageData = new Map([...urlValues, ...register])\n  const params = {}\n\n  // make dynamic url data available to the page\n  // as instance properties\n  for (let [name, value] of pageData) {\n    params[name] = value\n  }\n\n  if (queryParams) {\n    params[symbols.queryParams] = queryParams\n  }\n\n  // check navigation register for persistent data\n  if (register.size) {\n    const obj = {}\n    for (let [k, v] of register) {\n      obj[k] = v\n    }\n    page.persist = obj\n  }\n\n  // make url data and persist data available\n  // via params property\n  page.params = params\n  emit(page, ['urlParams'], params)\n\n  return params\n}\n\n/**\n * Test if page passed cache-time\n * @param page\n * @returns {boolean}\n */\nexport const isPageExpired = page => {\n  if (!page[symbols.expires]) {\n    return false\n  }\n\n  const expires = page[symbols.expires]\n  const now = Date.now()\n\n  return now >= expires\n}\n\nexport const hasProvider = path => {\n  if (routeExists(path)) {\n    const record = routes.get(path)\n    return !!record.provider\n  }\n  return false\n}\n\nexport const getProvider = route => {\n  // @todo: fix, route already is passed in\n  if (routeExists(route.path)) {\n    const { provider } = routes.get(route.path)\n    return {\n      type: provider.type,\n      provider: provider.request,\n    }\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst fade = (i, o) => {\n  return new Promise(resolve => {\n    i.patch({\n      alpha: 0,\n      visible: true,\n      smooth: {\n        alpha: [1, { duration: 0.5, delay: 0.1 }],\n      },\n    })\n    // resolve on y finish\n    i.transition('alpha').on('finish', () => {\n      if (o) {\n        o.visible = false\n      }\n      resolve()\n    })\n  })\n}\n\nconst crossFade = (i, o) => {\n  return new Promise(resolve => {\n    i.patch({\n      alpha: 0,\n      visible: true,\n      smooth: {\n        alpha: [1, { duration: 0.5, delay: 0.1 }],\n      },\n    })\n    if (o) {\n      o.patch({\n        smooth: {\n          alpha: [0, { duration: 0.5, delay: 0.3 }],\n        },\n      })\n    }\n    // resolve on y finish\n    i.transition('alpha').on('finish', () => {\n      resolve()\n    })\n  })\n}\n\nconst moveOnAxes = (axis, direction, i, o) => {\n  const bounds = axis === 'x' ? 1920 : 1080\n  return new Promise(resolve => {\n    i.patch({\n      [`${axis}`]: direction ? bounds * -1 : bounds,\n      visible: true,\n      smooth: {\n        [`${axis}`]: [0, { duration: 0.4, delay: 0.2 }],\n      },\n    })\n    // out is optional\n    if (o) {\n      o.patch({\n        [`${axis}`]: 0,\n        smooth: {\n          [`${axis}`]: [direction ? bounds : bounds * -1, { duration: 0.4, delay: 0.2 }],\n        },\n      })\n    }\n    // resolve on y finish\n    i.transition(axis).on('finish', () => {\n      resolve()\n    })\n  })\n}\n\nconst up = (i, o) => {\n  return moveOnAxes('y', 0, i, o)\n}\n\nconst down = (i, o) => {\n  return moveOnAxes('y', 1, i, o)\n}\n\nconst left = (i, o) => {\n  return moveOnAxes('x', 0, i, o)\n}\n\nconst right = (i, o) => {\n  return moveOnAxes('x', 1, i, o)\n}\n\nexport default {\n  fade,\n  crossFade,\n  up,\n  down,\n  left,\n  right,\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getRouterConfig } from './router'\nimport { isPromise, isString } from './helpers'\nimport Transitions from '../transitions'\n\n/**\n * execute transition between new / old page and\n * toggle the defined widgets\n * @todo: platform override default transition\n * @param pageIn\n * @param pageOut\n */\nexport const executeTransition = (pageIn, pageOut = null) => {\n  const transition = pageIn.pageTransition || pageIn.easing\n  const hasCustomTransitions = !!(pageIn.smoothIn || pageIn.smoothInOut || transition)\n  const transitionsDisabled = getRouterConfig().get('disableTransitions')\n\n  if (pageIn.easing) {\n    console.warn('easing() method is deprecated and will be removed. Use pageTransition()')\n  }\n\n  // default behaviour is a visibility toggle\n  if (!hasCustomTransitions || transitionsDisabled) {\n    pageIn.visible = true\n    if (pageOut) {\n      pageOut.visible = false\n    }\n    return Promise.resolve()\n  }\n\n  if (transition) {\n    let type\n    try {\n      type = transition.call(pageIn, pageIn, pageOut)\n    } catch (e) {\n      type = 'crossFade'\n    }\n\n    if (isPromise(type)) {\n      return type\n    }\n\n    if (isString(type)) {\n      const fn = Transitions[type]\n      if (fn) {\n        return fn(pageIn, pageOut)\n      }\n    }\n\n    // keep backwards compatible for now\n    if (pageIn.smoothIn) {\n      // provide a smooth function that resolves itself\n      // on transition finish\n      const smooth = (p, v, args = {}) => {\n        return new Promise(resolve => {\n          pageIn.visible = true\n          pageIn.setSmooth(p, v, args)\n          pageIn.transition(p).on('finish', () => {\n            resolve()\n          })\n        })\n      }\n      return pageIn.smoothIn({ pageIn, smooth })\n    }\n  }\n  return Transitions.crossFade(pageIn, pageOut)\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  app,\n  getComponent,\n  onRequestResolved,\n  getLastHash,\n  pagesHost,\n  stage,\n  getPreviousState,\n  getActivePage,\n  routerConfig,\n  routeExists,\n} from './router'\n\nimport Log from '../../Log'\nimport { isBoolean, isComponentConstructor, isFunction, symbols } from './helpers'\nimport { getProvider, hasProvider, isPageExpired, dataHooks, addPersistData } from './provider'\nimport { createComponent } from './components'\nimport { executeTransition } from './transition'\nimport { getActiveWidget } from './widgets'\nimport emit from './emit'\nimport { getOption } from './route'\nimport { navigate } from '../index'\nimport { setHistory, updateHistory } from './history'\nimport { isWildcard } from './regex'\n\n/**\n * The actual loading of the component\n * */\nexport const load = async request => {\n  let expired = false\n  try {\n    request = await loader(request)\n    if (request && !request.isCancelled) {\n      // in case of on() providing we need to reset\n      // app state;\n      if (app.state === 'Loading') {\n        if (getPreviousState() === 'Widgets') {\n          app._setState('Widgets', [getActiveWidget()])\n        } else {\n          app._setState('')\n        }\n      }\n      // Do page transition if instance\n      // is not shared between the routes\n      if (!request.isSharedInstance && !request.isCancelled) {\n        await executeTransition(request.page, getActivePage())\n      }\n    } else {\n      expired = true\n    }\n    // on expired we only cleanup\n    if (expired || request.isCancelled) {\n      Log.debug('[router]:', `Rejected ${request.hash} because route to ${getLastHash()} started`)\n      if (request.isCreated && !request.isSharedInstance) {\n        // remove from render-tree\n        pagesHost.remove(request.page)\n      }\n    } else {\n      onRequestResolved(request)\n      // resolve promise\n      return request.page\n    }\n  } catch (request) {\n    if (!request.route) {\n      console.error(request)\n    } else if (!expired) {\n      // @todo: revisit\n      const { route } = request\n      // clean up history if modifier is set\n      if (getOption(route.options, 'clearHistory')) {\n        setHistory([])\n      } else if (!isWildcard.test(route.path)) {\n        updateHistory(request)\n      }\n\n      if (request.isCreated && !request.isSharedInstance) {\n        // remove from render-tree\n        pagesHost.remove(request.page)\n      }\n      handleError(request)\n    }\n  }\n}\n\nconst loader = async request => {\n  const route = request.route\n  const hash = request.hash\n  const register = request.register\n\n  // todo: grab from Route instance\n  let type = getComponent(route.path)\n  let isConstruct = isComponentConstructor(type)\n  let provide = false\n\n  // if it's an instance bt we're not coming back from\n  // history we test if we can re-use this instance\n  if (!isConstruct && !register.get(symbols.backtrack)) {\n    if (!mustReuse(route)) {\n      type = type.constructor\n      isConstruct = true\n    }\n  }\n\n  // If page is Lightning Component instance\n  if (!isConstruct) {\n    request.page = type\n    // if we have have a data route for current page\n    if (hasProvider(route.path)) {\n      if (isPageExpired(type) || type[symbols.hash] !== hash) {\n        provide = true\n      }\n    }\n    let currentRoute = getActivePage() && getActivePage()[symbols.route]\n    // if the new route is equal to the current route it means that both\n    // route share the Component instance and stack location / since this case\n    // is conflicting with the way before() and after() loading works we flag it,\n    // and check platform settings in we want to re-use instance\n    if (route.path === currentRoute) {\n      request.isSharedInstance = true\n      // since we're re-using the instance we must attach\n      // historyState to the request to prevent it from\n      // being overridden.\n      if (isFunction(request.page.historyState)) {\n        request.copiedHistoryState = request.page.historyState()\n      }\n    }\n  } else {\n    request.page = createComponent(stage, type)\n    pagesHost.a(request.page)\n    // test if need to request data provider\n    if (hasProvider(route.path)) {\n      provide = true\n    }\n    request.isCreated = true\n  }\n\n  // we store hash and route as properties on the page instance\n  // that way we can easily calculate new behaviour on page reload\n  request.page[symbols.hash] = hash\n  request.page[symbols.route] = route.path\n\n  try {\n    if (provide) {\n      // extract attached data-provider for route\n      // we're processing\n      const { type: loadType, provider } = getProvider(route)\n\n      // update running request\n      request.provider = provider\n      request.providerType = loadType\n\n      await dataHooks[loadType](request)\n\n      // we early exit if the current request is expired\n      if (hash !== getLastHash()) {\n        return false\n      } else {\n        if (request.providerType !== 'after') {\n          emit(request.page, 'dataProvided')\n        }\n        // resolve promise\n        return request\n      }\n    } else {\n      addPersistData(request)\n      return request\n    }\n  } catch (e) {\n    request.error = e\n    return Promise.reject(request)\n  }\n}\n\nconst handleError = request => {\n  if (request && request.error) {\n    console.error(request.error)\n  } else if (request) {\n    Log.error(request)\n  }\n\n  if (request.page && routeExists('!')) {\n    navigate('!', { request }, false)\n  }\n}\n\nexport const mustReuse = route => {\n  const opt = getOption(route.options, 'reuseInstance')\n  const config = routerConfig.get('reuseInstance')\n\n  // route always has final decision\n  if (isBoolean(opt)) {\n    return opt\n  }\n  return !(isBoolean(config) && config === false)\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport { default as Router } from './index'\nimport { routerConfig } from './utils/router.js'\nimport { isBoolean } from './utils/helpers'\n\nexport class RoutedApp extends Lightning.Component {\n  static _template() {\n    return {\n      Pages: {\n        forceZIndexContext: true,\n      },\n      /**\n       * This is a default Loading page that will be made visible\n       * during data-provider on() you CAN override in child-class\n       */\n      Loading: {\n        rect: true,\n        w: 1920,\n        h: 1080,\n        color: 0xff000000,\n        visible: false,\n        zIndex: 99,\n        Label: {\n          mount: 0.5,\n          x: 960,\n          y: 540,\n          text: {\n            text: 'Loading..',\n          },\n        },\n      },\n    }\n  }\n\n  static _states() {\n    return [\n      class Loading extends this {\n        $enter() {\n          this.tag('Loading').visible = true\n        }\n\n        $exit() {\n          this.tag('Loading').visible = false\n        }\n      },\n      class Widgets extends this {\n        $enter(args, widget) {\n          // store widget reference\n          this._widget = widget\n\n          // since it's possible that this behaviour\n          // is non-remote driven we force a recalculation\n          // of the focuspath\n          this._refocus()\n        }\n\n        _getFocused() {\n          // we delegate focus to selected widget\n          // so it can consume remotecontrol presses\n          return this._widget\n        }\n\n        // if we want to widget to widget focus delegation\n        reload(widget) {\n          this._widget = widget\n          this._refocus()\n        }\n\n        _handleKey() {\n          const restoreFocus = routerConfig.get('autoRestoreRemote')\n          /**\n           * The Router used to delegate focus back to the page instance on\n           * every unhandled key. This is barely usefull in any situation\n           * so for now we offer the option to explicity turn that behaviour off\n           * so we don't don't introduce a breaking change.\n           */\n          if (!isBoolean(restoreFocus) || restoreFocus === true) {\n            Router.focusPage()\n          }\n        }\n      },\n    ]\n  }\n\n  /**\n   * Return location where pages need to be stored\n   */\n  get pages() {\n    return this.tag('Pages')\n  }\n\n  /**\n   * Tell router where widgets are stored\n   */\n  get widgets() {\n    return this.tag('Widgets')\n  }\n\n  /**\n   * we MUST register _handleBack method so the Router\n   * can override it\n   * @private\n   */\n  _handleBack() {}\n\n  /**\n   * We MUST return Router.activePage() so the new Page\n   * can listen to the remote-control.\n   */\n  _getFocused() {\n    return Router.getActivePage()\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  isFunction,\n  isPage,\n  isObject,\n  isBoolean,\n  isString,\n  getQueryStringParams,\n  symbols,\n  cleanHash,\n} from './utils/helpers'\n\nimport {\n  bootRouter,\n  routeExists,\n  getRootHash,\n  getBootRequest,\n  mustUpdateLocationHash,\n  getComponent,\n  storeComponent,\n  stage,\n  app,\n  routerConfig,\n  setLastHash,\n  getActivePage,\n  beforeEachRoute,\n  getActiveHash,\n  getActiveRoute,\n} from './utils/router'\n\nimport { focusWidget, getActiveWidget, restoreFocus } from './utils/widgets'\nimport { getHistory, setHistory, getHistoryState, replaceHistoryState } from './utils/history'\nimport {\n  createRequest,\n  getRouteByHash,\n  getValuesFromHash,\n  getFloor,\n  getHashByName,\n  keepActivePageAlive,\n} from './utils/route'\nimport { load } from './utils/loader'\nimport { stripRegex, isWildcard } from './utils/regex'\nimport { RoutedApp } from './base'\nimport Registry from '../Registry'\n\n/*\nrouThor ==[x]\n */\nexport let navigateQueue = new Map()\nlet forcedHash = ''\nlet resumeHash = ''\n\n/**\n * Start routing the app\n * @param config - route config object\n * @param instance - instance of the app\n */\nconst startRouter = (config, instance) => {\n  bootRouter(config, instance)\n  registerListener()\n  start()\n}\n\n// start translating url\nconst start = () => {\n  let hash = (getHash() || '').replace(/^#/, '')\n  const bootKey = '$'\n  const params = getQueryStringParams(hash)\n  const bootRequest = getBootRequest()\n  const rootHash = getRootHash()\n  const isDirectLoad = hash.indexOf(bootKey) !== -1\n\n  // prevent direct reload of wildcard routes\n  // expect bootComponent\n  if (isWildcard.test(hash) && hash !== bootKey) {\n    hash = ''\n  }\n\n  // store resume point for manual resume\n  resumeHash = isDirectLoad ? rootHash : hash || rootHash\n\n  const ready = () => {\n    if (!hash && rootHash) {\n      if (isString(rootHash)) {\n        navigate(rootHash)\n      } else if (isFunction(rootHash)) {\n        rootHash().then(res => {\n          if (isObject(res)) {\n            navigate(res.path, res.params)\n          } else {\n            navigate(res)\n          }\n        })\n      }\n    } else {\n      queue(hash)\n      handleHashChange()\n        .then(() => {\n          app._refocus()\n        })\n        .catch(e => {\n          console.error(e)\n        })\n    }\n  }\n\n  if (routeExists(bootKey)) {\n    if (hash && !isDirectLoad) {\n      if (!getRouteByHash(hash)) {\n        navigate('*', { failedHash: hash })\n        return\n      }\n    }\n    navigate(\n      bootKey,\n      {\n        resume: resumeHash,\n        reload: bootKey === hash,\n      },\n      false\n    )\n  } else if (isFunction(bootRequest)) {\n    bootRequest(params)\n      .then(() => {\n        ready()\n      })\n      .catch(e => {\n        handleBootError(e)\n      })\n  } else {\n    ready()\n  }\n}\n\nconst handleBootError = e => {\n  if (routeExists('!')) {\n    navigate('!', { request: { error: e } })\n  } else {\n    console.error(e)\n  }\n}\n\n/**\n * start a new request\n * @param url\n * @param args\n * @param store\n */\nexport const navigate = (url, args = {}, store) => {\n  if (isObject(url)) {\n    url = getHashByName(url)\n    if (!url) {\n      return\n    }\n  }\n\n  let hash = getHash()\n  if (!mustUpdateLocationHash() && forcedHash) {\n    hash = forcedHash\n  }\n  if (hash.replace(/^#/, '') !== url) {\n    // push request in the queue\n    queue(url, args, store)\n\n    setHash(url)\n    if (!mustUpdateLocationHash()) {\n      forcedHash = url\n      handleHashChange(url)\n        .then(() => {\n          app._refocus()\n        })\n        .catch(e => {\n          console.error(e)\n        })\n    }\n  } else if (args.reload) {\n    // push request in the queue\n    queue(url, args, store)\n\n    handleHashChange(url)\n      .then(() => {\n        app._refocus()\n      })\n      .catch(e => {\n        console.error(e)\n      })\n  }\n}\n\nconst queue = (hash, args = {}, store) => {\n  hash = cleanHash(hash)\n  if (!navigateQueue.has(hash)) {\n    for (let request of navigateQueue.values()) {\n      request.cancel()\n    }\n    const request = createRequest(hash, args, store)\n    navigateQueue.set(decodeURIComponent(hash), request)\n\n    return request\n  }\n  return false\n}\n\n/**\n * Handle change of hash\n * @param override\n * @returns {Promise<void>}\n */\nconst handleHashChange = async override => {\n  const hash = cleanHash(override || getHash())\n  const queueId = decodeURIComponent(hash)\n  let request = navigateQueue.get(queueId)\n\n  // handle hash updated manually\n  if (!request && !navigateQueue.size) {\n    request = queue(hash)\n  }\n\n  const route = getRouteByHash(hash)\n\n  if (!route) {\n    if (routeExists('*')) {\n      navigate('*', { failedHash: hash })\n    } else {\n      console.error(`Unable to navigate to: ${hash}`)\n    }\n    return\n  }\n\n  // update current processed request\n  request.hash = hash\n  request.route = route\n\n  let result = await beforeEachRoute(getActiveHash(), request)\n\n  // test if a local hook is configured for the route\n  if (route.beforeNavigate) {\n    result = await route.beforeNavigate(getActiveHash(), request)\n  }\n\n  if (isBoolean(result)) {\n    // only if resolve value is explicitly true\n    // we continue the current route request\n    if (result) {\n      return resolveHashChange(request)\n    }\n  } else {\n    // if navigation guard didn't return true\n    // we cancel the current request\n    request.cancel()\n    navigateQueue.delete(queueId)\n\n    if (isString(result)) {\n      navigate(result)\n    } else if (isObject(result)) {\n      let store = true\n      if (isBoolean(result.store)) {\n        store = result.store\n      }\n      navigate(result.path, result.params, store)\n    }\n  }\n}\n\n/**\n * Continue processing the hash change if not blocked\n * by global or local hook\n * @param request - {}\n */\nconst resolveHashChange = request => {\n  const hash = request.hash\n  const route = request.route\n  const queueId = decodeURIComponent(hash)\n  // store last requested hash so we can\n  // prevent a route that resolved later\n  // from displaying itself\n  setLastHash(hash)\n\n  if (route.path) {\n    const component = getComponent(route.path)\n    // if a hook is provided for the current route\n    if (isFunction(route.hook)) {\n      const urlParams = getValuesFromHash(hash, route.path)\n      const params = {}\n      for (const key of urlParams.keys()) {\n        params[key] = urlParams.get(key)\n      }\n      route.hook(app, { ...params })\n    }\n    // if there is a component attached to the route\n    if (component) {\n      // force page to root state to prevent shared state issues\n      const activePage = getActivePage()\n      if (activePage) {\n        const keepAlive = keepActivePageAlive(getActiveRoute(), request)\n        if (activePage && route.path === getActiveRoute() && !keepAlive) {\n          activePage._setState('')\n        }\n      }\n\n      if (isPage(component, stage)) {\n        load(request).then(() => {\n          app._refocus()\n          navigateQueue.delete(queueId)\n        })\n      } else {\n        // of the component is not a constructor\n        // or a Component instance we can assume\n        // that it's a dynamic import\n        component()\n          .then(contents => {\n            return contents.default\n          })\n          .then(module => {\n            storeComponent(route.path, module)\n            return load(request)\n          })\n          .then(() => {\n            app._refocus()\n            navigateQueue.delete(queueId)\n          })\n      }\n    } else {\n      navigateQueue.delete(queueId)\n    }\n  }\n}\n\n/**\n * Directional step in history\n * @param direction\n */\nexport const step = (level = 0) => {\n  if (!level || isNaN(level)) {\n    return false\n  }\n  const history = getHistory()\n  // for now we only support negative numbers\n  level = Math.abs(level)\n\n  // we can't step back past the amount\n  // of history entries\n  if (level > history.length) {\n    if (isFunction(app._handleAppClose)) {\n      return app._handleAppClose()\n    }\n    return false\n  } else if (history.length) {\n    // for now we only support history back\n    const route = history.splice(history.length - level, level)[0]\n    // store changed history\n    setHistory(history)\n    return navigate(\n      route.hash,\n      {\n        [symbols.backtrack]: true,\n        [symbols.historyState]: route.state,\n      },\n      false\n    )\n  } else if (routerConfig.get('backtrack')) {\n    const hashLastPart = /(\\/:?[\\w%\\s-]+)$/\n    let hash = stripRegex(getHash())\n    let floor = getFloor(hash)\n\n    // test if we got deep-linked\n    if (floor > 1) {\n      while (floor--) {\n        // strip of last part\n        hash = hash.replace(hashLastPart, '')\n        // if we have a configured route\n        // we navigate to it\n        if (getRouteByHash(hash)) {\n          return navigate(hash, { [symbols.backtrack]: true }, false)\n        }\n      }\n    }\n  }\n  return false\n}\n\n/**\n * Resume Router's page loading process after\n * the BootComponent became visible;\n */\nconst resume = () => {\n  if (isString(resumeHash)) {\n    navigate(resumeHash, false)\n    resumeHash = ''\n  } else if (isFunction(resumeHash)) {\n    resumeHash().then(res => {\n      resumeHash = ''\n      if (isObject(res)) {\n        navigate(res.path, res.params)\n      } else {\n        navigate(res)\n      }\n    })\n  } else {\n    console.warn('[Router]: resume() called but no hash found')\n  }\n}\n\n/**\n * Force reload active hash\n */\nconst reload = () => {\n  if (!isNavigating()) {\n    const hash = getActiveHash()\n    navigate(hash, { reload: true }, false)\n  }\n}\n\n/**\n * Query if the Router is still processing a Request\n * @returns {boolean}\n */\nconst isNavigating = () => {\n  if (navigateQueue.size) {\n    let isProcessing = false\n    for (let request of navigateQueue.values()) {\n      if (!request.isCancelled) {\n        isProcessing = true\n      }\n    }\n    return isProcessing\n  }\n  return false\n}\n\nexport const getResumeHash = () => {\n  return resumeHash\n}\n\n/**\n * By default we return the location hash\n * @returns {string}\n */\nlet getHash = () => {\n  return document.location.hash\n}\n\n/**\n * Update location hash\n * @param url\n */\nlet setHash = url => {\n  document.location.hash = url\n}\n\n/**\n * This can be called from the platform / bootstrapper to override\n * the default getting and setting of the hash\n * @param config\n */\nexport const initRouter = config => {\n  if (config.getHash) {\n    getHash = config.getHash\n  }\n  if (config.setHash) {\n    setHash = config.setHash\n  }\n}\n\n/**\n * On hash change we start processing\n */\nconst registerListener = () => {\n  Registry.addEventListener(window, 'hashchange', async () => {\n    if (mustUpdateLocationHash()) {\n      try {\n        await handleHashChange()\n      } catch (e) {\n        console.error(e)\n      }\n    }\n  })\n}\n\n/**\n * Navigate to root hash\n */\nconst root = () => {\n  const rootHash = getRootHash()\n  if (isString(rootHash)) {\n    navigate(rootHash)\n  } else if (isFunction(rootHash)) {\n    rootHash().then(res => {\n      if (isObject(res)) {\n        navigate(res.path, res.params)\n      } else {\n        navigate(res)\n      }\n    })\n  }\n}\n\n// export API\nexport default {\n  startRouter,\n  navigate,\n  resume,\n  step,\n  go: step,\n  back: step.bind(null, -1),\n  activePage: getActivePage,\n  getActivePage() {\n    // warning\n    return getActivePage()\n  },\n  getActiveRoute,\n  getActiveHash,\n  focusWidget,\n  getActiveWidget,\n  restoreFocus,\n  isNavigating,\n  getHistory,\n  setHistory,\n  getHistoryState,\n  replaceHistoryState,\n  getQueryStringParams,\n  reload,\n  symbols,\n  App: RoutedApp,\n  // keep backwards compatible\n  focusPage: restoreFocus,\n  root: root,\n  /**\n   * Deprecated api methods\n   */\n  setupRoutes() {\n    console.warn('Router: setupRoutes is deprecated, consolidate your configuration')\n    console.warn('https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration')\n  },\n  on() {\n    console.warn('Router.on() is deprecated, consolidate your configuration')\n    console.warn('https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration')\n  },\n  before() {\n    console.warn('Router.before() is deprecated, consolidate your configuration')\n    console.warn('https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration')\n  },\n  after() {\n    console.warn('Router.after() is deprecated, consolidate your configuration')\n    console.warn('https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration')\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\n\nconst defaultChannels = [\n  {\n    number: 1,\n    name: 'Metro News 1',\n    description: 'New York Cable News Channel',\n    entitled: true,\n    program: {\n      title: 'The Morning Show',\n      description: \"New York's best morning show\",\n      startTime: new Date(new Date() - 60 * 5 * 1000).toUTCString(), // started 5 minutes ago\n      duration: 60 * 30, // 30 minutes\n      ageRating: 0,\n    },\n  },\n  {\n    number: 2,\n    name: 'MTV',\n    description: 'Music Television',\n    entitled: true,\n    program: {\n      title: 'Beavis and Butthead',\n      description: 'American adult animated sitcom created by Mike Judge',\n      startTime: new Date(new Date() - 60 * 20 * 1000).toUTCString(), // started 20 minutes ago\n      duration: 60 * 45, // 45 minutes\n      ageRating: 18,\n    },\n  },\n  {\n    number: 3,\n    name: 'NBC',\n    description: 'NBC TV Network',\n    entitled: false,\n    program: {\n      title: 'The Tonight Show Starring Jimmy Fallon',\n      description: 'Late-night talk show hosted by Jimmy Fallon on NBC',\n      startTime: new Date(new Date() - 60 * 10 * 1000).toUTCString(), // started 10 minutes ago\n      duration: 60 * 60, // 1 hour\n      ageRating: 10,\n    },\n  },\n]\n\nexport const channels = () => Settings.get('platform', 'tv', defaultChannels)\n\nexport const randomChannel = () => channels()[~~(channels.length * Math.random())]\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\n\nimport { channels, randomChannel } from './defaults'\n\nlet currentChannel\nconst callbacks = {}\n\nconst emit = (event, ...args) => {\n  callbacks[event] &&\n    callbacks[event].forEach(cb => {\n      cb.apply(null, args)\n    })\n}\n\n// local mock methods\nlet methods = {\n  getChannel() {\n    if (!currentChannel) currentChannel = randomChannel()\n    return new Promise((resolve, reject) => {\n      if (currentChannel) {\n        const channel = { ...currentChannel }\n        delete channel.program\n        resolve(channel)\n      } else {\n        reject('No channel found')\n      }\n    })\n  },\n  getProgram() {\n    if (!currentChannel) currentChannel = randomChannel()\n    return new Promise((resolve, reject) => {\n      currentChannel.program ? resolve(currentChannel.program) : reject('No program found')\n    })\n  },\n  setChannel(number) {\n    return new Promise((resolve, reject) => {\n      if (number) {\n        const newChannel = channels().find(c => c.number === number)\n        if (newChannel) {\n          currentChannel = newChannel\n          const channel = { ...currentChannel }\n          delete channel.program\n          emit('channelChange', channel)\n          resolve(channel)\n        } else {\n          reject('Channel not found')\n        }\n      } else {\n        reject('No channel number supplied')\n      }\n    })\n  },\n}\n\nexport const initTV = config => {\n  methods = {}\n  if (config.getChannel && typeof config.getChannel === 'function') {\n    methods.getChannel = config.getChannel\n  }\n  if (config.getProgram && typeof config.getProgram === 'function') {\n    methods.getProgram = config.getProgram\n  }\n  if (config.setChannel && typeof config.setChannel === 'function') {\n    methods.setChannel = config.setChannel\n  }\n  if (config.emit && typeof config.emit === 'function') {\n    config.emit(emit)\n  }\n}\n\n// public API\nexport default {\n  channel(number = null) {\n    return new Promise((resolve, reject) => {\n      try {\n        // call setChannel when number argument is passed, otherwise getChannel\n        methods[number ? 'setChannel' : 'getChannel'](number)\n          .then(channel => {\n            // to do: ensure consistent formatting of channel info here?\n            resolve(channel)\n          })\n          .catch(reject)\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n  program() {\n    return new Promise((resolve, reject) => {\n      try {\n        methods\n          .getProgram()\n          .then(program => {\n            // to do: ensure consistent formatting of program info here?\n            resolve(program)\n          })\n          .catch(reject)\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n  entitled() {\n    return new Promise((resolve, reject) => {\n      try {\n        methods\n          .getChannel()\n          .then(channel => {\n            'entitled' in channel ? resolve(!!channel.entitled) : reject()\n          })\n          .catch(reject)\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n  addEventListener(event, cb) {\n    if (typeof cb === 'function') {\n      callbacks[event] = callbacks[event] || []\n      callbacks[event].push(cb)\n    } else {\n      Log.error('Please provide a function as a callback')\n    }\n  },\n  removeEventListener(event, cb = false) {\n    if (callbacks[event] && callbacks[event].length) {\n      callbacks[event] = cb ? callbacks[event].filter(_cb => _cb === cb) : []\n    }\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Profile from '../Profile'\nimport Settings from '../Settings'\nimport sequence from '../helpers/sequence'\n\nlet cspUrl = 'http://payment-csp-example.metrological.com:8080/'\nlet billingUrl = 'https://payment-sdk.metrological.com/'\n\nlet cspEndpoints = {\n  assets: {\n    uri: '/assets',\n    method: 'GET',\n  },\n  asset: {\n    uri: '/assets/:id',\n    method: 'GET',\n  },\n  signature: {\n    uri: '/assets/:id/signature',\n    method: 'POST',\n  },\n  subscribe: {\n    uri: '/assets/:id/subscribe',\n    method: 'POST',\n  },\n  unsubscribe: {\n    uri: '/assets/:id/unsubscribe',\n    method: 'POST',\n  },\n}\n\nexport const initPurchase = config => {\n  if (config.billingUrl) billingUrl = config.billingUrl\n}\n\nconst createUrl = (uri, baseUrl, params = {}) => {\n  return new URL(\n    // sprinkle in the params\n    Object.keys(params)\n      .reduce((res, key) => res.replace(new RegExp(':' + key, 'g'), params[key]), uri)\n      // remove any leading slash from uri\n      .replace(/^\\//, ''),\n    // make sure baseUrl always has a trailing slash\n    /\\/$/.test(baseUrl) ? baseUrl : baseUrl.replace(/$/, '/')\n  )\n}\n\nconst request = (url, method = 'GET', data, headers = {}) => {\n  if (method === 'GET' && data) {\n    url.search = new URLSearchParams(data)\n  }\n\n  return new Promise((resolve, reject) => {\n    fetch(url, {\n      headers: {\n        ...{\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n        },\n        ...headers,\n      },\n      method: method,\n      body: method !== 'GET' && data ? JSON.stringify(data) : null,\n    })\n      .then(response => (response.ok ? resolve(response.json()) : reject(response.statusText)))\n      .catch(reject)\n  })\n}\n\nconst cspRequest = (type, data = null, params = {}) => {\n  return new Promise((resolve, reject) => {\n    const endpoint = cspEndpoints[type]\n\n    if (!endpoint) {\n      reject('No endpoint found for \"' + type + '\" call')\n    } else {\n      if (endpoint.callback && typeof endpoint.callback === 'function') {\n        endpoint\n          .callback(data, params)\n          .then(resolve)\n          .catch(reject)\n      } else {\n        request(\n          createUrl(endpoint.uri, cspUrl, params),\n          endpoint.method,\n          {\n            ...(endpoint.data || {}),\n            ...data,\n          },\n          endpoint.headers || {}\n        )\n          .then(resolve)\n          .catch(reject)\n      }\n    }\n  })\n}\n\nconst billingRequest = (uri, data, method = 'POST') => {\n  return new Promise((resolve, reject) => {\n    request(createUrl(uri, billingUrl), method, data)\n      .then(resolve)\n      .catch(reject)\n  })\n}\n\nexport default {\n  setup(config) {\n    if (config.cspUrl) cspUrl = config.cspUrl\n    if (config.endpoints) cspEndpoints = { cspEndpoints, ...config.endpoints }\n  },\n  assets() {\n    return new Promise((resolve, reject) => {\n      Profile.household().then(household => {\n        cspRequest('assets', { household })\n          .then(resolve)\n          .catch(reject)\n      })\n    })\n  },\n  asset(id) {\n    return new Promise((resolve, reject) => {\n      Profile.household().then(household => {\n        cspRequest('asset', { household }, { id })\n          .then(resolve)\n          .catch(reject)\n      })\n    })\n  },\n  signature(id) {\n    return new Promise((resolve, reject) => {\n      Promise.all([Profile.household()]).then(([household]) => {\n        cspRequest('signature', { household }, { id })\n          .then(resolve)\n          .catch(reject)\n      })\n    })\n  },\n  subscribe(id, transaction) {\n    return new Promise((resolve, reject) => {\n      cspRequest('subscribe', { ...transaction }, { id })\n        .then(resolve)\n        .catch(reject)\n    })\n  },\n  unsubscribe(id) {\n    return new Promise((resolve, reject) => {\n      Profile.household().then(household => {\n        cspRequest('unsubscribe', { household }, { id })\n          .then(resolve)\n          .catch(reject)\n      })\n    })\n  },\n  payment(signature = {}, type = 'in-app') {\n    return new Promise((resolve, reject) => {\n      Promise.all([\n        Profile.household(),\n        Profile.countryCode(),\n        Profile.operator(),\n        Profile.mac(),\n        Profile.uid(),\n      ])\n        .then(([household, country, operator, mac, uid]) => {\n          billingRequest('/', {\n            purchase: signature,\n            identifier: Settings.get('app', 'id'),\n            name: Settings.get('app', 'id'),\n            household,\n            country,\n            operator,\n            mac,\n            uid,\n            type,\n          })\n            .then(resolve)\n            .catch(reject)\n        })\n        .catch(reject)\n    })\n  },\n  confirm(transactionId) {\n    return new Promise((resolve, reject) => {\n      billingRequest('/confirm', {\n        transactionId,\n      })\n        .then(resolve)\n        .catch(reject)\n    })\n  },\n  buy(assetId, type) {\n    return new Promise((resolve, reject) => {\n      let transactionId\n      sequence([\n        () => this.signature(assetId),\n        signature => this.payment(signature, type),\n        transaction => {\n          transactionId = transaction.transactionId\n          return this.subscribe(assetId, transaction)\n        },\n        () => this.confirm(transactionId),\n      ])\n        .then(resolve)\n        .catch(reject)\n    })\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Pin from '../Pin'\n\nclass PinInput extends Lightning.Component {\n  static _template() {\n    return {\n      w: 120,\n      h: 150,\n      rect: true,\n      color: 0xff949393,\n      alpha: 0.5,\n      shader: { type: Lightning.shaders.RoundedRectangle, radius: 10 },\n      Nr: {\n        w: w => w,\n        y: 24,\n        text: {\n          text: '',\n          textColor: 0xff333333,\n          fontSize: 80,\n          textAlign: 'center',\n          verticalAlign: 'middle',\n        },\n      },\n    }\n  }\n\n  set index(v) {\n    this.x = v * (120 + 24)\n  }\n\n  set nr(v) {\n    this._timeout && clearTimeout(this._timeout)\n\n    if (v) {\n      this.setSmooth('alpha', 1)\n    } else {\n      this.setSmooth('alpha', 0.5)\n    }\n\n    this.tag('Nr').patch({\n      text: {\n        text: (v && v.toString()) || '',\n        fontSize: v === '*' ? 120 : 80,\n      },\n    })\n\n    if (v && v !== '*') {\n      this._timeout = setTimeout(() => {\n        this._timeout = null\n        this.nr = '*'\n      }, 750)\n    }\n  }\n}\n\nexport default class PinDialog extends Lightning.Component {\n  static _template() {\n    return {\n      zIndex: 1,\n      w: w => w,\n      h: h => h,\n      rect: true,\n      color: 0xdd000000,\n      alpha: 0.000001,\n      Dialog: {\n        w: 648,\n        h: 320,\n        y: h => (h - 320) / 2,\n        x: w => (w - 648) / 2,\n        rect: true,\n        color: 0xdd333333,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 10 },\n        Info: {\n          y: 24,\n          x: 48,\n          text: { text: 'Please enter your PIN', fontSize: 32 },\n        },\n        Msg: {\n          y: 260,\n          x: 48,\n          text: { text: '', fontSize: 28, textColor: 0xffffffff },\n        },\n        Code: {\n          x: 48,\n          y: 96,\n        },\n      },\n    }\n  }\n\n  _init() {\n    const children = []\n    for (let i = 0; i < 4; i++) {\n      children.push({\n        type: PinInput,\n        index: i,\n      })\n    }\n\n    this.tag('Code').children = children\n  }\n\n  get pin() {\n    if (!this._pin) this._pin = ''\n    return this._pin\n  }\n\n  set pin(v) {\n    if (v.length <= 4) {\n      const maskedPin = new Array(Math.max(v.length - 1, 0)).fill('*', 0, v.length - 1)\n      v.length && maskedPin.push(v.length > this._pin.length ? v.slice(-1) : '*')\n      for (let i = 0; i < 4; i++) {\n        this.tag('Code').children[i].nr = maskedPin[i] || ''\n      }\n      this._pin = v\n    }\n  }\n\n  get msg() {\n    if (!this._msg) this._msg = ''\n    return this._msg\n  }\n\n  set msg(v) {\n    this._timeout && clearTimeout(this._timeout)\n\n    this._msg = v\n    if (this._msg) {\n      this.tag('Msg').text = this._msg\n      this.tag('Info').setSmooth('alpha', 0.5)\n      this.tag('Code').setSmooth('alpha', 0.5)\n    } else {\n      this.tag('Msg').text = ''\n      this.tag('Info').setSmooth('alpha', 1)\n      this.tag('Code').setSmooth('alpha', 1)\n    }\n    this._timeout = setTimeout(() => {\n      this.msg = ''\n    }, 2000)\n  }\n\n  _firstActive() {\n    this.setSmooth('alpha', 1)\n  }\n\n  _handleKey(event) {\n    if (this.msg) {\n      this.msg = false\n    } else {\n      const val = parseInt(event.key)\n      if (val > -1) {\n        this.pin += val\n      }\n    }\n  }\n\n  _handleBack() {\n    if (this.msg) {\n      this.msg = false\n    } else {\n      if (this.pin.length) {\n        this.pin = this.pin.slice(0, this.pin.length - 1)\n      } else {\n        Pin.hide()\n        this.resolve(false)\n      }\n    }\n  }\n\n  _handleEnter() {\n    if (this.msg) {\n      this.msg = false\n    } else {\n      Pin.submit(this.pin)\n        .then(val => {\n          this.msg = 'Unlocking ...'\n          setTimeout(() => {\n            Pin.hide()\n          }, 1000)\n          this.resolve(val)\n        })\n        .catch(e => {\n          this.msg = e\n          this.reject(e)\n        })\n    }\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\nimport PinDialog from './dialog'\nimport { ApplicationInstance } from '../Launch'\nimport { Log } from '../../index'\n\n// only used during local development\nlet unlocked = false\nconst contextItems = ['purchase', 'parental']\n\nlet submit = (pin, context) => {\n  return new Promise((resolve, reject) => {\n    if (pin.toString() === Settings.get('platform', 'pin', '0000').toString()) {\n      unlocked = true\n      resolve(unlocked)\n    } else {\n      reject('Incorrect pin')\n    }\n  })\n}\n\nlet check = context => {\n  return new Promise(resolve => {\n    resolve(unlocked)\n  })\n}\n\nexport const initPin = config => {\n  if (config.submit && typeof config.submit === 'function') {\n    submit = config.submit\n  }\n  if (config.check && typeof config.check === 'function') {\n    check = config.check\n  }\n}\n\nlet pinDialog = null\n\nconst contextCheck = context => {\n  if (context === undefined) {\n    Log.info('Please provide context explicitly')\n    return contextItems[0]\n  } else if (!contextItems.includes(context)) {\n    Log.warn('Incorrect context provided')\n    return false\n  }\n  return context\n}\n\n// Public API\nexport default {\n  show() {\n    return new Promise((resolve, reject) => {\n      pinDialog = ApplicationInstance.stage.c({\n        ref: 'PinDialog',\n        type: PinDialog,\n        resolve,\n        reject,\n      })\n      ApplicationInstance.childList.a(pinDialog)\n      ApplicationInstance.focus = pinDialog\n    })\n  },\n  hide() {\n    ApplicationInstance.focus = null\n    ApplicationInstance.children = ApplicationInstance.children.map(\n      child => child !== pinDialog && child\n    )\n    pinDialog = null\n  },\n  submit(pin, context) {\n    return new Promise((resolve, reject) => {\n      try {\n        context = contextCheck(context)\n        if (context) {\n          submit(pin, context)\n            .then(resolve)\n            .catch(reject)\n        } else {\n          reject('Incorrect Context provided')\n        }\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n  unlocked(context) {\n    return new Promise((resolve, reject) => {\n      try {\n        context = contextCheck(context)\n        if (context) {\n          check(context)\n            .then(resolve)\n            .catch(reject)\n        } else {\n          reject('Incorrect Context provided')\n        }\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n  locked(context) {\n    return new Promise((resolve, reject) => {\n      try {\n        context = contextCheck(context)\n        if (context) {\n          check(context)\n            .then(unlocked => resolve(!!!unlocked))\n            .catch(reject)\n        } else {\n          reject('Incorrect Context provided')\n        }\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { initUtils } from '../Utils'\nimport { initProfile } from '../Profile'\nimport { initMetrics } from '../Metrics'\nimport { initSettings } from '../Settings'\nimport { initMediaPlayer } from '../MediaPlayer'\nimport { initVideoPlayer } from '../VideoPlayer'\nimport { initStorage } from '../Storage'\nimport { initAds } from '../Ads'\nimport { initRouter } from '../Router'\nimport { initTV } from '../TV'\nimport { initPurchase } from '../Purchase'\nimport { initPin } from '../Pin'\nimport { initMetadata } from '../Metadata'\nimport Application from '../Application'\n\nexport let ApplicationInstance\n\nexport default (App, appSettings, platformSettings, appData) => {\n  initSettings(appSettings, platformSettings)\n  initMetadata(appSettings)\n\n  initUtils(platformSettings)\n  initStorage()\n  // Initialize plugins\n  if (platformSettings.plugins) {\n    platformSettings.plugins.profile && initProfile(platformSettings.plugins.profile)\n    platformSettings.plugins.metrics && initMetrics(platformSettings.plugins.metrics)\n    platformSettings.plugins.mediaPlayer && initMediaPlayer(platformSettings.plugins.mediaPlayer)\n    platformSettings.plugins.mediaPlayer && initVideoPlayer(platformSettings.plugins.mediaPlayer)\n    platformSettings.plugins.ads && initAds(platformSettings.plugins.ads)\n    platformSettings.plugins.router && initRouter(platformSettings.plugins.router)\n    platformSettings.plugins.tv && initTV(platformSettings.plugins.tv)\n    platformSettings.plugins.purchase && initPurchase(platformSettings.plugins.purchase)\n    platformSettings.plugins.pin && initPin(platformSettings.plugins.pin)\n  }\n\n  const app = Application(App, appData, platformSettings)\n  ApplicationInstance = new app(appSettings)\n  return ApplicationInstance\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Log from '../Log'\n\nexport default class VideoTexture extends Lightning.Component {\n  static _template() {\n    return {\n      Video: {\n        alpha: 1,\n        visible: false,\n        pivot: 0.5,\n        texture: { type: Lightning.textures.StaticTexture, options: {} },\n      },\n    }\n  }\n\n  set videoEl(v) {\n    this._videoEl = v\n  }\n\n  get videoEl() {\n    return this._videoEl\n  }\n\n  get videoView() {\n    return this.tag('Video')\n  }\n\n  get videoTexture() {\n    return this.videoView.texture\n  }\n\n  get isVisible() {\n    return this.videoView.alpha === 1 && this.videoView.visible === true\n  }\n\n  _init() {\n    this._createVideoTexture()\n  }\n\n  _createVideoTexture() {\n    const stage = this.stage\n\n    const gl = stage.gl\n    const glTexture = gl.createTexture()\n    gl.bindTexture(gl.TEXTURE_2D, glTexture)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)\n    this.videoTexture.options = { source: glTexture, w: this.videoEl.width, h: this.videoEl.height }\n\n    this.videoView.w = this.videoEl.width / this.stage.getRenderPrecision()\n    this.videoView.h = this.videoEl.height / this.stage.getRenderPrecision()\n  }\n\n  start() {\n    const stage = this.stage\n    this._lastTime = 0\n    if (!this._updateVideoTexture) {\n      this._updateVideoTexture = () => {\n        if (this.videoTexture.options.source && this.videoEl.videoWidth && this.active) {\n          const gl = stage.gl\n\n          const currentTime = new Date().getTime()\n          const getVideoPlaybackQuality = this.videoEl.getVideoPlaybackQuality()\n\n          // When BR2_PACKAGE_GST1_PLUGINS_BAD_PLUGIN_DEBUGUTILS is not set in WPE, webkitDecodedFrameCount will not be available.\n          // We'll fallback to fixed 30fps in this case.\n          // As 'webkitDecodedFrameCount' is about to deprecate, check for the 'totalVideoFrames'\n          const frameCount = getVideoPlaybackQuality\n            ? getVideoPlaybackQuality.totalVideoFrames\n            : this.videoEl.webkitDecodedFrameCount\n\n          const mustUpdate = frameCount\n            ? this._lastFrame !== frameCount\n            : this._lastTime < currentTime - 30\n\n          if (mustUpdate) {\n            this._lastTime = currentTime\n            this._lastFrame = frameCount\n            try {\n              gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n              gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false)\n              gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.videoEl)\n              this._lastFrame = this.videoEl.webkitDecodedFrameCount\n              this.videoView.visible = true\n\n              this.videoTexture.options.w = this.videoEl.width\n              this.videoTexture.options.h = this.videoEl.height\n              const expectedAspectRatio = this.videoView.w / this.videoView.h\n              const realAspectRatio = this.videoEl.width / this.videoEl.height\n\n              if (expectedAspectRatio > realAspectRatio) {\n                this.videoView.scaleX = realAspectRatio / expectedAspectRatio\n                this.videoView.scaleY = 1\n              } else {\n                this.videoView.scaleY = expectedAspectRatio / realAspectRatio\n                this.videoView.scaleX = 1\n              }\n            } catch (e) {\n              Log.error('texImage2d video', e)\n              this.stop()\n            }\n            this.videoTexture.source.forceRenderUpdate()\n          }\n        }\n      }\n    }\n    if (!this._updatingVideoTexture) {\n      stage.on('frameStart', this._updateVideoTexture)\n      this._updatingVideoTexture = true\n    }\n  }\n\n  stop() {\n    const stage = this.stage\n    stage.removeListener('frameStart', this._updateVideoTexture)\n    this._updatingVideoTexture = false\n    this.videoView.visible = false\n\n    if (this.videoTexture.options.source) {\n      const gl = stage.gl\n      gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n      gl.clearColor(0, 0, 0, 1)\n      gl.clear(gl.COLOR_BUFFER_BIT)\n    }\n  }\n\n  position(top, left) {\n    this.videoView.patch({\n      smooth: {\n        x: left,\n        y: top,\n      },\n    })\n  }\n\n  size(width, height) {\n    this.videoView.patch({\n      smooth: {\n        w: width,\n        h: height,\n      },\n    })\n  }\n\n  show() {\n    this.videoView.setSmooth('alpha', 1)\n  }\n\n  hide() {\n    this.videoView.setSmooth('alpha', 0)\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport executeAsPromise from '@michieljs/execute-as-promise'\n\nimport Metrics from '../Metrics'\nimport Log from '../Log'\nimport Ads from '../Ads'\n\nimport events from './events'\nimport autoSetupMixin from '../helpers/autoSetupMixin'\nimport easeExecution from '../helpers/easeExecution'\nimport { ApplicationInstance } from '../Launch'\nimport Settings from '../Settings'\nimport VideoTexture from './VideoTexture'\n\nexport let mediaUrl = url => url\nlet videoEl\nlet videoTexture\nlet metrics\nlet consumer\nlet precision = 1\nlet textureMode = false\n\nexport const initVideoPlayer = config => {\n  if (config.mediaUrl) {\n    mediaUrl = config.mediaUrl\n  }\n}\n\n// todo: add this in a 'Registry' plugin\n// to be able to always clean this up on app close\nlet eventHandlers = {}\n\nconst state = {\n  adsEnabled: false,\n  playing: false,\n  _playingAds: false,\n  get playingAds() {\n    return this._playingAds\n  },\n  set playingAds(val) {\n    if (this._playingAds !== val) {\n      this._playingAds = val\n      fireOnConsumer(val === true ? 'AdStart' : 'AdEnd')\n    }\n  },\n  skipTime: false,\n  playAfterSeek: null,\n}\n\nconst hooks = {\n  play() {\n    state.playing = true\n  },\n  pause() {\n    state.playing = false\n  },\n  seeked() {\n    state.playAfterSeek === true && videoPlayerPlugin.play()\n    state.playAfterSeek = null\n  },\n  abort() {\n    deregisterEventListeners()\n  },\n}\n\nconst withPrecision = val => Math.round(precision * val) + 'px'\n\nconst fireOnConsumer = (event, args) => {\n  if (consumer) {\n    consumer.fire('$videoPlayer' + event, args, videoEl.currentTime)\n    consumer.fire('$videoPlayerEvent', event, args, videoEl.currentTime)\n  }\n}\n\nconst fireHook = (event, args) => {\n  hooks[event] && typeof hooks[event] === 'function' && hooks[event].call(null, event, args)\n}\n\nlet customLoader = null\nlet customUnloader = null\n\nconst loader = (url, videoEl, config) => {\n  return customLoader && typeof customLoader === 'function'\n    ? customLoader(url, videoEl, config)\n    : new Promise(resolve => {\n        url = mediaUrl(url)\n        videoEl.setAttribute('src', url)\n        videoEl.load()\n        resolve()\n      })\n}\n\nconst unloader = videoEl => {\n  return customUnloader && typeof customUnloader === 'function'\n    ? customUnloader(videoEl)\n    : new Promise(resolve => {\n        videoEl.removeAttribute('src')\n        videoEl.load()\n        resolve()\n      })\n}\n\nexport const setupVideoTag = () => {\n  const videoEls = document.getElementsByTagName('video')\n  if (videoEls && videoEls.length) {\n    return videoEls[0]\n  } else {\n    const videoEl = document.createElement('video')\n    const platformSettingsWidth = Settings.get('platform', 'width')\n      ? Settings.get('platform', 'width')\n      : 1920\n    const platformSettingsHeight = Settings.get('platform', 'height')\n      ? Settings.get('platform', 'height')\n      : 1080\n    videoEl.setAttribute('id', 'video-player')\n    videoEl.setAttribute('width', withPrecision(platformSettingsWidth))\n    videoEl.setAttribute('height', withPrecision(platformSettingsHeight))\n    videoEl.style.position = 'absolute'\n    videoEl.style.zIndex = '1'\n    videoEl.style.display = 'none'\n    videoEl.style.visibility = 'hidden'\n    videoEl.style.top = withPrecision(0)\n    videoEl.style.left = withPrecision(0)\n    videoEl.style.width = withPrecision(platformSettingsWidth)\n    videoEl.style.height = withPrecision(platformSettingsHeight)\n    document.body.appendChild(videoEl)\n    return videoEl\n  }\n}\n\nexport const setUpVideoTexture = () => {\n  if (!ApplicationInstance.tag('VideoTexture')) {\n    const el = ApplicationInstance.stage.c({\n      type: VideoTexture,\n      ref: 'VideoTexture',\n      zIndex: 0,\n      videoEl,\n    })\n    ApplicationInstance.childList.addAt(el, 0)\n  }\n  return ApplicationInstance.tag('VideoTexture')\n}\n\nconst registerEventListeners = () => {\n  Log.info('VideoPlayer', 'Registering event listeners')\n  Object.keys(events).forEach(event => {\n    const handler = e => {\n      // Fire a metric for each event (if it exists on the metrics object)\n      if (metrics && metrics[event] && typeof metrics[event] === 'function') {\n        metrics[event]({ currentTime: videoEl.currentTime })\n      }\n      // fire an internal hook\n      fireHook(event, { videoElement: videoEl, event: e })\n\n      // fire the event (with human friendly event name) to the consumer of the VideoPlayer\n      fireOnConsumer(events[event], { videoElement: videoEl, event: e })\n    }\n\n    eventHandlers[event] = handler\n    videoEl.addEventListener(event, handler)\n  })\n}\n\nconst deregisterEventListeners = () => {\n  Log.info('VideoPlayer', 'Deregistering event listeners')\n  Object.keys(eventHandlers).forEach(event => {\n    videoEl.removeEventListener(event, eventHandlers[event])\n  })\n  eventHandlers = {}\n}\n\nconst videoPlayerPlugin = {\n  consumer(component) {\n    consumer = component\n  },\n\n  loader(loaderFn) {\n    customLoader = loaderFn\n  },\n\n  unloader(unloaderFn) {\n    customUnloader = unloaderFn\n  },\n\n  position(top = 0, left = 0) {\n    videoEl.style.left = withPrecision(left)\n    videoEl.style.top = withPrecision(top)\n    if (textureMode === true) {\n      videoTexture.position(top, left)\n    }\n  },\n\n  size(width = 1920, height = 1080) {\n    videoEl.style.width = withPrecision(width)\n    videoEl.style.height = withPrecision(height)\n    videoEl.width = parseFloat(videoEl.style.width)\n    videoEl.height = parseFloat(videoEl.style.height)\n    if (textureMode === true) {\n      videoTexture.size(width, height)\n    }\n  },\n\n  area(top = 0, right = 1920, bottom = 1080, left = 0) {\n    this.position(top, left)\n    this.size(right - left, bottom - top)\n  },\n\n  open(url, config = {}) {\n    if (!this.canInteract) return\n    metrics = Metrics.media(url)\n\n    this.hide()\n    deregisterEventListeners()\n\n    if (this.src == url) {\n      this.clear().then(this.open(url, config))\n    } else {\n      const adConfig = { enabled: state.adsEnabled, duration: 300 }\n      if (config.videoId) {\n        adConfig.caid = config.videoId\n      }\n      Ads.get(adConfig, consumer).then(ads => {\n        state.playingAds = true\n        ads.prerolls().then(() => {\n          state.playingAds = false\n          loader(url, videoEl, config)\n            .then(() => {\n              registerEventListeners()\n              this.show()\n              this.play()\n            })\n            .catch(e => {\n              fireOnConsumer('error', { videoElement: videoEl, event: e })\n            })\n        })\n      })\n    }\n  },\n\n  reload() {\n    if (!this.canInteract) return\n    const url = videoEl.getAttribute('src')\n    this.close()\n    this.open(url)\n  },\n\n  close() {\n    Ads.cancel()\n    if (state.playingAds) {\n      state.playingAds = false\n      Ads.stop()\n      // call self in next tick\n      setTimeout(() => {\n        this.close()\n      })\n    }\n    if (!this.canInteract) return\n    this.clear()\n    this.hide()\n    deregisterEventListeners()\n  },\n\n  clear() {\n    if (!this.canInteract) return\n    // pause the video first to disable sound\n    this.pause()\n    if (textureMode === true) videoTexture.stop()\n    return unloader(videoEl).then(() => {\n      fireOnConsumer('Clear', { videoElement: videoEl })\n    })\n  },\n\n  play() {\n    if (!this.canInteract) return\n    if (textureMode === true) videoTexture.start()\n    executeAsPromise(videoEl.play, null, videoEl).catch(e => {\n      fireOnConsumer('error', { videoElement: videoEl, event: e })\n    })\n  },\n\n  pause() {\n    if (!this.canInteract) return\n    videoEl.pause()\n  },\n\n  playPause() {\n    if (!this.canInteract) return\n    this.playing === true ? this.pause() : this.play()\n  },\n\n  mute(muted = true) {\n    if (!this.canInteract) return\n    videoEl.muted = muted\n  },\n\n  loop(looped = true) {\n    videoEl.loop = looped\n  },\n\n  seek(time) {\n    if (!this.canInteract) return\n    if (!this.src) return\n    // define whether should continue to play after seek is complete (in seeked hook)\n    if (state.playAfterSeek === null) {\n      state.playAfterSeek = !!state.playing\n    }\n    // pause before actually seeking\n    this.pause()\n    // currentTime always between 0 and the duration of the video (minus 0.1s to not set to the final frame and stall the video)\n    videoEl.currentTime = Math.max(0, Math.min(time, this.duration - 0.1))\n  },\n\n  skip(seconds) {\n    if (!this.canInteract) return\n    if (!this.src) return\n\n    state.skipTime = (state.skipTime || videoEl.currentTime) + seconds\n    easeExecution(() => {\n      this.seek(state.skipTime)\n      state.skipTime = false\n    }, 300)\n  },\n\n  show() {\n    if (!this.canInteract) return\n    if (textureMode === true) {\n      videoTexture.show()\n    } else {\n      videoEl.style.display = 'block'\n      videoEl.style.visibility = 'visible'\n    }\n  },\n\n  hide() {\n    if (!this.canInteract) return\n    if (textureMode === true) {\n      videoTexture.hide()\n    } else {\n      videoEl.style.display = 'none'\n      videoEl.style.visibility = 'hidden'\n    }\n  },\n\n  enableAds(enabled = true) {\n    state.adsEnabled = enabled\n  },\n\n  /* Public getters */\n  get duration() {\n    return videoEl && (isNaN(videoEl.duration) ? Infinity : videoEl.duration)\n  },\n\n  get currentTime() {\n    return videoEl && videoEl.currentTime\n  },\n\n  get muted() {\n    return videoEl && videoEl.muted\n  },\n\n  get looped() {\n    return videoEl && videoEl.loop\n  },\n\n  get src() {\n    return videoEl && videoEl.getAttribute('src')\n  },\n\n  get playing() {\n    return state.playing\n  },\n\n  get playingAds() {\n    return state.playingAds\n  },\n\n  get canInteract() {\n    // todo: perhaps add an extra flag wether we allow interactions (i.e. pauze, mute, etc.) during ad playback\n    return state.playingAds === false\n  },\n\n  get top() {\n    return videoEl && parseFloat(videoEl.style.top)\n  },\n\n  get left() {\n    return videoEl && parseFloat(videoEl.style.left)\n  },\n\n  get bottom() {\n    return videoEl && parseFloat(videoEl.style.top - videoEl.style.height)\n  },\n\n  get right() {\n    return videoEl && parseFloat(videoEl.style.left - videoEl.style.width)\n  },\n\n  get width() {\n    return videoEl && parseFloat(videoEl.style.width)\n  },\n\n  get height() {\n    return videoEl && parseFloat(videoEl.style.height)\n  },\n\n  get visible() {\n    if (textureMode === true) {\n      return videoTexture.isVisible\n    } else {\n      return videoEl && videoEl.style.display === 'block'\n    }\n  },\n\n  get adsEnabled() {\n    return state.adsEnabled\n  },\n\n  // prefixed with underscore to indicate 'semi-private'\n  // because it's not recommended to interact directly with the video element\n  get _videoEl() {\n    return videoEl\n  },\n\n  get _consumer() {\n    return consumer\n  },\n}\n\nexport default autoSetupMixin(videoPlayerPlugin, () => {\n  precision =\n    (ApplicationInstance &&\n      ApplicationInstance.stage &&\n      ApplicationInstance.stage.getRenderPrecision()) ||\n    precision\n\n  videoEl = setupVideoTag()\n\n  textureMode = Settings.get('platform', 'textureMode', false)\n  if (textureMode === true) {\n    videoEl.setAttribute('crossorigin', 'anonymous')\n    videoTexture = setUpVideoTexture()\n  }\n})\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\nimport { mediaUrl } from '../VideoPlayer'\n\nlet consumer\n\nlet getAds = () => {\n  // todo: enable some default ads during development, maybe from the settings.json\n  return Promise.resolve({\n    prerolls: [],\n    midrolls: [],\n    postrolls: [],\n  })\n}\n\nexport const initAds = config => {\n  if (config.getAds) {\n    getAds = config.getAds\n  }\n}\n\nconst state = {\n  active: false,\n}\n\nconst playSlot = (slot = []) => {\n  return slot.reduce((promise, ad) => {\n    return promise.then(() => {\n      return playAd(ad)\n    })\n  }, Promise.resolve(null))\n}\n\nconst playAd = ad => {\n  return new Promise(resolve => {\n    if (state.active === false) {\n      Log.info('Ad', 'Skipping add due to inactive state')\n      return resolve()\n    }\n    // is it safe to rely on videoplayer plugin already created the video tag?\n    const videoEl = document.getElementsByTagName('video')[0]\n    videoEl.style.display = 'block'\n    videoEl.style.visibility = 'visible'\n    videoEl.src = mediaUrl(ad.url)\n    videoEl.load()\n\n    let timeEvents = null\n    let timeout\n\n    const cleanup = () => {\n      // remove all listeners\n      Object.keys(handlers).forEach(handler =>\n        videoEl.removeEventListener(handler, handlers[handler])\n      )\n      resolve()\n    }\n    const handlers = {\n      play() {\n        Log.info('Ad', 'Play ad', ad.url)\n        fireOnConsumer('Play', ad)\n        sendBeacon(ad.callbacks, 'defaultImpression')\n      },\n      ended() {\n        fireOnConsumer('Ended', ad)\n        sendBeacon(ad.callbacks, 'complete')\n        cleanup()\n      },\n      timeupdate() {\n        if (!timeEvents && videoEl.duration) {\n          // calculate when to fire the time based events (now that duration is known)\n          timeEvents = {\n            firstQuartile: videoEl.duration / 4,\n            midPoint: videoEl.duration / 2,\n            thirdQuartile: (videoEl.duration / 4) * 3,\n          }\n          Log.info('Ad', 'Calculated quartiles times', { timeEvents })\n        }\n        if (\n          timeEvents &&\n          timeEvents.firstQuartile &&\n          videoEl.currentTime >= timeEvents.firstQuartile\n        ) {\n          fireOnConsumer('FirstQuartile', ad)\n          delete timeEvents.firstQuartile\n          sendBeacon(ad.callbacks, 'firstQuartile')\n        }\n        if (timeEvents && timeEvents.midPoint && videoEl.currentTime >= timeEvents.midPoint) {\n          fireOnConsumer('MidPoint', ad)\n          delete timeEvents.midPoint\n          sendBeacon(ad.callbacks, 'midPoint')\n        }\n        if (\n          timeEvents &&\n          timeEvents.thirdQuartile &&\n          videoEl.currentTime >= timeEvents.thirdQuartile\n        ) {\n          fireOnConsumer('ThirdQuartile', ad)\n          delete timeEvents.thirdQuartile\n          sendBeacon(ad.callbacks, 'thirdQuartile')\n        }\n      },\n      stalled() {\n        fireOnConsumer('Stalled', ad)\n        timeout = setTimeout(() => {\n          cleanup()\n        }, 5000) // make timeout configurable\n      },\n      canplay() {\n        timeout && clearTimeout(timeout)\n      },\n      error() {\n        fireOnConsumer('Error', ad)\n        cleanup()\n      },\n      // this doesn't work reliably on sky box, moved logic to timeUpdate event\n      // loadedmetadata() {\n      //   // calculate when to fire the time based events (now that duration is known)\n      //   timeEvents = {\n      //     firstQuartile: videoEl.duration / 4,\n      //     midPoint: videoEl.duration / 2,\n      //     thirdQuartile: (videoEl.duration / 4) * 3,\n      //   }\n      // },\n      abort() {\n        cleanup()\n      },\n      // todo: pause, resume, mute, unmute beacons\n    }\n    // add all listeners\n    Object.keys(handlers).forEach(handler => videoEl.addEventListener(handler, handlers[handler]))\n\n    videoEl.play()\n  })\n}\n\nconst sendBeacon = (callbacks, event) => {\n  if (callbacks && callbacks[event]) {\n    Log.info('Ad', 'Sending beacon', event, callbacks[event])\n    return callbacks[event].reduce((promise, url) => {\n      return promise.then(() =>\n        fetch(url)\n          // always resolve, also in case of a fetch error (so we don't block firing the rest of the beacons for this event)\n          // note: for fetch failed http responses don't throw an Error :)\n          .then(response => {\n            if (response.status === 200) {\n              fireOnConsumer('Beacon' + event + 'Sent')\n            } else {\n              fireOnConsumer('Beacon' + event + 'Failed' + response.status)\n            }\n            Promise.resolve(null)\n          })\n          .catch(() => {\n            Promise.resolve(null)\n          })\n      )\n    }, Promise.resolve(null))\n  } else {\n    Log.info('Ad', 'No callback found for ' + event)\n  }\n}\n\nconst fireOnConsumer = (event, args) => {\n  if (consumer) {\n    consumer.fire('$ad' + event, args)\n    consumer.fire('$adEvent', event, args)\n  }\n}\n\nexport default {\n  get(config, videoPlayerConsumer) {\n    if (config.enabled === false) {\n      return Promise.resolve({\n        prerolls() {\n          return Promise.resolve()\n        },\n      })\n    }\n    consumer = videoPlayerConsumer\n\n    return new Promise(resolve => {\n      Log.info('Ad', 'Starting session')\n      getAds(config).then(ads => {\n        Log.info('Ad', 'API result', ads)\n        resolve({\n          prerolls() {\n            if (ads.preroll) {\n              state.active = true\n              fireOnConsumer('PrerollSlotImpression', ads)\n              sendBeacon(ads.preroll.callbacks, 'slotImpression')\n              return playSlot(ads.preroll.ads).then(() => {\n                fireOnConsumer('PrerollSlotEnd', ads)\n                sendBeacon(ads.preroll.callbacks, 'slotEnd')\n                state.active = false\n              })\n            }\n            return Promise.resolve()\n          },\n          midrolls() {\n            return Promise.resolve()\n          },\n          postrolls() {\n            return Promise.resolve()\n          },\n        })\n      })\n    })\n  },\n  cancel() {\n    Log.info('Ad', 'Cancel Ad')\n    state.active = false\n  },\n  stop() {\n    Log.info('Ad', 'Stop Ad')\n    state.active = false\n    // fixme: duplication\n    const videoEl = document.getElementsByTagName('video')[0]\n    videoEl.pause()\n    videoEl.removeAttribute('src')\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\n\nexport default class ScaledImageTexture extends Lightning.textures.ImageTexture {\n  constructor(stage) {\n    super(stage)\n    this._scalingOptions = undefined\n  }\n\n  set options(options) {\n    this.resizeMode = this._scalingOptions = options\n  }\n\n  _getLookupId() {\n    return `${this._src}-${this._scalingOptions.type}-${this._scalingOptions.w}-${this._scalingOptions.h}`\n  }\n\n  getNonDefaults() {\n    const obj = super.getNonDefaults()\n    if (this._src) {\n      obj.src = this._src\n    }\n    return obj\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Utils from '../Utils'\nimport Settings from '../Settings'\nimport ScaledImageTexture from './ScaledImageTexture'\n\nexport default (imageUrl, options) => {\n  const imageServerUrl = Settings.get('platform', 'imageServerUrl')\n\n  // make and return ScaledImageTexture\n  const make = options => {\n    // local asset, wrap it in Utils.asset()\n    if (!/^(?:https?:)?\\/\\//i.test(imageUrl)) {\n      imageUrl = Utils.asset(imageUrl)\n    }\n\n    // only pass to image server if imageServerUrl is configured\n    // and if the asset isn't local to the app (i.e. has same origin)\n    if (imageServerUrl && imageUrl.indexOf(window.location.origin) === -1) {\n      imageUrl = Utils.ensureUrlWithProtocol(\n        imageServerUrl + '?' + Utils.makeQueryString(imageUrl, options)\n      )\n    } else {\n      // Lightning will handle the resizing and has only 2 flavours (cover and contain)\n      if (options.type === 'crop') options.type = 'cover'\n      else options.type = 'contain'\n    }\n\n    return {\n      type: ScaledImageTexture,\n      src: imageUrl,\n      options: options,\n    }\n  }\n\n  // merge options with default\n  const setOptions = options => {\n    options = {\n      ...{\n        type: 'contain',\n        w: 0,\n        h: 0,\n      },\n      ...options,\n    }\n    const imageQuality = Math.max(\n      0.1,\n      Math.min(1, (parseFloat(Settings.get('platform', 'image.quality')) || 100) / 100)\n    )\n\n    options.w = options.w * imageQuality\n    options.h = options.h * imageQuality\n    return options\n  }\n\n  // if options are passed, return scaled image right away\n  if (options) {\n    return make(setOptions(options))\n  }\n\n  // otherwise return 'chained' functions\n  return {\n    // official api\n    exact: (w, h) => make(setOptions({ type: 'exact', w, h })),\n    landscape: w => make(setOptions({ type: 'landscape', w })),\n    portrait: h => make(setOptions({ type: 'portrait', h })),\n    cover: (w, h) => make(setOptions({ type: 'cover', w, h })),\n    contain: (w, h) => make(setOptions({ type: 'contain', w, h })),\n    original: () => make(setOptions({ type: 'contain' })),\n\n    // todo: add positioning - i.e. top, bottom, center, left etc.\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '@lightningjs/core';\nimport { limitWithinRange } from './index.js';\n\nexport default class CollectionWrapper extends Lightning.Component {\n    static _template() {\n        return {\n            Wrapper: {\n            }\n        }\n    }\n\n    _construct() {\n        this._direction = CollectionWrapper.DIRECTION.row;\n        this._scrollTransitionSettings = this.stage.transitions.createSettings({});\n\n        this._spacing = 0;\n        this._autoResize = false;\n        \n        this._requestingItems = false;\n        this._requestThreshold = 1;\n        this._requestsEnabled = false;\n\n        this._gcThreshold = 5;\n        this._gcIncrement = 0;\n        this._forceLoad = false;\n        this.clear();\n    }\n\n    _setup() {\n        this._updateScrollTransition();\n    }\n\n    _updateScrollTransition() {\n        const axis = this._direction === 1 ? 'y' : 'x';\n        this.wrapper.transition(axis, this._scrollTransitionSettings);\n        this._scrollTransition = this.wrapper.transition(axis);\n    }\n    \n    _indexChanged(obj) {    \n        let {previousIndex:previous, index:target, dataLength:max, mainIndex, previousMainIndex, lines} = obj;\n        if(!isNaN(previousMainIndex) && !isNaN(mainIndex) && !isNaN(lines)) {\n            previous = previousMainIndex;\n            target = mainIndex;\n            max = lines;\n        }\n        if(this._requestsEnabled && !this._requestingItems) {\n            if(previous < target && target + this._requestThreshold >= max) {\n                this._requestingItems = true;\n                this.signal('onRequestItems', obj)\n                    .then((response) => {\n                        const type = typeof response;\n                        if(Array.isArray(response) || type === 'object' ||  type === 'string' || type === 'number') {\n                            this.add(response);\n                        }\n                        if(response === false) {\n                            this.enableRequests = false;\n                        }\n                        this._requestingItems = false;\n                    })\n            }\n        }\n\n        this._refocus();\n        this.scrollCollectionWrapper(obj);\n        this.signal('onIndexChanged', obj);\n    }\n\n    setIndex(index) {\n        const targetIndex = limitWithinRange(index, 0, this._items.length - 1);\n        const previousIndex = this._index;\n        this._index = targetIndex;\n        this._indexChanged({previousIndex, index: targetIndex, dataLength: this._items.length});\n        return previousIndex !== targetIndex;\n    }\n\n    clear() {\n        this._uids = [];\n        this._items = [];\n        this._index = 0;\n        if(this.wrapper) {\n            const hadChildren = this.wrapper.children > 0;\n            this.wrapper.patch({\n                x: 0, y: 0, children: []\n            });\n            if(hadChildren) {\n                this._collectGarbage(true);\n            }\n        }\n    }\n\n    add(item) {\n        this.addAt(item);\n    }\n\n    addAt(item, index = this._items.length) {\n        if(index >= 0 && index <= this._items.length) {\n            if(!Array.isArray(item)) {\n                item = [item];\n            }\n            const items = this._normalizeDataItems(item);\n            this._items.splice(index, 0, ...items);\n            this.plotItems();\n            this.setIndex(this._index);\n        }\n        else {\n            throw new Error('addAt: The index ' + index + ' is out of bounds ' + this._items.length);\n        }\n    }\n\n    remove(item) {\n        if(this.hasItems && item.assignedID) {\n            for(let i = 0; i < this.wrapper.children.length; i++) {\n                if(this.wrapper.children[i].assignedID === item.assignedID) {\n                    return this.removeAt(i);\n                }\n            }\n        }\n        else {\n            throw new Error('remove: item not found');\n        }\n    }\n\n    removeAt(index, amount = 1)  {\n        if(index < 0 && index >= this._items.length) {\n            throw new Error('removeAt: The index ' + index + ' is out of bounds ' + this._items.length);\n        }\n        const item = this._items[index];\n        this._items.splice(index, amount);\n        this.plotItems();\n        return item;\n    }\n\n    reload(item) {\n        this.clear();\n        this.add(item)\n    }\n\n    plotItems(items, options) {\n        //placeholder\n    }\n\n    reposition(time = 70) {\n        if(this._repositionDebounce) {\n            clearTimeout(this._repositionDebounce);\n        }\n        this._repositionDebounce = setTimeout(() => {\n            this.repositionItems();\n        }, time);\n    }\n\n    repositionItems() {\n        //placeHolder\n        this.signal('onItemsRepositioned')\n    }\n\n    up() {\n        return this._attemptNavigation(-1, 1);\n    }\n\n    down() {\n        return this._attemptNavigation(1, 1);\n    }\n\n    left() {\n        return this._attemptNavigation(-1, 0);\n    }\n\n    right() {\n        return this._attemptNavigation(1, 0);\n    }\n\n    first() {\n        return this.setIndex(0);\n    }\n\n    last() {\n        return this.setIndex(this._items.length - 1);\n    }\n\n    next() {\n        return this.setIndex(this._index + 1);\n    }\n\n    previous() {\n        return this.setIndex(this._index - 1);\n    }\n\n    _attemptNavigation(shift, direction) {\n        if(this.hasItems) {\n            return this.navigate(shift, direction);\n        }\n        return false;\n    }\n\n    navigate(shift, direction = this._direction) {\n        if(direction !== this._direction) {\n            return false;\n        }\n        return this.setIndex(this._index + shift);\n    }\n\n    scrollCollectionWrapper(obj) {\n        let {previousIndex:previous, index:target, dataLength:max, mainIndex, previousMainIndex, lines} = obj;\n        if(!isNaN(previousMainIndex) && !isNaN(mainIndex) && !isNaN(lines)) {\n            previous = previousMainIndex;\n            target = mainIndex;\n            max = lines;\n        }\n        const {directionIsRow, main, mainDim, mainMarginFrom, mainMarginTo} = this._getPlotProperties(this._direction);\n        const cw = this.currentItemWrapper;\n        let bound = this[mainDim];\n        if(bound === 0) {\n            bound = directionIsRow ? 1920 : 1080;\n        }\n        const offset = Math.min(this.wrapper[main], this._scrollTransition && this._scrollTransition.targetValue || 0);\n\n        const sizes = this._getItemSizes(cw);\n        const marginFrom = (sizes[mainMarginFrom] || sizes.margin || 0);\n        const marginTo = (sizes[mainMarginTo] || sizes.margin || 0);\n\n        let scroll = this._scroll;\n\n        if(!isNaN(scroll)) {\n            if(scroll >= 0 && scroll <= 1) {\n                scroll = bound * scroll - (cw[main] + cw[mainDim] * scroll);\n            }\n            else {\n                scroll = scroll - cw[main];\n            }\n        }\n        else if(typeof scroll === 'function') {\n            scroll = scroll.apply(this, [cw, obj]);\n        }\n        else if(typeof scroll === 'object') {\n            const {jump = false, after = false, backward = 0.0, forward = 1.0} = scroll;\n            if(jump) {\n                let mod = target % jump;\n                if(mod === 0) {\n                    scroll = marginFrom - cw[main];\n                }\n                if(mod === jump - 1) {\n                    const actualSize = marginFrom + cw[mainDim] + marginTo;\n                    scroll = (mod * actualSize) + marginFrom - cw[main]; \n                }\n            }\n            else if(after) {\n                scroll = 0;\n                if(target >= after - 1) {\n                    const actualSize = marginFrom + cw[mainDim] + marginTo;\n                    scroll = ((after - 1) * actualSize) + marginFrom - cw[main];\n                }\n            }\n            else {\n                const backwardBound = bound * this._normalizePixelToPercentage(backward, bound);\n                const forwardBound = bound * this._normalizePixelToPercentage(forward, bound);\n                if(target < max - 1 && (previous < target && offset + cw[main] + cw[mainDim] > forwardBound)) {\n                    scroll = forwardBound - (cw[main] + cw[mainDim]);\n                }\n                else if(target > 0 && (target < previous && offset + cw[main] < backwardBound)) {\n                    scroll = backwardBound - cw[main];\n                }\n                else if(target === max - 1) {\n                    scroll = bound - (cw[main] + cw[mainDim]);\n                }\n                else if(target === 0) {\n                    scroll = marginFrom - cw[main];\n                }\n            }\n        }\n        else if(isNaN(scroll)){\n            if(previous < target && offset + cw[main] + cw[mainDim] > bound) {\n                scroll = bound - (cw[main] + cw[mainDim])\n            }\n            else if(target < previous && offset + cw[main] < 0) {\n                scroll = marginFrom - cw[main]\n            }\n        }\n\n        if(this.active && !isNaN(scroll) && this._scrollTransition) {\n            if(this._scrollTransition.isRunning()) {\n                this._scrollTransition.reset(scroll, 0.05);\n            }\n            else {\n                this._scrollTransition.start(scroll);\n            }\n        }\n        else if(!isNaN(scroll)) {\n            this.wrapper[main] = scroll\n        }\n    }\n\n    $childInactive({child}) {\n        if(typeof child === 'object') {\n            const index = child.componentIndex;\n            for(let key in this._items[index]) {\n                if(child.component[key] !== undefined) {\n                    this._items[index][key] = child.component[key];\n                }\n            }\n        }\n        this._collectGarbage();\n    }\n\n    $getChildComponent({index}) {\n        return this._items[index];\n    }\n\n    _resizeWrapper(crossSize) {\n        let obj = crossSize;\n        if(!isNaN(crossSize)) {\n            const {main, mainDim, crossDim} = this._getPlotProperties(this._direction);\n            const lastItem = this.wrapper.childList.last;\n            obj = {\n                [mainDim]: lastItem[main] + lastItem[mainDim],\n                [crossDim]: crossSize\n            }\n        }\n        this.wrapper.patch(obj);\n        if(this._autoResize) {\n            this.patch(obj);\n        }\n    }\n\n    _generateUniqueID() {\n        let id = '';\n        while(this._uids[id] || id === '') {\n            id = Math.random().toString(36).substr(2, 9);\n        }\n        this._uids[id] = true;\n        return id;\n    }\n\n    _getPlotProperties(direction) {\n        const directionIsRow = direction === 0;\n        return {\n            directionIsRow: directionIsRow ? true : false,\n            mainDirection: directionIsRow ? 'rows' : 'columns',\n            main: directionIsRow ? 'x' : 'y',\n            mainDim: directionIsRow ? 'w' : 'h',\n            mainMarginTo: directionIsRow ? 'marginRight' : 'marginBottom',\n            mainMarginFrom: directionIsRow ? 'marginLeft' : 'marginUp',\n            crossDirection: !directionIsRow ? 'columns' : 'rows',\n            cross: directionIsRow ? 'y' : 'x',\n            crossDim: directionIsRow ? 'h' : 'w',\n            crossMarginTo: directionIsRow ? 'marginBottom' : 'marginRight',\n            crossMarginFrom: directionIsRow ? 'marginUp' : 'marginLeft',\n        }\n    }\n    \n    _getItemSizes(item) {\n        const itemType = item.type;\n        if(item.component && item.component.__attached) {\n            item = item.component;\n        }\n        return {\n            w: item.w || (itemType && itemType['width']),\n            h: item.h || (itemType && itemType['height']),\n            margin: item.margin || (itemType && itemType['margin']) || 0,\n            marginLeft: item.marginLeft || (itemType && itemType['marginLeft']),\n            marginRight: item.marginRight || (itemType && itemType['marginRight']),\n            marginTop: item.marginTop || (itemType && itemType['marginTop']),\n            marginBottom: item.marginBottom || (itemType && itemType['marginBottom'])\n        }\n    }\n\n    _collectGarbage(immediate) {\n        this._gcIncrement++;\n        if(immediate || (this.active && this._gcThreshold !== 0 && this._gcIncrement >= this._gcThreshold)) {\n            this._gcIncrement = 0;\n            this.stage.gc();\n        }\n    }\n\n    _normalizeDataItems(array) {\n        return array.map((item, index) => {\n            return this._normalizeDataItem(item) || index;\n        })\n        .filter((item) => {\n            if(!isNaN(item)) {\n                console.warn(`Item at index: ${item}, is not a valid item. Removing it from dataset`);\n                return false;\n            }\n            return true;\n        });\n    }\n\n    _normalizeDataItem(item, index) {\n        if(typeof item === 'string' || typeof item === 'number') {\n            item = {label: item.toString()}\n        }\n        if(typeof item === 'object') {\n            let id = this._generateUniqueID();\n            return {assignedID: id, type: this.itemType, collectionWrapper: this, isAlive: false, ...item}\n        }\n        return index;\n    }\n\n    _normalizePixelToPercentage(value, max) {\n        if(value && value > 1) {\n            return value / max;\n        }\n        return value || 0;\n    }\n\n    _getFocused() {\n        if(this.hasItems) {\n            return this.currentItemWrapper;\n        }\n        return this;\n    }\n\n    _handleRight() {\n        return this.right()\n    }\n\n    _handleLeft() {\n        return this.left()\n    }\n\n    _handleUp() {\n        return this.up();\n    }\n\n    _handleDown() {\n        return this.down();\n    }\n\n    _inactive() {\n        if(this._repositionDebounce) {\n            clearTimeout(this._repositionDebounce);\n        }\n        this._collectGarbage(true);\n    }\n\n    static get itemType() {\n        return undefined;\n    }\n\n    set forceLoad(bool) {\n        this._forceLoad = bool;\n    }\n\n    get forceLoad() {\n        return this._forceLoad;\n    }    \n\n    get requestingItems() {\n        return this._requestingItems;\n    }\n\n    set requestThreshold(num) {\n        this._requestThreshold = num;\n    }\n\n    get requestThreshold() {\n        return this._requestThreshold;\n    }\n\n    set enableRequests(bool) {\n        this._requestsEnabled = bool\n    }\n\n    get enableRequests() {\n        return this._requestsEnabled\n    }\n\n    set gcThreshold(num) {\n        this._gcThreshold = num;\n    }\n\n    get gcThreshold() {\n        return this._gcThreshold;\n    }\n\n    get wrapper() {\n        return this.tag('Wrapper');\n    }\n\n    get hasItems() {\n        return this.wrapper && this.wrapper.children && this.wrapper.children.length > 0;\n    }\n\n    get currentItemWrapper() {\n        return this.wrapper.children[this._index];\n    }\n\n    get currentItem() {\n        return this.currentItemWrapper.component;\n    }\n\n    set direction(string) {\n        this._direction = CollectionWrapper.DIRECTION[string] || CollectionWrapper.DIRECTION.row;\n    }\n\n    get direction() {\n        return Object.keys(CollectionWrapper.DIRECTION)[this._direction];\n    }\n\n    set items(array) {\n        this.clear();\n        this.add(array);\n    }\n\n    get items() {\n        const itemWrappers = this.itemWrappers;\n        return this._items.map((item, index) => {\n            if(itemWrappers[index] && itemWrappers[index].component.isAlive) {\n                return itemWrappers[index].component;\n            }\n            return item;\n        });\n    }\n\n    get length() {\n        return this._items.length;\n    }\n\n    set index(index) {\n        this.setIndex(index);\n    }\n\n    get itemWrappers() {\n        return this.wrapper.children;\n    }\n\n    get index() {\n        return this._index;\n    }\n\n    set scrollTransition(obj) {\n        this._scrollTransitionSettings.patch(obj);\n        if(this.active) {\n            this._updateScrollTransition();\n        }\n    }\n\n    get scrollTransition() {\n        return this._scrollTransition;\n    }\n\n    set scroll(value) {\n        this._scroll = value;\n    }\n\n    get scrollTo() {\n        return this._scroll;\n    }\n\n    set autoResize(bool) {\n        this._autoResize = bool;\n    }\n\n    get autoResize() {\n        return this._autoResize;\n    }\n\n    set spacing(num) {\n        this._spacing = num;\n    }\n\n    get spacing() {\n        return this._spacing;\n    }\n}\n\nCollectionWrapper.DIRECTION = {\n    row: 0,\n    column: 1\n}","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from \"@lightningjs/core\";\n\nexport default class Cursor extends Lightning.Component {\n    static _template() {\n        return {\n            alpha: 0\n        }\n    }\n\n    _construct() {\n        this._blink = true;\n    }\n\n    _init() {\n        this._blinkAnimation = this.animation({duration: 1, repeat: -1, actions: [\n            {p: 'alpha', v: {0: 0, 0.5: 1, 1: 0}}\n        ]});\n    }\n\n    show() {\n        if(this._blink) {\n            this._blinkAnimation.start();\n        }\n        else {\n            this.alpha = 1;\n        }\n    }\n\n    hide() {\n        if(this._blink) {\n            this._blinkAnimation.stop();\n        }\n        else {\n            this.alpha = 0;\n        }\n    }\n\n    set blink(bool) {\n        this._blink = bool;\n        if(this.active) {\n            if(bool) {\n                this.show();\n            }\n            else {\n                this.hide();\n            }\n        }\n    }\n\n    get blink() {\n        return this._blink;\n    }\n}","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '@lightningjs/core';\n\nexport default class ItemWrapper extends Lightning.Component {\n    static _template() {\n        return {\n            clipbox: true\n        }\n    }\n\n    create() {\n        if(this.children.length > 0) {\n            return;\n        }\n        const component = this.fireAncestors('$getChildComponent', {index: this.componentIndex});\n        component.isAlive = true;\n        const {w, h, margin, marginUp, marginBottom, marginRight, marginLeft} = this;\n        this.children = [{...component, w, h, margin, marginUp, marginRight, marginLeft, marginBottom}];\n        if(this.hasFocus()) {\n            this._refocus();\n        }\n    }\n\n    get component() {\n        return this.children[0] || this.fireAncestors('$getChildComponent', {index: this.componentIndex});\n    }\n\n    _setup() {\n        if(this.forceLoad) {\n            this.create();\n        }\n    }\n\n    _active() {\n        this.create();\n    }\n\n    _inactive() {\n        if(!this.forceLoad) {\n            this.children[0].isAlive = false;\n            this.fireAncestors('$childInactive', {child: this});\n            this.childList.clear();\n        }\n    }\n\n    _getFocused() {\n        return this.children && this.children[0] || this;\n    }\n}","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from \"@lightningjs/core\";\n\nexport default class KeyWrapper extends Lightning.Component {\n    static _template() {\n        return {\n            clipbox: true\n        }\n    }\n\n    _update() {\n        let currentKey = this.children && this.children[0];\n        if(currentKey && currentKey.action === this._key.data.action) {\n            currentKey.patch({\n                ...this._key\n            });\n        }\n        else {\n            this.children = [{type: this._key.keyType, ...this._key}];\n        }\n        if(this.hasFocus()) {\n            this._refocus();\n        }\n    }\n\n    set key(obj) {\n        this._key = obj;\n        if(this.active) {\n            this._update();\n        }\n    }\n\n    get key() {\n        return this._key;\n    }\n\n    _active() {\n        this._update();\n    }\n\n    _inactive() {\n        this.childList.clear();\n    }\n\n    _getFocused() {\n        return this.children && this.children[0] || this;\n    }\n}","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport {default as CollectionWrapper} from './CollectionWrapper.js';\nexport {default as Cursor} from './Cursor.js';\nexport {default as ItemWrapper} from './ItemWrapper.js';\nexport {default as KeyWrapper} from './KeyWrapper.js';\n\nexport const limitWithinRange = (num, min, max) => {\n    return Math.min(Math.max(num, min), max)\n}\n\nexport const isFunction = value => {\n    return typeof value === 'function'\n}\n\nexport const isNumber = value => {\n    return typeof value === 'number';\n}\n\nexport const isInteger = value => {\n    return (isNumber(value) && (value % 1) === 0);\n}\n\nexport const isFloat = value => {\n    return (isNumber(value) && (value % 1) !== 0);\n}","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '@lightningjs/core';\n\nimport Cursor from './helpers/Cursor.js';\n\nexport default class InputField extends Lightning.Component {\n    static _template () {\n        return {\n            PreLabel: {renderOffscreen: true},\n            PostLabel: {renderOffscreen: true},\n            Cursor: {type: Cursor, rect: true, w: 4, h: 54, x: 0, y: 0},\n        }\n    }\n\n    _construct() {\n        this._input = '';\n        this._previousInput = '';\n        this._description = '';\n        this._cursorX = 0;\n        this._cursorIndex = 0;\n        this._passwordMask = '*';\n        this._passwordMode = false;\n        this._autoHideCursor = true;\n    }\n\n    _init() {\n        this.tag('PreLabel').on('txLoaded', () => { \n            this._labelTxLoaded();\n        });\n        this.tag('PostLabel').on('txLoaded', () => {\n            this._labelTxLoaded\n        });\n    }\n\n    onInputChanged({input = ''}) {\n        let targetIndex = Math.max((input.length - this._input.length) + this._cursorIndex, 0);\n        this._input = input;\n        this._update(targetIndex);\n    }\n\n    toggleCursor(bool = !this._cursorVisible) {\n        this._cursorVisible = bool;\n        this.cursor[bool ? 'show' : 'hide']();\n    }\n\n    _labelTxLoaded() {\n        const preLabel = this.tag('PreLabel');\n        const cursor = this.tag('Cursor');\n        const postLabel = this.tag('PostLabel');\n        this.h = preLabel.renderHeight || postLabel.renderHeight;\n        cursor.x = preLabel.renderWidth + this._cursorX;\n        postLabel.x = cursor.x + cursor.w * (1 - cursor.mountX);\n\n        if(!this.autoHideCursor) {\n            this.toggleCursor(true);\n        }\n    }\n\n    _update(index = 0) {\n        const hasInput = this._input.length > 0;\n        let pre = this._description + '';\n        let post = '';\n\n        if(hasInput) {\n            pre = this._input.substring(0, index);\n            post = this._input.substring(index, this._input.length);\n            if(this._passwordMode){\n                pre = this._passwordMask.repeat(pre.length);\n                post = this._passwordMask.repeat(post.length);\n            }\n            this.toggleCursor(true);\n        }\n        else if(this._autoHideCursor){\n            this.toggleCursor(false);\n        }\n\n        this.patch({\n            PreLabel: {text: {text: pre}},\n            PostLabel: {text: {text: post}},\n        });\n\n        if(this.h === 0) {\n            this.tag('PreLabel').loadTexture();\n            this.h = this.tag('PreLabel').renderHeight;\n        }\n        this._cursorIndex = index;\n    }\n\n    _handleRight() {\n        this._update(Math.min(this._input.length, this._cursorIndex + 1));\n    }\n\n    _handleLeft() {\n        this._update(Math.max(0, this._cursorIndex - 1));\n    }\n\n    _firstActive() {\n        this._labelTxLoaded();\n        this._update();\n    }\n\n    get input() {\n        return this._input;\n    }\n\n    get hasInput() {\n        return this._input.length > 0;\n    }\n\n    get cursorIndex() {\n        return this._cursorIndex;\n    }\n\n    set inputText (obj) {\n        this._inputText = obj;\n        this.tag('PreLabel').patch({text: obj});\n        this.tag('PostLabel').patch({text: obj});\n    }\n\n    get inputText() {\n        return this._inputText;\n    }\n\n    set description(str) {\n        this._description = str;\n    }\n\n    get description() {\n        return this._description;\n    }\n\n    set cursor(obj) {\n        if(obj.x) {\n            this._cursorX = obj.x;\n            delete obj.x;\n        }\n        this.tag('Cursor').patch(obj);\n    }\n\n    get cursor() {\n        return this.tag('Cursor');\n    }\n\n    get cursorVisible() {\n        return this._cursorVisible;\n    }\n\n    set autoHideCursor(bool){\n        this._autoHideCursor = bool;\n    }\n\n    get autoHideCursor(){\n        return this._autoHideCursor;\n    }\n\n    set passwordMode(val){\n        this._passwordMode = val;\n    }\n\n    get passwordMode(){\n        return this._passwordMode;\n    }\n\n    set passwordMask(str) {\n        this._passwordMask = str;\n    }\n\n    get passwordmask() {\n        return this._passwordMask;\n    }\n}","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from \"@lightningjs/core\";\n\nexport default class Key extends Lightning.Component {\n    static _template() {\n        return {\n            Background: {\n                w: w => w, h: h => h, rect: true\n            },\n            Label: {\n                mount: 0.5, x: w => w / 2, y: h => h / 2\n            }\n        }\n    }\n\n    _construct() {\n        this._backgroundColors = {};\n        this._labelColors = {};\n    }\n\n    set data(obj) {\n        this._data = obj;\n        this._update();\n    }\n\n    get data() {\n        return this._data;\n    }\n\n    set labelText(obj) {\n        this._labelText = obj;\n        this.tag('Label').patch({text: obj});\n    }\n\n    get labelText() {\n        return this._labelText;\n    }\n\n    set label(obj) {\n        this.tag('Label').patch(obj);\n    }\n\n    get label() {\n        return this.tag('Label');\n    }\n\n    set labelColors(obj) {\n        this._labelColors = obj;\n        this._update();\n    }\n\n    get labelColors() {\n        return this._labelColors;\n    }\n\n    set backgroundColors(obj) {\n        this._backgroundColors = obj;\n        this._update();\n    }\n\n    get backgroundColors() {\n        return this._backgroundColors;\n    }\n\n    set background(obj) {\n        this.tag('Background').patch(obj);\n    }\n\n    get background() {\n        return this.tag('Background');\n    }\n\n    _update() {\n        if(!this.active) {\n            return;\n        }\n        const { label = '' } = this._data;\n        const hasFocus = this.hasFocus();\n\n        let {focused, unfocused = 0xff000000} = this._backgroundColors;\n        let {focused: labelFocused, unfocused: labelUnfocused = 0xffffffff} = this._labelColors;\n        \n        this.patch({\n            Background: {color: hasFocus && focused ? focused : unfocused},\n            Label: {text: {text: label}, color: hasFocus && labelFocused ? labelFocused : labelUnfocused}\n        });\n    }\n\n    _firstActive() {\n        this._update();\n    }\n\n    _focus() {\n        let {focused, unfocused = 0xff000000} = this._backgroundColors;\n        let {focused: labelFocused, unfocused: labelUnfocused = 0xffffffff} = this._labelColors;\n\n        this.patch({\n            Background: {smooth: {color: focused || unfocused}},\n            Label: {smooth: {color: labelFocused || labelUnfocused}}\n        });\n    }\n\n    _unfocus() {\n        let {unfocused = 0xff000000} = this._backgroundColors;\n        let {unfocused: labelUnfocused = 0xffffffff} = this._labelColors;\n\n        this.patch({\n            Background: {smooth: {color: unfocused}},\n            Label: {smooth: {color: labelUnfocused}}\n        });\n    }\n\n    static get width() {\n        return 80;\n    }\n\n    static get height() {\n        return 80;\n    }\n}","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from \"@lightningjs/core\";\nimport KeyWrapper from \"./helpers/KeyWrapper.js\";\nimport Key from \"./Key.js\";\n\nexport default class Keyboard extends Lightning.Component {\n    static _template() {\n        return {\n            Keys: {w: w => w}\n        }\n    }\n\n    _construct() {\n        this._input = '';\n        this._inputField = undefined;\n        this._maxCharacters = 56;\n        this.resetFocus();\n    }\n\n    resetFocus() {\n        this._columnIndex = 0;\n        this._rowIndex = 0;\n        this._previousKey = null;\n    }\n\n    _setup() {\n        this._keys = this.tag('Keys');\n        this._update();\n    }\n\n    _update() {\n        const {layouts, buttonTypes = {}, styling = {}} = this._config;\n        if(!this._layout || (this._layout && layouts[this._layout] === undefined)) {\n            console.error(`Configured layout \"${this._layout}\" does not exist. Picking first available: \"${Object.keys(layouts)[0]}\"`);\n            this._layout = Object.keys(layouts)[0];\n        }\n        const {horizontalSpacing = 0, verticalSpacing = 0, align = 'left'} = styling;\n        let rowPosition = 0;\n        const isEvent = /^[A-Z][A-Za-z0-9]{1}/;\n        const hasLabel = /\\:/;\n\n        if(buttonTypes.default === undefined) {\n            buttonTypes.default = Key;\n        }\n\n        this._keys.children = layouts[this._layout].map((row, rowIndex) => {\n            const {\n                x = 0,\n                margin = 0,\n                marginRight,\n                marginLeft,\n                marginTop,\n                marginBottom,\n                spacing: rowHorizontalSpacing = horizontalSpacing || 0,\n                align: rowAlign = align\n            } = styling[`Row${rowIndex+1}`] || {};\n\n            let keyPosition = 0;\n            let rowHeight = 0;\n            const rowKeys = row.map((key, keyIndex) => {\n                const origin = key;\n                let keyType = buttonTypes.default;\n                let action = 'Input';\n                let label = key;\n\n                if(isEvent.test(key)) {\n                    if(hasLabel.test(key)) {\n                        key = key.split(':');\n                        label = key[1].toString();\n                        key = key[0];\n                    }\n                    if(buttonTypes[key]) {\n                        keyType = buttonTypes[key];\n                        action = key.action || key;\n                    }\n                }\n\n                const keySpacing = keyType.margin || keyType.type.margin;\n                const {\n                    w = keyType.type.width || 0,\n                    h = keyType.type.height || 0,\n                    marginLeft = keyType.type.marginLeft || keySpacing || 0,\n                    marginRight = keyType.type.marginRight || keySpacing || rowHorizontalSpacing,\n                } = keyType;\n\n                rowHeight = h > rowHeight ? h : rowHeight;\n                const currentPosition = keyPosition + marginLeft;\n                keyPosition += marginLeft + w + marginRight;\n                return {ref: `Key-{${keyIndex + 1}}`, type: KeyWrapper, keyboard: this, x: currentPosition, w, h, key: {data: {origin, key, label, action}, w, h, ...keyType}}\n            });\n\n            let rowOffset = x + (marginLeft || margin);\n            let rowMount = 0;\n\n            if(this.w && rowAlign === 'center') {\n                rowOffset = this.w / 2;\n                rowMount = 0.5;\n            }\n\n            if(this.w && rowAlign === 'right') {\n                rowOffset = this.w - (marginRight || margin);\n                rowMount = 1;\n            }\n\n            const currentPosition = rowPosition + (marginTop|| margin);\n            rowPosition = currentPosition + rowHeight + (marginBottom || margin || verticalSpacing);\n            return {\n                ref: `Row-${rowIndex + 1}`,\n                x: rowOffset,\n                mountX: rowMount,\n                w: keyPosition,\n                y: currentPosition,\n                children: rowKeys\n            }\n        });\n        this._refocus();\n    }\n\n    _getFocused() {\n        return this.currentKeyWrapper || this;\n    }\n\n    _handleRight() {\n        return this.navigate('row', 1);\n    }\n\n    _handleLeft() {\n        return this.navigate('row', -1);\n    }\n\n    _handleUp() {\n        return this.navigate('column', -1);\n    }\n\n    _handleDown() {\n        return this.navigate('column', 1);\n    }\n\n    _handleKey({key, code = 'CustomKey'}) {\n        if(code === 'Backspace' && this._input.length === 0) {\n            return false;\n        }\n        if(key === ' ') {\n            key = 'Space';\n        }\n        const targetFound = this._findKey(key);\n        if(targetFound) {\n            this._handleEnter();\n        }\n        return targetFound;\n    }\n\n    _findKey(str) {\n        const rows = this._config.layouts[this._layout];\n        let i = 0, j = 0;\n        for(; i < rows.length; i++) {\n            for (j = 0; j < rows[i].length; j++) {\n                let key = rows[i][j];\n                if((str.length > 1 && key.indexOf(str) > -1) || key.toUpperCase() === str.toUpperCase()) {\n                    this._rowIndex = i;\n                    this._columnIndex = j;\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    _handleEnter() {\n        const {origin, action} = this.currentKey.data;\n        const event = {\n            index: this._input.length,\n            key: origin\n        };\n        if(this._inputField && this._inputField.cursorIndex) {\n            event.index = this._inputField.cursorIndex;\n        }\n        if(action !== 'Input') {\n            const split = event.key.split(':')\n            const call = `on${split[0]}`;\n            const eventFunction = this[call];\n            event.key = split[1];\n            if(eventFunction && eventFunction.apply && eventFunction.call) {\n                eventFunction.call(this, event);\n            }\n            this.signal(call, event);\n        }\n        else {\n            this.addAt(event.key, event.index);\n        }\n    }\n\n    _changeInput(input) {\n        if(input.length > this._maxCharacters) {\n            return;\n        }\n        const eventData = {\n            previousInput: this._input,\n            input: this._input = input\n        };\n        if(this._inputField && this._inputField.onInputChanged) {\n            this._inputField.onInputChanged(eventData);\n        }\n        this.signal('onInputChanged', eventData);\n    }\n\n    focus(str) {\n        this._findKey(str);\n    }\n\n    add(str) {\n        this._changeInput(this._input + str);\n    }\n\n    addAt(str, index) {\n        if(index > this._input.length - 1) {\n            this.add(str);\n        }\n        else if(index > -1) {\n            this._changeInput(this._input.substring(0, index) + str + this._input.substring(index, this._input.length));\n        }\n    }\n\n    remove() {\n        this._changeInput(this._input.substring(0, this._input.length - 1));\n    }\n\n    removeAt(index) {\n        if(index > this._input.length - 1) {\n            this.remove();\n        }\n        else if(index > -1) {\n            this._changeInput(this._input.substring(0, index-1) + this._input.substring(index, this._input.length));\n        }\n    }\n\n    clear() {\n        this._changeInput('');\n    }\n\n    layout(key) {\n        if(key === this._layout) {\n            return;\n        }\n        this._layout = key;\n        if(this.attached) {\n            this.resetFocus();\n            this._update();\n        }\n    }\n\n    inputField(component) {\n        if(component && component.isComponent) {\n            this._rowIndex = 0;\n            this._columnIndex = 0;\n            this._input = component.input !== undefined? component.input : '';\n            this._inputField = component;\n        }\n        else {\n            this._rowIndex = 0;\n            this._columnIndex = 0;\n            this._input = ''\n            this._inputField = undefined;\n        }\n    }\n\n    navigate(direction, shift) {\n        const targetIndex = (direction === 'row' ? this._columnIndex : this._rowIndex) + shift;\n        const currentRow = this.rows[this._rowIndex];\n        if(direction === 'row' && targetIndex > -1 && targetIndex < currentRow.children.length) {\n            this._previous = null;\n            return this._columnIndex = targetIndex;\n        }\n        if(direction === 'column' && targetIndex > -1 && targetIndex < this.rows.length ) {\n            const currentRowIndex = this._rowIndex;\n            const currentColumnIndex = this._columnIndex;\n            if(this._previous && this._previous.row === targetIndex) {\n                const tmp = this._previous.column;\n                this._previous.column = this._columnIndex;\n                this._columnIndex = tmp;\n                this._rowIndex = this._previous.row;\n            }\n            else {\n                const targetRow = this.rows[targetIndex];\n                const currentKey = this.currentKeyWrapper;\n                const currentRow = this.rows[this._rowIndex];\n                const currentX = currentRow.x - (currentRow.w * currentRow.mountX)  + currentKey.x;\n                const m = targetRow.children.map((key) => {\n                    const keyX = targetRow.x - (targetRow.w * targetRow.mountX) + key.x;\n                    if(keyX <= currentX && currentX < keyX + key.w) {\n                        return (keyX + key.w) - currentX;\n                    }\n                    if(keyX >= currentX && keyX <= currentX + currentKey.w) {\n                        return (currentX + currentKey.w) - keyX;\n                    }\n                    return -1;\n                });\n                let acc = -1;\n                let t = -1;\n\n                for(let i = 0; i < m.length; i++) {\n                    if(m[i] === -1 && acc > -1) {\n                        break;\n                    }\n                    if(m[i] > acc) {\n                        acc = m[i];\n                        t = i;\n                    }\n                }\n                if(t > -1) {\n                    this._rowIndex = targetIndex;\n                    this._columnIndex = t;\n                }\n            }\n            if(this._rowIndex !== currentRowIndex) {\n                this._previous = {column: currentColumnIndex, row: currentRowIndex};\n                return this._rowIndex = targetIndex;\n            }\n        }\n        return false;\n    }\n\n    onSpace({index}) {\n        this.addAt(' ', index);\n    }\n\n    onBackspace({index}) {\n        this.removeAt(index);\n    }\n\n    onClear() {\n        this.clear();\n    }\n\n    onLayout({key}) {\n        this.layout(key);\n    }\n\n    set config(obj) {\n        this._config = obj;\n        if(this.active) {\n            this._update();\n        }\n    }\n\n    get config() {\n        return this._config;\n    }\n\n    set currentInputField(component) {\n        this.inputField(component);\n    }\n\n    get currentInputField() {\n        return this._inputField;\n    }\n\n    set currentLayout(str) {\n        this.layout(str);\n    }\n\n    get currentLayout() {\n        return this._layout;\n    }\n\n    set maxCharacters(num) {\n        this._maxCharacters = num;\n    }\n\n    get maxCharacters() {\n        return this._maxCharacters;\n    }\n\n    get rows() {\n        return this._keys && this._keys.children;\n    }\n\n    get currentKeyWrapper() {\n        return this.rows && this.rows[this._rowIndex].children[this._columnIndex];\n    }\n\n    get currentKey() {\n        return this.currentKeyWrapper && this.currentKeyWrapper.key\n    }\n}","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CollectionWrapper, ItemWrapper } from './helpers';\n\nexport default class List extends CollectionWrapper {\n    plotItems() {\n        const items = this._items;\n        const wrapper = this.wrapper;\n        const {directionIsRow, main, mainDim, mainMarginTo, mainMarginFrom, cross, crossDim} = this._getPlotProperties(this._direction);\n        let crossPos = 0, crossSize = 0, position = 0;\n        const animateItems = [];\n\n        const viewboundMain = directionIsRow ? 1920 : 1080;\n        const viewboundCross = directionIsRow ? 1080 : 1920;\n        const renderContext = this.core.renderContext\n\n        const newChildren = items.map((item, index) => {\n            const sizes = this._getItemSizes(item);\n            position += (sizes[mainMarginFrom] || sizes.margin || 0);\n            \n            if(crossSize < sizes[crossDim]) {\n                crossSize = sizes[crossDim];\n            }\n            const ref = `IW-${item.assignedID}`;\n            let mainPos = position;\n            crossPos = item[cross] || crossPos;\n\n            let tmp = mainPos;\n            let tcp = crossPos;\n\n            const existingItemWrapper = wrapper.tag(ref);\n\n            if(existingItemWrapper && \n                ((existingItemWrapper.active && (crossPos !== existingItemWrapper[cross] || mainPos !== existingItemWrapper[main])) ||\n                (!existingItemWrapper.active && ((renderContext[`p${main}`] + wrapper[main] + mainPos <= viewboundMain) || (renderContext[`p${cross}`] + wrapper[cross] + crossPos <= viewboundCross))))){\n                tmp = existingItemWrapper[main];\n                tcp = existingItemWrapper[cross];\n                animateItems.push(index);\n            }\n            position += sizes[mainDim] + (sizes[mainMarginTo] || sizes.margin || this._spacing);\n            return {\n                ref,\n                type: ItemWrapper,\n                componentIndex: index,\n                forceLoad: this._forceLoad,\n                ...sizes,\n                [`assigned${main.toUpperCase()}`]: mainPos,\n                [`assigned${cross.toUpperCase()}`]: crossPos,\n                [main]: tmp,\n                [cross]: tcp\n            }\n        });\n        wrapper.children = newChildren;\n        animateItems.forEach((index) => {\n            const item = wrapper.children[index];\n            item.patch({\n                smooth: {x: item.assignedX, y: item.assignedY}\n            });\n        })\n        this._resizeWrapper(crossSize);\n    }\n\n    repositionItems() {\n        const wrapper = this.wrapper;\n        if(!wrapper && wrapper.children.length) {\n            return true;\n        }\n        const {main, mainDim, mainMarginTo, mainMarginFrom, cross, crossDim} = this._getPlotProperties(this._direction);\n        let crossPos = 0, crossSize = 0, position = 0;\n        wrapper.children.forEach((item) => {\n            const sizes = this._getItemSizes(item.component);\n            position += sizes[mainMarginFrom] || sizes.margin || 0;\n            crossPos = item[cross] || crossPos;\n\n            if(crossSize < sizes[crossDim]) {\n                crossSize = sizes[crossDim];\n            }\n            const mainPos = position;\n            position += sizes[mainDim] + (sizes[mainMarginTo] || sizes.margin || this.spacing);\n            item.patch({\n                [`assigned${main.toUpperCase()}`]: mainPos,\n                [`assigned${cross.toUpperCase()}`]: 0,\n                [main]: mainPos,\n                [cross]: crossPos,\n                ...sizes\n            });\n        });\n        this._resizeWrapper(crossSize);\n        super.repositionItems();\n    }\n}","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '@lightningjs/core';\n\nexport default class ScrollingLabel extends Lightning.Component {\n    static _template() {\n        return {\n            LabelClipper: {\n                w: w => w,\n                rtt: true, shader: {type: Lightning.shaders.FadeOut},\n                LabelWrapper: {\n                    Label: {renderOffscreen: true},\n                    LabelCopy: {renderOffscreen: true}\n                }\n            }\n        }\n    }\n\n    _construct() {\n        this._autoStart = true;\n        this._scrollAnimation = false;\n        this._fade = 30;\n        this._spacing = 30;\n        this._label = {};\n        this._align = 'left';\n\n        this._animationSettings = {\n            delay: 0.7,\n            repeat: -1,\n            stopMethod: 'immediate'\n        };\n    }\n\n    _init() {\n        const label = this.tag('Label');\n        label.on('txLoaded', () => {\n            this._update(label);\n            this._updateAnimation(label);\n            if(this._autoStart) {\n                this.start();\n            }\n        })\n    }\n\n    _update(label = this.tag('Label')) {\n        const renderWidth = label.renderWidth;\n        const noScroll = renderWidth <= this.w;\n        let labelPos = 0;\n        if(noScroll && this._align !== 'left') {\n            labelPos = (this.w - renderWidth) * ScrollingLabel.ALIGN[this._align];\n        }\n\n        this.tag('LabelClipper').patch({\n            h: label.renderHeight,\n            shader: {\n                right: noScroll ? 0 : this._fade\n            },\n            LabelWrapper: {\n                x: 0,\n                Label: {\n                    x: labelPos\n                },\n                LabelCopy: {\n                    x: renderWidth + this._spacing\n                }\n            }\n        });\n    }\n\n    _updateAnimation(label = this.tag('Label')) {\n        if(this._scrollAnimation) {\n            this._scrollAnimation.stopNow();\n        }\n        if(label.renderWidth > this.w) {\n            if(!this._scrollAnimation.duration) {\n                this._scrollAnimation.duration = label.renderWidth / 50;\n            }\n            this._scrollAnimation = this.animation({\n                ...this._animationSettings,\n                actions: [\n                    {t: 'LabelWrapper', p: 'x', v: {sm: 0, 0: 0, 1.0: -(label.renderWidth + this._spacing)}},\n                    {t: 'LabelClipper', p: 'shader.left', v: {0: 0, 0.2: this._fade, 0.8: this._fade, 1.0: 0}},\n                ]\n            });\n        }\n    }\n\n    start() {\n        if(this._scrollAnimation) {\n            this._scrollAnimation.stopNow();\n            this.tag('LabelCopy').patch({\n                text: this._label\n            });\n            this._scrollAnimation.start();\n        }\n    }\n\n    stop() {\n        if(this._scrollAnimation) {\n            this._scrollAnimation.stopNow();\n            this.tag('LabelCopy').text = '';\n        }\n    }\n\n    set label(obj) {\n        if(typeof obj === 'string') {\n            obj = {text: obj};\n        }\n        this._label = {...this._label, ...obj};\n        this.tag('Label').patch({\n            text: obj\n        });\n    }\n\n    get label() {\n        return this.tag('Label');\n    }\n\n    set align(pos) {\n        this._align = pos;\n    }\n\n    get align() {\n        return this._align;\n    }\n\n    set repeat(num) {\n        this.animationSettings = {repeat: num};\n    }\n\n    get repeat() {\n        return this._animationSettings.repeat;\n    }\n\n    set delay(num) {\n        this.animationSettings = {delay: num};\n    }\n\n    get delay() {\n        return this._animationSettings.delay;\n    }\n\n    set duration(num) {\n        this.animationSettings = {duration: num};\n    }\n\n    get duration() {\n        return this._animationSettings.duration;\n    }\n\n    set animationSettings(obj) {\n        this._animationSettings = {...this._animationSettings, ...obj};\n        if(this._scrollAnimation) {\n            this._updateAnimation();\n        }\n    }\n\n    get animationSettings() {\n        return this._animationSettings;\n    }\n}\n\nScrollingLabel.ALIGN = {\n    left: 0,\n    center: 0.5,\n    right: 1\n}","import {Lightning, Router} from '@lightningjs/sdk';\nimport {List} from \"@lightningjs/ui\";\n\nexport default class Main extends Lightning.Component{\n\n    static _template() {\n        return {\n            Lists: {\n                x: 100, y: 560, zIndex: 3, direction: \"column\", type: List, scroll: 0, scrollTransition: {duration: 0.4}\n            },\n        };\n    }\n\n    _init() {\n        this._index = 0;\n    }\n\n    _active() {\n        this.widgets.menu.visible = true;\n    }\n\n    set main(v) {\n        this.tag(\"Lists\").children = v;\n\n        let y = 0;\n        this.tag(\"Lists\").children.forEach(child => {\n            child.y = y;\n            y += child.constructor.height;\n        });\n    }\n\n    _focus() {\n        this.patch({\n            Lists: {\n                smooth: {y: [560, {duration: .2, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}]}\n            }\n        });\n    }\n\n    _unfocus() {\n        this.patch({\n            Lists: {\n                smooth: {y: [600, {duration: .4, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}]}\n            }\n        });\n    }\n\n    _handleUp() {\n        Router.focusWidget(\"menu\");\n    }\n\n    $firstItemCreated() {\n        this._refocus();\n    }\n\n    _getFocused() {\n        return this.tag(\"Lists\").children[this._index];\n    }\n\n}","export const getImgUrl = (imgPath, width = 185)=> {\n    return `//image.tmdb.org/t/p/w${width}${imgPath}`\n};\n\nexport const getFormattedDuration = (min)=> {\n    if (min != null || min !== 0){\n        const hours = Math.floor(min / 60);\n        const minutes = min % 60;\n        return hours !== 0 ? hours + \" hr\" + \" \" + minutes + \" min\" : minutes + \" min\";\n    }else{\n        return \"null\";\n    }\n}","import {Lightning, Router} from \"@lightningjs/sdk\";\n\nexport default class Button extends Lightning.Component {\n\n    static _template() {\n        return {\n            flex: {},\n            Background: {\n                flex: {},\n                w: 300,\n                rtt: true, shader: {type: Lightning.shaders.RoundedRectangle, radius: 14},\n                rect: true, color: 0xff404249,\n                transitions: {\n                    color: {duration: .6, timingFunction: 'cubic-bezier(0.20, 1.00, 0.30, 1.00)'},\n                    scale: {duration: .6, timingFunction: 'cubic-bezier(0.20, 1.00, 0.30, 1.00)'}\n                },\n                Label: {\n                    flexItem: {marginLeft: 115, marginRight: 115, marginTop: 10, marginBottom: 7},\n                    text: {fontFace: \"SourceSansPro-Regular\", fontSize: 25},\n                    transitions: {\n                        color: {duration: .6, timingFunction: 'cubic-bezier(0.20, 1.00, 0.30, 1.00)'},\n                        scale: {duration: .6, timingFunction: 'cubic-bezier(0.20, 1.00, 0.30, 1.00)'}\n                    }\n                }\n            }\n        };\n    }\n\n    set label(v) {\n        this._label = v;\n\n        this.tag(\"Label\").patch({\n            text: {text: this._label}\n        });\n    }\n\n    _focus() {\n        this.patch({\n            Background: {\n                smooth: {color: 0xFFE50914},\n                Label: {\n                    smooth: {color: 0xffffffff},\n                }\n            }\n        });\n    }\n\n    _unfocus() {\n        this.patch({\n            Background: {\n                smooth: {color: 0xff404249},\n                Label: {\n                    smooth: {color: 0xffffffff},\n                }\n            }\n        });\n    }\n\n    _handleEnter() {\n       // const {id, media_type} = this._data;\n        Router.navigate('player', {keepAlive: false});\n    }\n\n}","import {Colors, Lightning} from \"@lightningjs/sdk\";\r\n\r\nexport default class TextWithBox extends Lightning.Component {\r\n\r\n    static _template() {\r\n        return {\r\n            flex: {},\r\n            Background: {\r\n                flex: {},\r\n                rtt: true, shader: {type: Lightning.shaders.RoundedRectangle, radius: 14},\r\n                rect: true, color: 0xFFE50914,\r\n                transitions: {\r\n                    color: {duration: .6, timingFunction: 'cubic-bezier(0.20, 1.00, 0.30, 1.00)'},\r\n                    scale: {duration: .6, timingFunction: 'cubic-bezier(0.20, 1.00, 0.30, 1.00)'}\r\n                },\r\n                Label: {\r\n                    flexItem: {marginLeft: 20, marginRight: 20, marginTop: 7, marginBottom: 7},\r\n                    text: {fontFace: \"SourceSansPro-Regular\", fontSize: 18, textColor: Colors('white').get(), fontStyle: 'bold'},\r\n                    transitions: {\r\n                        color: {duration: .6, timingFunction: 'cubic-bezier(0.20, 1.00, 0.30, 1.00)'},\r\n                        scale: {duration: .6, timingFunction: 'cubic-bezier(0.20, 1.00, 0.30, 1.00)'}\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    set label(v) {\r\n        this._label = v;\r\n\r\n        this.tag(\"Label\").patch({\r\n            text: {text: this._label}\r\n        });\r\n    }\r\n\r\n}","import {Colors, Lightning} from \"@lightningjs/sdk\";\r\n\r\nexport default class CustomTextBox extends Lightning.Component {\r\n\r\n    static _template() {\r\n        return {\r\n            flex: {},\r\n            Background: {\r\n                flex: {},\r\n                rtt: true, shader: {type: Lightning.shaders.RoundedRectangle, radius: 14},\r\n                rect: true, color: 0xFFE50914,\r\n                transitions: {\r\n                    color: {duration: .6, timingFunction: 'cubic-bezier(0.20, 1.00, 0.30, 1.00)'},\r\n                    scale: {duration: .6, timingFunction: 'cubic-bezier(0.20, 1.00, 0.30, 1.00)'}\r\n                },\r\n                Label: {\r\n                    flexItem: {marginLeft: 10, marginRight: 10, marginTop: 5, marginBottom: 0},\r\n                    text: {fontFace: \"SourceSansPro-Regular\", fontSize: 16, textColor: Colors('white').get(), fontStyle: 'bold'},\r\n                    transitions: {\r\n                        color: {duration: .6, timingFunction: 'cubic-bezier(0.20, 1.00, 0.30, 1.00)'},\r\n                        scale: {duration: .6, timingFunction: 'cubic-bezier(0.20, 1.00, 0.30, 1.00)'}\r\n                    }\r\n                },\r\n            }\r\n        };\r\n    }\r\n\r\n    set label(v) {\r\n        this._label = v;\r\n\r\n        this.tag(\"Label\").patch({\r\n            text: {text: this._label}\r\n        });\r\n    }\r\n\r\n}","import {Colors, Lightning, Utils} from '@lightningjs/sdk'\r\n\r\nexport default class ImageButton extends Lightning.Component {\r\n    static _template() {\r\n        return {\r\n            h: 80,\r\n            w: 80,\r\n            color: 0xff404249,\r\n            rect: true,\r\n            rtt: true, shader: {type: Lightning.shaders.RoundedRectangle, radius: 40},\r\n            Icon: {\r\n                w: 30,\r\n                h: 30,\r\n                x: 25,\r\n                y: 25,\r\n            },\r\n            Label: {\r\n                x: w => w / 2,\r\n                y: h => h / 2,\r\n                mount: 0.5,\r\n                text: {\r\n                    text: '',\r\n                    textColor: 0xff000000,\r\n                },\r\n            },\r\n        }\r\n    }\r\n\r\n    set index(v) {\r\n        this.x = v * 70\r\n    }\r\n\r\n    set icon(v) {\r\n        if (v) {\r\n            this.tag('Icon').src = Utils.asset('images/' + v + '.png')\r\n        }\r\n    }\r\n\r\n    set label(v) {\r\n        if (v) {\r\n            this.tag('Label').text.text = v\r\n        }\r\n    }\r\n\r\n    _handleEnter() {\r\n        this.action && this.fireAncestors(this.action)\r\n    }\r\n\r\n    _focus() {\r\n        this.setSmooth('color', 0xFFE50914)\r\n    }\r\n\r\n    _unfocus() {\r\n        this.setSmooth('color', 0xff404249)\r\n    }\r\n}\r\n","import {Colors, Img, Lightning, Router} from '@lightningjs/sdk';\nimport {getFormattedDuration, getImgUrl} from \"../lib/tools\";\nimport Button from \"../components/Button\";\nimport TextWithBox from \"../components/TextWithBox\";\nimport CustomTextBox from \"../components/CustomTextBox\";\nimport ImageButton from \"../components/ImageButton\";\n\nexport default class Details extends Lightning.Component{\n\n    static _template() {\n        return {\n            x: 68, y: 200,\n            flex: {direction: \"column\"},\n            Header: {\n                flex: {},\n                PosterAndButton: {\n                    flex: {direction: \"column\"},\n                    Poster: {\n                        flexItem: {marginRight: 40},\n                        w: 300, h: 450,\n                        shader: {type: Lightning.shaders.RoundedRectangle, radius: 16},\n                        Image: {\n                            w: w=>w, h: h=>h\n                        }\n                    },\n                    Button: {\n                        flexItem: {marginTop: 30},\n                        type: Button, label: \"Watch\"\n                    },\n                },\n                Details: {\n                    flex: {direction: \"column\"},\n                    x: 90,\n                    transitions: {\n                        x: {duration: 1, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}\n                    },\n                    IMDBRating: {\n                        flexItem: {},\n                        type: TextWithBox, label: \"★  7.9\"\n                    },\n                    ReleaseAndDuration: {\n                        y: 10,\n                        flex: {direction: \"row\"},\n                        ReleaseDate: {\n                            text: {\n                                text: \"02 October, 2021\",\n                                fontSize: 22,\n                            },\n                        },\n                        Duration: {\n                            x: 10,\n                            text: {textColor: Colors(\"white\").get(), text: \" •  1 hr 20 min\", fontSize: 22, fontFace: \"SourceSansPro-Regular\",  maxLines: 1},\n                        },\n                    },\n                    Title: {\n                        text: {fontSize: 64, fontFace: \"SourceSansPro-Bold\", wordWrapWidth: 960, maxLines: 2, lineHeight: 50}\n                    },\n                    Overview: {\n                        color: 0xFFD3D3D3, text: {fontSize: 22, fontFace: \"SourceSansPro-Regular\", wordWrapWidth: 960, lineHeight: 38}\n                    },\n                    GenreLayout: {\n                        y: 10,\n                        flex: {direction: \"row\"},\n                        GenreTitle: {\n                            flexItem: {},\n                            type: CustomTextBox, label: \"Genre\"\n                        },\n                        Genres: {\n                            x: 10,\n                            text: {textColor: Colors(\"white\").get(), fontSize: 20, fontFace: \"SourceSansPro-Regular\",  maxLines: 1},\n                        }\n                    },\n                    CastLayout: {\n                        y: 20,\n                        flex: {direction: \"row\"},\n                        CastTitle: {\n                            flexItem: {},\n                            type: CustomTextBox, label: \"Cast\"\n                        },\n                        Casts: {\n                            x: 10,\n                            text: {textColor: Colors(\"white\").get(), fontSize: 20, fontFace: \"SourceSansPro-Regular\",  maxLines: 1},\n                        }\n                    },\n                    DirectorLayout: {\n                        y: 30,\n                        flex: {direction: \"row\"},\n                        DirectorTitle: {\n                            flexItem: {},\n                            type: CustomTextBox, label: \"Director\"\n                        },\n                        Director: {\n                            x: 10,\n                            text: {textColor: Colors(\"white\").get(), fontSize: 20, fontFace: \"SourceSansPro-Regular\",  maxLines: 1},\n                        }\n                    },\n                    WriterLayout: {\n                        y: 40,\n                        flex: {direction: \"row\"},\n                        WriterTitle: {\n                            flexItem: {},\n                            type: CustomTextBox, label: \"Writer\"\n                        },\n                        Writer: {\n                            x: 10,\n                            text: {textColor: Colors(\"white\").get(), fontSize: 22, fontFace: \"SourceSansPro-Regular\",  maxLines: 1},\n                        }\n                    },\n                    LanguageLayout: {\n                        y: 50,\n                        flex: {direction: \"row\"},\n                        LanguageTitle: {\n                            flexItem: {},\n                            type: CustomTextBox, label: \"Language\"\n                        },\n                        Language: {\n                            x: 10,\n                            text: {textColor: Colors(\"white\").get(), fontSize: 22, fontFace: \"SourceSansPro-Regular\",  maxLines: 1},\n                        }\n                    },\n                }\n            }\n        };\n    }\n\n    _active() {\n        this.widgets.menu.visible = false;\n        this.application.emit(\"setItem\", this._details);\n        this.application.emit(\"page\", false);\n\n        this.patch({\n            Header: {\n                Details: {\n                    smooth: {x: 40}\n                }\n            }\n        });\n\n        this._refocus();\n    }\n\n    _inactive() {\n        this.tag(\"Details\").setSmooth(\"x\", 90);\n    }\n\n    set details(v) {\n        this._details = v[0];\n        this._credits = v[1];\n\n        const image = getImgUrl(this._details.poster, 500);\n\n        const genres = this._details.genres.map((genre, index) => {\n            if (index < 4) {return genre.name}\n        }).filter(item => item).join(\" • \");\n\n        const casts = this._credits.cast.map((cast, index) => {\n            if (index < 6) {return cast.name}\n        }).filter(item => item).join(\", \");\n\n        const directers = this._credits.crew.map((crew, index) => {\n            if (crew.known_for_department.toLowerCase().includes(\"direct\")){\n                if (index < 4) {return crew.name}\n            }\n        }).filter(item => item).join(\", \");\n\n        const writers = this._credits.crew.map((crew, index) => {\n            if (crew.known_for_department.toLowerCase().includes(\"writ\")){\n                if (index < 4) {return crew.name}\n            }\n        }).filter(item => item).join(\", \");\n\n        const languages = this._details.spokenLanguages.map((language, index) => {\n            if (index < 2) {return language.name}\n        }).filter(item => item).join(\", \");\n\n        this.patch({\n            Header: {\n                PosterAndButton: {\n                    Poster: {\n                        Image: {\n                            texture: Img(image).contain(300, 450)\n                        }\n                    },\n                },\n                Details: {\n                    IMDBRating: {\n                        label: \"★  \" + this._details.voteAverage\n                    },\n                    ReleaseAndDuration: {\n                        ReleaseDate: {\n                            text: {text: this._details.releaseDate.toDateString()}\n                        },\n                        Duration: {\n                            text: {text: \" •  \" + getFormattedDuration(this._details.runtime)}\n                        }\n                    },\n                    Title: {\n                        text: {text: this._details.title}\n                    },\n                    Overview: {\n                        text: {text: this._details.overview}\n                    },\n                    GenreLayout: {\n                        Genres: {\n                            text: {text: genres}\n                        },\n                    },\n                    CastLayout: {\n                        Casts:{\n                            text: {text: casts}\n                        }\n                    },\n                    DirectorLayout: {\n                        Director: {\n                            text: {text: directers}\n                        }\n                    },\n                    WriterLayout: {\n                        Writer: {\n                            text: {text: writers}\n                        }\n                    },\n                    LanguageLayout: {\n                        Language: {\n                            text: {text: languages}\n                        }\n                    }\n                }\n            }\n        });\n    }\n\n\n     /*duration(min){\n        if (min != null || min !== 0){\n            const hours = Math.floor(min / 60);\n            const minutes = min % 60;\n            return hours + \" hr\" + \" \" + minutes + \" min\";\n        }else{\n            return \"null\";\n        }\n    }*/\n\n    _handleUp() {\n        Router.focusWidget(\"MenuWithBackButton\");\n    }\n\n    _getFocused() {\n        return this.tag(\"Button\");\n    }\n\n}","import {Colors, Img, Lightning, Router} from '@lightningjs/sdk';\r\nimport {getFormattedDuration, getImgUrl} from \"../lib/tools\";\r\nimport Button from \"../components/Button\";\r\nimport TextWithBox from \"../components/TextWithBox\";\r\nimport CustomTextBox from \"../components/CustomTextBox\";\r\nimport ImageButton from \"../components/ImageButton\";\r\n\r\nexport default class TVDetails extends Lightning.Component{\r\n\r\n    static _template() {\r\n        return {\r\n            x: 68, y: 200,\r\n            flex: {direction: \"column\"},\r\n            Header: {\r\n                flex: {},\r\n                PosterAndButton: {\r\n                    flex: {direction: \"column\"},\r\n                    Poster: {\r\n                        flexItem: {marginRight: 40},\r\n                        w: 300, h: 450,\r\n                        shader: {type: Lightning.shaders.RoundedRectangle, radius: 16},\r\n                        Image: {\r\n                            w: w=>w, h: h=>h\r\n                        }\r\n                    },\r\n                    Button: {\r\n                        flexItem: {marginTop: 30},\r\n                        type: Button, label: \"Watch\"\r\n                    },\r\n                },\r\n                Details: {\r\n                    flex: {direction: \"column\"},\r\n                    x: 90,\r\n                    transitions: {\r\n                        x: {duration: 1, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}\r\n                    },\r\n                    IMDBRating: {\r\n                        flexItem: {},\r\n                        type: TextWithBox, label: \"★  7.9\"\r\n                    },\r\n                    ReleaseAndDuration: {\r\n                        y: 10,\r\n                        flex: {direction: \"row\"},\r\n                        ReleaseDate: {\r\n                            text: {\r\n                                text: \"2021-2022\",\r\n                                fontSize: 22,\r\n                            },\r\n                        },\r\n                        Duration: {\r\n                            x: 10,\r\n                            text: {textColor: Colors(\"white\").get(), text: \" •  1 hr 20 min\", fontSize: 22, fontFace: \"SourceSansPro-Regular\",  maxLines: 1},\r\n                        },\r\n                    },\r\n                    Title: {\r\n                        text: {fontSize: 64, fontFace: \"SourceSansPro-Bold\", wordWrapWidth: 960, maxLines: 2, lineHeight: 50}\r\n                    },\r\n                    Overview: {\r\n                        color: 0xFFD3D3D3, text: {fontSize: 22, fontFace: \"SourceSansPro-Regular\", wordWrapWidth: 960, lineHeight: 38}\r\n                    },\r\n                    GenreLayout: {\r\n                        y: 10,\r\n                        flex: {direction: \"row\"},\r\n                        GenreTitle: {\r\n                            flexItem: {},\r\n                            type: CustomTextBox, label: \"Genre\"\r\n                        },\r\n                        Genres: {\r\n                            x: 10,\r\n                            text: {textColor: Colors(\"white\").get(), fontSize: 20, fontFace: \"SourceSansPro-Regular\",  maxLines: 1},\r\n                        }\r\n                    },\r\n                    CastLayout: {\r\n                        y: 20,\r\n                        flex: {direction: \"row\"},\r\n                        CastTitle: {\r\n                            flexItem: {},\r\n                            type: CustomTextBox, label: \"Cast\"\r\n                        },\r\n                        Casts: {\r\n                            x: 10,\r\n                            text: {textColor: Colors(\"white\").get(), fontSize: 20, fontFace: \"SourceSansPro-Regular\",  maxLines: 1},\r\n                        }\r\n                    },\r\n                    CreatorLayout: {\r\n                        y: 30,\r\n                        flex: {direction: \"row\"},\r\n                        DirectorTitle: {\r\n                            flexItem: {},\r\n                            type: CustomTextBox, label: \"Creators\"\r\n                        },\r\n                        Creators: {\r\n                            x: 10,\r\n                            text: {textColor: Colors(\"white\").get(), fontSize: 20, fontFace: \"SourceSansPro-Regular\",  maxLines: 1},\r\n                        }\r\n                    },\r\n                    OriginalNetworkLayout: {\r\n                        y: 40,\r\n                        flex: {direction: \"row\"},\r\n                        WriterTitle: {\r\n                            flexItem: {},\r\n                            type: CustomTextBox, label: \"Original Network\"\r\n                        },\r\n                        OriginalNetwork: {\r\n                            x: 10,\r\n                            text: {textColor: Colors(\"white\").get(), fontSize: 22, fontFace: \"SourceSansPro-Regular\",  maxLines: 1},\r\n                        }\r\n                    },\r\n                    LanguageLayout: {\r\n                        y: 50,\r\n                        flex: {direction: \"row\"},\r\n                        LanguageTitle: {\r\n                            flexItem: {},\r\n                            type: CustomTextBox, label: \"Language\"\r\n                        },\r\n                        Language: {\r\n                            x: 10,\r\n                            text: {textColor: Colors(\"white\").get(), fontSize: 22, fontFace: \"SourceSansPro-Regular\",  maxLines: 1},\r\n                        }\r\n                    },\r\n                    TotalSeasonLayout: {\r\n                        y: 60,\r\n                        flex: {direction: \"row\"},\r\n                        LanguageTitle: {\r\n                            flexItem: {},\r\n                            type: CustomTextBox, label: \"Total Season\"\r\n                        },\r\n                        TotalSeasons: {\r\n                            x: 10,\r\n                            text: {textColor: Colors(\"white\").get(), fontSize: 22, fontFace: \"SourceSansPro-Regular\",  maxLines: 1},\r\n                        }\r\n                    },\r\n                    TotalEpisodeLayout: {\r\n                        y: 60,\r\n                        flex: {direction: \"row\"},\r\n                        LanguageTitle: {\r\n                            flexItem: {},\r\n                            type: CustomTextBox, label: \"Total Episodes\"\r\n                        },\r\n                        TotalEpisodes: {\r\n                            x: 10,\r\n                            text: {textColor: Colors(\"white\").get(), fontSize: 22, fontFace: \"SourceSansPro-Regular\",  maxLines: 1},\r\n                        }\r\n                    },\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    _active() {\r\n        this.widgets.menu.visible = false;\r\n        this.application.emit(\"setItem\", this._details);\r\n\r\n        this.patch({\r\n            Header: {\r\n                Details: {\r\n                    smooth: {x: 40}\r\n                }\r\n            }\r\n        });\r\n\r\n        this._refocus();\r\n    }\r\n\r\n    _inactive() {\r\n        this.tag(\"Details\").setSmooth(\"x\", 90);\r\n    }\r\n\r\n    set details(v) {\r\n        this._details = v[0];\r\n        this._credits = v[1];\r\n\r\n        const image = getImgUrl(this._details.poster, 500);\r\n\r\n        const genres = this._details.genres.map((genre, index) => {\r\n            if (index < 4) {return genre.name}\r\n        }).filter(item => item).join(\" • \");\r\n\r\n        const casts = this._credits.cast.map((cast, index) => {\r\n            if (index < 6) {return cast.name}\r\n        }).filter(item => item).join(\", \");\r\n\r\n        const creators = this._details.created_by.map((creator, index) => {\r\n            if (index < 4) {return creator.name}\r\n        }).filter(item => item).join(\", \");\r\n\r\n        const originalNetworks = this._details.original_network.map((network, index) => {\r\n            if (index < 4) {return network.name}\r\n        }).filter(item => item).join(\", \");\r\n\r\n        const languages = this._details.spokenLanguages.map((language, index) => {\r\n            if (index < 2) {return language.name}\r\n        }).filter(item => item).join(\", \");\r\n\r\n        this.patch({\r\n            Header: {\r\n                PosterAndButton: {\r\n                    Poster: {\r\n                        Image: {\r\n                            texture: Img(image).contain(300, 450)\r\n                        }\r\n                    },\r\n                },\r\n                Details: {\r\n                    IMDBRating: {\r\n                        label: \"★  \" + this._details.voteAverage\r\n                    },\r\n                    ReleaseAndDuration: {\r\n                        ReleaseDate: {\r\n                            text: {text: this.getYear(new Date(this._details.first_release_date).getFullYear(), new Date(this._details.last_release_date).getFullYear())}\r\n                        },\r\n                        Duration: {\r\n                            text: {text: \" •  \" + getFormattedDuration(this._details.runtime)}\r\n                        }\r\n                    },\r\n                    Title: {\r\n                        text: {text: this._details.title}\r\n                    },\r\n                    Overview: {\r\n                        text: {text: this._details.overview}\r\n                    },\r\n                    GenreLayout: {\r\n                        Genres: {\r\n                            text: {text: genres}\r\n                        },\r\n                    },\r\n                    CastLayout: {\r\n                        Casts:{\r\n                            text: {text: casts}\r\n                        }\r\n                    },\r\n                    CreatorLayout: {\r\n                        Creators: {\r\n                            text: {text: creators}\r\n                        }\r\n                    },\r\n                    OriginalNetworkLayout: {\r\n                        OriginalNetwork: {\r\n                            text: {text: originalNetworks}\r\n                        }\r\n                    },\r\n                    LanguageLayout: {\r\n                        Language: {\r\n                            text: {text: languages}\r\n                        }\r\n                    },\r\n                    TotalSeasonLayout: {\r\n                        TotalSeasons: {\r\n                            text: {text: this._details.total_seasons}\r\n                        }\r\n                    },\r\n                    TotalEpisodeLayout: {\r\n                        TotalEpisodes: {\r\n                            text: {text: this._details.total_episodes}\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    /*duration(min){\r\n       if (min != null || min !== 0){\r\n           const hours = Math.floor(min / 60);\r\n           const minutes = min % 60;\r\n           return hours + \" hr\" + \" \" + minutes + \" min\";\r\n       }else{\r\n           return \"null\";\r\n       }\r\n   }*/\r\n\r\n    getYear(firstReleaseDate, lastReleaseDate){\r\n        return firstReleaseDate === lastReleaseDate ? firstReleaseDate : firstReleaseDate + \"-\" + lastReleaseDate\r\n    }\r\n\r\n    _handleUp() {\r\n        Router.focusWidget(\"MenuWithBackButton\");\r\n    }\r\n\r\n    _getFocused() {\r\n        return this.tag(\"Button\");\r\n    }\r\n\r\n}","import { Lightning } from '@lightningjs/sdk'\n\nexport default class NoiseShader extends Lightning.shaders.WebGLDefaultShader {\n  constructor(context) {\n    super(context)\n    this._time = 0\n  }\n\n  set time(v) {\n    this._time = v\n    this.redraw()\n  }\n\n  setupUniforms(operation) {\n    super.setupUniforms(operation)\n\n    const owner = operation.shaderOwner\n    const renderPrecision = this.ctx.stage.getRenderPrecision()\n    this._setUniform('time', this._time, this.gl.uniform1f)\n    this._setUniform(\n      'resolution',\n      new Float32Array([owner._w * renderPrecision, owner._h * renderPrecision]),\n      this.gl.uniform2fv\n    )\n  }\n}\n\nNoiseShader.fragmentShaderSource = `\n    #ifdef GL_ES\n    precision lowp float;\n    #endif\n\n    #define PI 3.14159265359\n\n    varying vec2 vTextureCoord;\n    varying vec4 vColor;\n\n    uniform sampler2D uSampler;\n    uniform vec2 resolution;\n    uniform float time;\n\n    float random (in vec2 st, in float time) {\n      return fract(sin(dot(st.xy,\n                           vec2(12.9898,78.233)))\n                   * (43758.5453123 + time/10.0));\n    }\n\n    void main() {\n        vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n\n        float random = random(vTextureCoord.xy/2.5, time);\n        color = vec4(random * random * random * random);\n\n        gl_FragColor = color;\n    }\n`\n","import { Lightning } from '@lightningjs/sdk'\nimport NoiseShader from '../shader/NoiseShader'\n\nexport default class ErrorScreen extends Lightning.Component {\n  static _template() {\n    return {\n      w: w => w,\n      h: h => h,\n      Background: {\n        w: w => w,\n        h: h => h,\n        rect: true,\n        color: 0xff000000,\n        shader: {\n          type: NoiseShader,\n          time: 0,\n        },\n      },\n      Popup: {\n        x: w => w / 2,\n        y: h => h / 2,\n        mount: 0.5,\n        texture: Lightning.Tools.getRoundRect(700, 220, 8, 0, null, true, 0xbb000000),\n        flex: {\n          direction: 'column',\n          alignItems: 'center',\n        },\n        Title: {\n          flexItem: {\n            marginTop: 40,\n          },\n          text: {\n            text: 'ERROR',\n            fontSize: 50,\n          },\n        },\n        Subtitle: {\n          text: {\n            text: \"Failed To Open Video, Please Try Again!\",\n            fontSize: 35,\n          },\n        },\n      },\n    }\n  }\n\n  updateNoise() {\n    const time = new Date().getTime() % 1000\n    this.patch({\n      Background: {\n        shader: {\n          time,\n        },\n      },\n    })\n  }\n\n  _active() {\n    this._updateNoiseInterval = setInterval(() => this.updateNoise(), 100)\n  }\n\n  _inactive() {\n    clearInterval(this._updateNoiseInterval)\n  }\n}\n","export const formatTime = seconds => {\n  if (seconds === Infinity) return '--'\n  return (\n    ('0' + Math.floor(seconds / 60)).slice(-2) + ':' + ('0' + Math.floor(seconds % 60)).slice(-2)\n  )\n}\n\nexport const buttons = [\n  {\n    ref: 'PlayPause',\n    icon: 'play',\n    action: '$playPause',\n  },\n  {\n    icon: 'stop',\n    action: '$stop',\n  },\n  {\n    label: '|<',\n    action: '$previous',\n  },\n  {\n    label: '>|',\n    action: '$next',\n  },\n  {\n    icon: 'rewind',\n    action: '$rewind',\n  },\n  {\n    icon: 'ffwd',\n    action: '$forward',\n  },\n  {\n    ref: 'Mute',\n    icon: 'unmuted',\n    action: '$toggleMute',\n  },\n  {\n    ref: 'Loop',\n    icon: 'unloop',\n    action: '$toggleLoop',\n  },\n  {\n    ref: 'Resize',\n    icon: 'shrink',\n    action: '$toggleResize',\n  },\n  {\n    icon: 'reload',\n    action: '$reload',\n  },\n  {\n    ref: 'Visible',\n    icon: 'visible',\n    action: '$showHide',\n  },\n]\n\nexport const videos = [\n  'http://video.metrological.com/surfing.mp4'\n]\n","import { Lightning, Utils } from '@lightningjs/sdk'\r\n\r\nexport default class IconButton extends Lightning.Component {\r\n    static _template() {\r\n        return {\r\n            h: 60,\r\n            w: 60,\r\n            color: 0xff404249,\r\n            rect: true,\r\n            rtt: true,\r\n            shader: {type: Lightning.shaders.RoundedRectangle, radius: 30},\r\n            Icon: {\r\n                w: 20,\r\n                h: 20,\r\n                x: 20,\r\n                y: 20,\r\n            },\r\n            Label: {\r\n                x: w => w / 2,\r\n                y: h => h / 2,\r\n                mount: 0.5,\r\n                text: {\r\n                    text: '',\r\n                    textColor: 0xff000000,\r\n                },\r\n            },\r\n        }\r\n    }\r\n\r\n    set index(v) {\r\n        this.x = v * 70\r\n    }\r\n\r\n    set icon(v) {\r\n        if (v) {\r\n            this.tag('Icon').src = Utils.asset('images/' + v + '.png')\r\n        }\r\n    }\r\n\r\n    set label(v) {\r\n        if (v) {\r\n            this.tag('Label').text.text = v\r\n        }\r\n    }\r\n\r\n    _handleEnter() {\r\n        this.action && this.fireAncestors(this.action)\r\n    }\r\n\r\n    _focus() {\r\n        this.setSmooth('color', 0xFFE50914)\r\n    }\r\n\r\n    _unfocus() {\r\n        this.setSmooth('color', 0xff404249)\r\n    }\r\n}\r\n","import {Colors, Lightning} from '@lightningjs/sdk'\nimport { formatTime } from '../lib/helpers'\n\nexport default class ProgressBar extends Lightning.Component {\n  static _template() {\n    return {\n      h: 30,\n      w: w => w,\n      Progress: {\n        color: 0xff404249,\n        rect: true,\n        w: w => w - 200,\n        h: h => h,\n        shader: {type: Lightning.shaders.RoundedRectangle, radius: 15},\n        InnerProgress: {\n          rect: true,\n          color: 0xFFE50914,\n          x: 8,\n          w: 0,\n          y: h => (h - 16) / 2,\n          h: 16,\n          shader: {type: Lightning.shaders.RoundedRectangle, radius: 8},\n        },\n      },\n      Timer: {\n        color: 0xFFE50914,\n        x: w => w - 180,\n        w: 180,\n        rect: true,\n        h: 30,\n        shader: {type: Lightning.shaders.RoundedRectangle, radius: 15},\n        Text: {\n          x: 32,\n          y: 3,\n          text: {\n            textColor: Colors('white').get(),\n            fontSize: 20,\n            fontStyle: \"bold\",\n          },\n        },\n      },\n    }\n  }\n\n  set progress(v) {\n    this.tag('Progress.InnerProgress').setSmooth('w', (this.renderWidth - 16) * v)\n  }\n\n  set duration(v) {\n    this._duration = v\n  }\n\n  get duration() {\n    return this._duration || 0.0001\n  }\n\n  set currentTime(v) {\n    const ratio = Math.round((v / this.duration) * 1000) / 1000\n    this.tag('Progress.InnerProgress').setSmooth(\n      'w',\n      (this.tag('Progress').renderWidth - 16) * ratio\n    )\n    this.tag('Timer.Text').text = [formatTime(v || 0), formatTime(this.duration || 0)].join(' / ')\n  }\n}\n","import {Img, Lightning, Router} from \"@lightningjs/sdk\";\nimport {getImgUrl} from \"./lib/tools\";\n\nexport default class Background extends Lightning.Component{\n    static _template() {\n        return {\n            Backgrounds: {\n                BackgroundA: {\n                    colorTop: 0xff717171, colorBottom: 0xff000000, scale: 1.2, alpha: 0,\n                    transitions: {\n                        zIndex: {duration: 2, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'},\n                        alpha: {duration: 2, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'},\n                        scale: {duration: 2, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}\n                    }\n                },\n                BackgroundB: {\n                    colorTop: 0xff717171, colorBottom: 0xff000000,\n                    transitions: {\n                        zIndex: {duration: 2, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'},\n                        alpha: {duration: 2, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'},\n                        scale: {duration: 2, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}\n                    }\n                }\n            }\n        };\n    }\n\n    _init() {\n        this._backgroundIndex = 0;\n\n        this.application.on(\"setItem\", (item)=> {\n            if (item === this._item) {\n                return;\n            }\n\n            this._item = item;\n\n            const image = getImgUrl(item.background, 1280);\n\n            this.tag(\"Backgrounds\").children[this._backgroundIndex].patch({\n                texture: Img(image).contain(1920, 1080),\n                smooth: {scale: 1, alpha: 1}\n            });\n\n            this._backgroundIndex ^= 1;\n\n            this.tag(\"Backgrounds\").children[this._backgroundIndex].patch({\n                texture: null,\n                smooth: {scale: 1.2, alpha: 0}\n            });\n        });\n\n        this.application.on(\"page\", (isHide)=>{\n            if (isHide){\n                this.tag(\"Backgrounds\").patch({\n                    visible: false\n                })\n            }else {\n                this.tag(\"Backgrounds\").patch({\n                    visible: true\n                })\n            }\n        })\n    }\n}","import {Lightning, Router, Utils, VideoPlayer} from '@lightningjs/sdk'\nimport ErrorScreen from '../components/ErrorScreen.js'\nimport { videos } from '../lib/helpers'\nimport IconButton from '../components/IconButton'\nimport ProgressBar from '../components/ProgressBar'\nimport Background from \"../Background\";\nimport ImageButton from \"../components/ImageButton\";\n\nconst bgColor = 0xff404249\nconst buttons = [\n    {\n        icon: 'play',\n        action: '$playPause',\n        ref: 'PlayPause',\n    },\n    {\n        icon: 'stop',\n        action: '$stop',\n    },\n]\nconst interfaceTimeout = 5000\n\nexport default class Player extends Lightning.Component {\n    static _template() {\n        return {\n            w: 1920,\n            h: 1080,\n            color: bgColor,\n            rect: true,\n            Text: {\n                x: w => w / 2,\n                y: h => h / 2,\n                mount: 0.5,\n                text: {\n                    text: 'Wait, Video Starts Soon!',\n                    textColor: 0xffffffff,\n                },\n            },\n            TopHeader: {\n                w: 1920,\n                h: 130,\n                rect: true,\n                color: 0xff404249,\n                flex: {direction: \"row\"},\n                BackButton: {\n                    x: 68,\n                    y: 30,\n                    type: ImageButton, icon: \"ic_back\"\n                },\n                Title: {\n                    x: 100,\n                    y: 45,\n                    text: {text: \"Hello How Are You?\", fontSize: 30, fontFace: \"SourceSansPro-Bold\", wordWrapWidth: 960, maxLines: 1}\n                },\n            },\n            ErrorScreen: {\n                type: ErrorScreen,\n                alpha: 0,\n            },\n            Ui: {\n                x: 20,\n                y: 910,\n                w: w => w - 40,\n                mountY: 1,\n                Buttons: {\n                    flex: { direction: 'row' },\n                },\n                ProgressBar: {\n                    y: 70,\n                    type: ProgressBar,\n                },\n            },\n        }\n    }\n\n    _init() {\n        this.tag\n        this._index = 0\n        this._videoIndex = 0\n        // Initially video control interface is visible\n        this._interfaceVisible = true\n        // This variable will store timeout id for the interface hide functionality\n        this._timeout = null\n        // Fill Ui.Buttons tag with buttons from the buttons array\n        this.tag('Ui.Buttons').children = buttons.map((button, index) => ({\n            type: IconButton,\n            icon: button.icon,\n            action: button.action,\n            ref: button.ref || 'Button' + index,\n            flexItem: { marginRight: 20 },\n        }))\n\n        this.$playPause(false)\n\n        this.application.emit(\"page\", true);\n    }\n\n    _toggleInterface(visible) {\n        this.widgets.visible = false;\n        this.patch({\n            Ui: {\n                smooth: {\n                    y: [visible ? 910 : 960],\n                    alpha: [visible ? 1 : 0],\n                },\n            },\n            TopHeader: {\n                smooth: {\n                    alpha: [visible ? 1 : 0],\n                },\n            }\n        })\n        this.tag('Ui')\n            .transition('y')\n            .on('finish', () => {\n                this._interfaceVisible = visible\n            })\n        if (visible) {\n            this._setInterfaceTimeout()\n        }\n    }\n\n    _setInterfaceTimeout() {\n        // Clear timeout if it already exists\n        if (this._timeout) {\n            clearTimeout(this._timeout)\n        }\n\n        this._timeout = setTimeout(() => {\n            this._toggleInterface(false)\n        }, interfaceTimeout)\n    }\n\n    _active() {\n        // Show video interface\n        this._toggleInterface(true)\n        // Set this object to receive VideoPlayer events\n        VideoPlayer.consumer(this)\n    }\n\n    _inactive() {\n        // Cleanup player and ui\n        VideoPlayer.clear()\n        this.patch({\n            color: bgColor,\n            Text: {\n                alpha: 1,\n            },\n            ErrorScreen: {\n                alpha: 0,\n            },\n        })\n        this.playing = false\n        this.tag('Ui.ProgressBar').duration = 0\n        this.tag('Ui.ProgressBar').currentTime = 0\n    }\n\n    _focus() {\n        // Show video interface\n        this._toggleInterface(true)\n    }\n\n    // Capture every key and toggle interface. If it is visible, pass event to event handlers\n    _captureKey() {\n        this._toggleInterface(true)\n        return !this._interfaceVisible\n    }\n\n    _handleUp() {\n        this._index = this._index - 1;\n    }\n\n    _handleLeft() {\n        this._index = Math.max(0, this._index - 1)\n    }\n\n    _handleRight() {\n        this._index = Math.min(this.tag('Ui.Buttons').children.length - 1, this._index + 1)\n    }\n\n    _getFocused() {\n        return this.tag('Ui.Buttons').children[this._index]\n    }\n\n    set playing(v) {\n        this.tag('Ui.Buttons.PlayPause').icon = v === true ? 'pause' : 'play'\n    }\n\n    // Button actions\n    $playPause(next = false) {\n        // If next is true, clear VideoPlayer (which also sets src to null)\n        next === true && VideoPlayer.clear()\n        if (!VideoPlayer.src || VideoPlayer.src === 'error-video-url') {\n            // Player first or second video of the videos list, with a chance of 33% to show error screen\n            this._videoIndex = (this._videoIndex + 1) % 2\n            const nextVideo = Math.random() > 0.66 ? 'error-video-url' : videos[this._videoIndex]\n            VideoPlayer.open(\"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4\")\n        } else {\n            VideoPlayer.playPause()\n        }\n    }\n\n    $stop() {\n        VideoPlayer.clear()\n    }\n\n    // Hooks for VideoPlayer events\n    $videoPlayerPlaying() {\n        this.patch({\n            smooth: {\n                color: [0x00000000],\n            },\n            Text: {\n                smooth: {\n                    alpha: [0],\n                },\n            },\n            ErrorScreen: {\n                smooth: {\n                    alpha: [0],\n                },\n            },\n        })\n        this.playing = true\n    }\n\n    $videoPlayerPause() {\n        this.playing = false\n    }\n\n    $videoPlayerAbort() {\n        this.patch({\n            smooth: {\n                color: [bgColor],\n            },\n            Text: {\n                smooth: {\n                    alpha: [1],\n                },\n            },\n        })\n        this.playing = false\n        this.tag('Ui.ProgressBar').duration = 0\n        this.tag('Ui.ProgressBar').currentTime = 0\n    }\n\n    $videoPlayerEnded() {\n        // When current video ends, open next video\n        this.$playPause(false)\n    }\n\n    $videoPlayerTimeUpdate() {\n        this.tag('Ui.ProgressBar').currentTime = VideoPlayer.currentTime\n    }\n\n    $videoPlayerLoadedMetadata() {\n        this.tag('Ui.ProgressBar').duration = VideoPlayer.duration\n    }\n\n    $videoPlayerError() {\n        this.patch({\n            ErrorScreen: {\n                smooth: {\n                    alpha: [1],\n                },\n            },\n            Text: {\n                smooth: {\n                    alpha: [0],\n                },\n            },\n        })\n    }\n}\n","import {Lightning, Router} from \"@lightningjs/sdk\";\n\nexport default class Error extends Lightning.Component{\n    static _template(){\n        return {\n            rect: true, w: 1920, h: 1080,\n            color: 0xffb70606,\n            Label:{\n                x: 100, y: 100,\n                text:{\n                    text:'Error', fontSize:22\n                }\n            }\n        }\n    }\n\n    _handleEnter(){\n        Router.navigate(\"main\")\n    }\n\n    _focus(){\n        console.log(\"focus error page\")\n    }\n\n    set error(obj){\n        const {page, error} = obj;\n        console.log(page, error);\n\n        const errorMessage = `\nerror while loading page: ${page.constructor.name}\npress enter to navigate to home\n--\nloaded via hash: ${page[Symbol.for(\"hash\")]}\nresulted in route: ${page[Symbol.for(\"route\")]}\n--\n${error.toString()}`\n\n        this.tag(\"Label\").text = errorMessage;\n    }\n\n    easing(){\n        return \"up\";\n    }\n}","import { Lightning } from '@lightningjs/sdk';\n\nexport default class NotFound extends Lightning.Component{\n    static _template() {\n        return {\n           Label:{\n               x: 960, y: 530,\n               text:{\n                   text:'Page not found!'\n               }\n           }\n        };\n    }\n}","import {Lightning, Utils, Router, Colors} from \"@lightningjs/sdk\";\n\nexport default class Splash extends Lightning.Component{\n\n    static _template() {\n        return {\n            Background: {\n                w: 1920, h: 1080, colorBottom: 0xff000000, scale: 1.4,\n                src: Utils.asset(\"images/background.jpg\"),\n                transitions: {\n                    scale: {duration: 1, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}\n                }\n            },\n            Rectangle: {\n                w: 1920, h: 1080, color: 0xff000000, alpha: 0.8,\n                rect: true,\n            },\n            Logo: {\n                src: Utils.asset(\"images/logo.png\"),\n                mount: .5, x: 960, y: 640, alpha: 0.001,\n                //color: Colors('black').get(),\n                transitions: {\n                    alpha: {duration: 1, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'},\n                    y: {duration: 1, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}\n                }\n            },\n            Spinner: {\n                src: Utils.asset(\"images/spinner.png\"),\n                mountX: .5, x: 960, y: 920, alpha: 0.001, color: 0xaaffffff,\n                transitions: {\n                    alpha: {duration: 1, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}\n                }\n            }\n        };\n    }\n\n    _init() {\n        this.tag(\"Logo\").on(\"txLoaded\", ()=> {\n            this.tag(\"Logo\").setSmooth(\"alpha\", 1);\n            this.tag(\"Logo\").setSmooth(\"y\", 540);\n            this.tag(\"Background\").setSmooth(\"scale\", 1);\n        });\n\n        this.tag(\"Spinner\").on(\"txLoaded\", ()=> {\n            this.tag(\"Spinner\").setSmooth(\"alpha\", 1);\n            this._spinnerAnimation.start();\n        });\n\n        this.application.on(\"booted\", ()=> {\n             Router.navigate(\"movies\", false)\n        });\n\n        this._spinnerAnimation = this.animation({duration: 1, repeat: -1, actions: [\n            {t: 'Spinner', p: \"rotation\", sm: 0, v: function(t) {\n                    if (t < .125) {\n                        return 45 * (Math.PI/180);\n                    } else if (t < .250) {\n                        return 90 * (Math.PI/180);\n                    } else if (t < .375) {\n                        return 135 * (Math.PI/180);\n                    } else if (t < .500) {\n                        return 180 * (Math.PI/180);\n                    } else if (t < .625) {\n                        return 225 * (Math.PI/180);\n                    } else if (t < .750) {\n                        return 270 * (Math.PI/180);\n                    } else if (t < .875) {\n                        return 315 * (Math.PI/180);\n                    } else if (t < 1) {\n                        return 360 * (Math.PI/180);\n                    }\n                }}\n        ]});\n\n        setTimeout(()=> {\n            Router.navigate(\"movies\", false);\n        }, 3000);\n    }\n\n    _active() {\n        this.widgets.menu.visible = false;\n    }\n\n    _inactive() {\n        this._spinnerAnimation.stop()\n    }\n\n}","import {Movie, Tv} from \"./\";\nimport {getRuntime} from \"../api\";\n\nexport default class Container {\n    constructor(obj, type, genres){\n        this._page = obj.page;\n        this._total_results = obj.total_results;\n        this._type = type;\n        this._items = obj.results.map(item => {\n            switch (type) {\n                case \"movie\":\n                    let movie = new Movie(item, genres);\n                    //movie.runtime = runtime\n                    return movie;\n                case \"tv\":\n                    return new Tv(item, genres);\n            }\n        });\n    }\n\n    get page() {\n        return this._page;\n    }\n\n    get total() {\n        return this._total_results;\n    }\n\n    get type() {\n        return this._type;\n    }\n\n    get items() {\n        return this._items;\n    }\n}","export default class Movie {\n    constructor(obj,genres){\n        this._adult = obj.adult;\n        this._backdrop_path = obj.backdrop_path;\n        this._genres = obj.genre_ids.map(id => {\n            return genres.find(genre => {\n                return genre.id === id;\n            });\n        }).filter(item => item);\n        this._id = obj.id;\n        this._original_language = obj.original_language;\n        this._overview = obj.overview;\n        this._popularity = obj.popularity;\n        this._poster_path = obj.poster_path;\n        this._release_date = obj.release_date;\n        this._runtime = obj.runtime;\n        this._title = obj.title;\n        this._type = \"movie\";\n        this._video = obj.video;\n        this._vote_average = obj.vote_average;\n        this._vote_count = obj.vote_count;\n    }\n\n    get adult() {\n        return this._adult;\n    }\n\n    get background() {\n        return this._backdrop_path;\n    }\n\n    get genres(){\n        return this._genres;\n    }\n\n    get id() {\n        return this._id;\n    }\n\n    get originalLanguage() {\n        return this._original_language;\n    }\n\n    get overview() {\n        return this._overview;\n    }\n\n    get popularity() {\n        return this._popularity;\n    }\n\n    get poster() {\n        return this._poster_path;\n    }\n\n    get releaseDate() {\n        return this._release_date;\n    }\n\n    set runtime(min) {\n        this._runtime = min;\n    }\n\n    get runtime() {\n        return this._runtime;\n    }\n\n    get title() {\n        return this._title;\n    }\n\n    get type() {\n        return this._type;\n    }\n\n    get video() {\n        return this._video;\n    }\n\n    get voteAverage() {\n        return this._vote_average;\n    }\n\n    get voteCount() {\n        return this._vote_count;\n    }\n}","export default class Tv {\n    constructor(obj,genres){\n        this._backdrop_path = obj.backdrop_path;\n        this._first_air_date = obj.first_air_date;\n        this._genres = obj.genre_ids.map(id => {\n            return genres.find(genre => {\n                return genre.id === id;\n            });\n        }).filter(item => item);\n        this._id = obj.id;\n        this._name = obj.name;\n        this._origin_country = obj.origin_country;\n        this._original_language = obj.original_language;\n        this._original_name = obj.original_name;\n        this._overview = obj.overview;\n        this._popularity = obj.popularity;\n        this._poster_path = obj.poster_path;\n        this._title = obj.name;\n        this._type = \"tv\";\n        this._vote_average = obj.vote_average;\n        this._vote_count = obj.vote_count;\n    }\n\n    get background() {\n        return this._backdrop_path;\n    }\n\n    get firstAirDate() {\n        return this._first_air_date;\n    }\n\n    get genres(){\n        return this._genres;\n    }\n\n    get id() {\n        return this._id;\n    }\n\n    get name() {\n        return this._name;\n    }\n\n    get originalCountry() {\n        return this._origin_country;\n    }\n\n    get originalLanguage() {\n        return this._original_language;\n    }\n\n    get originalName() {\n        return this._original_name;\n    }\n\n    get overview() {\n        return this._overview;\n    }\n\n    get title() {\n        return this._title;\n    }\n\n    get type() {\n        return this._type;\n    }\n\n    get popularity() {\n        return this._popularity;\n    }\n\n    get poster() {\n        return this._poster_path;\n    }\n\n    get voteAverage() {\n        return this._vote_average;\n    }\n\n    get voteCount() {\n        return this._vote_count;\n    }\n}","export default class Details {\n    constructor(obj){\n        this._adult = obj.adult;\n        this._backdrop_path = obj.backdrop_path;\n        this._belong_to_collection = obj.belongs_to_collection;\n        this._budget = obj.budget;\n        this._genres = obj.genres;\n        this._homepage = obj.homepage;\n        this._id = obj.id;\n        this._imdb_id = obj.imdb_id;\n        this._original_language = obj.original_language;\n        this._original_title = obj.original_title;\n        this._overview = obj.overview;\n        this._popularity = obj.popularity;\n        this._poster_path = obj.poster_path;\n        this._production_companies = obj.production_companies;\n        this._production_countries = obj.production_countries;\n        this._release_date = new Date(obj.release_date || obj.first_air_date);\n        this._revenue = obj.revenue;\n        this._runtime = obj.runtime;\n        this._spoken_languages = obj.spoken_languages;\n        this._status = obj.status;\n        this._tagline = obj.tagline;\n        this._title = obj.title || obj.name;\n        this._video = obj._video;\n        this._vote_average = obj.vote_average;\n        this._vote_count = obj.vote_count;\n    }\n\n    get adult() {\n        return this._adult;\n    }\n\n    get background() {\n        return this._backdrop_path;\n    }\n\n    get belongToCollection() {\n        return this._belong_to_collection;\n    }\n\n    get budget() {\n        return this._budget;\n    }\n\n    get genres(){\n        return this._genres;\n    }\n\n    get homepage() {\n        return this._homepage;\n    }\n\n    get id() {\n        return this._id;\n    }\n\n    get imdbId() {\n        return this._imdb_id;\n    }\n\n    get originalLanguage() {\n        return this._original_language;\n    }\n\n    get originalTitle() {\n        return this._original_title;\n    }\n\n    get overview() {\n        return this._overview;\n    }\n\n    get popularity() {\n        return this._popularity;\n    }\n\n    get poster() {\n        return this._poster_path;\n    }\n\n    get productionCompanies() {\n        return this._production_companies;\n    }\n\n    get productionCountries() {\n        return this._production_countries;\n    }\n\n    get releaseDate() {\n        return this._release_date;\n    }\n\n    get revenue() {\n        return this._revenue;\n    }\n\n    get runtime() {\n        return this._runtime;\n    }\n\n    get spokenLanguages() {\n        return this._spoken_languages;\n    }\n\n    get status() {\n        return this._status;\n    }\n\n    get tagline() {\n        return this._tagline;\n    }\n\n    get title() {\n        return this._title;\n    }\n\n    get video() {\n        return this._video;\n    }\n\n    get voteAverage() {\n        return this._vote_average;\n    }\n\n    get voteCount() {\n        return this._vote_count;\n    }\n}","export default class Details {\r\n    constructor(obj){\r\n        this._adult = obj.adult;\r\n        this._backdrop_path = obj.backdrop_path;\r\n        this._belong_to_collection = obj.belongs_to_collection;\r\n        this._budget = obj.budget;\r\n        this._genres = obj.genres;\r\n        this._homepage = obj.homepage;\r\n        this._id = obj.id;\r\n        this._imdb_id = obj.imdb_id;\r\n        this._original_language = obj.original_language;\r\n        this._original_title = obj.original_title;\r\n        this._overview = obj.overview;\r\n        this._popularity = obj.popularity;\r\n        this._poster_path = obj.poster_path;\r\n        this._production_companies = obj.production_companies;\r\n        this._production_countries = obj.production_countries;\r\n        this._release_date = new Date(obj.release_date || obj.first_air_date);\r\n        this._revenue = obj.revenue;\r\n        this._runtime = obj.episode_run_time;\r\n        this._spoken_languages = obj.spoken_languages;\r\n        this._status = obj.status;\r\n        this._tagline = obj.tagline;\r\n        this._title = obj.title || obj.name;\r\n        this._video = obj._video;\r\n        this._vote_average = obj.vote_average;\r\n        this._vote_count = obj.vote_count;\r\n        this._created_by = obj.created_by;\r\n        this._first_release_date = obj.first_air_date;\r\n        this._last_release_date = obj.last_air_date;\r\n        this._total_seasons = obj.number_of_seasons;\r\n        this._total_episodes = obj.number_of_episodes;\r\n        this._original_network = obj.networks;\r\n    }\r\n\r\n    get adult() {\r\n        return this._adult;\r\n    }\r\n\r\n    get background() {\r\n        return this._backdrop_path;\r\n    }\r\n\r\n    get belongToCollection() {\r\n        return this._belong_to_collection;\r\n    }\r\n\r\n    get budget() {\r\n        return this._budget;\r\n    }\r\n\r\n    get genres(){\r\n        return this._genres;\r\n    }\r\n\r\n    get homepage() {\r\n        return this._homepage;\r\n    }\r\n\r\n    get id() {\r\n        return this._id;\r\n    }\r\n\r\n    get imdbId() {\r\n        return this._imdb_id;\r\n    }\r\n\r\n    get originalLanguage() {\r\n        return this._original_language;\r\n    }\r\n\r\n    get originalTitle() {\r\n        return this._original_title;\r\n    }\r\n\r\n    get overview() {\r\n        return this._overview;\r\n    }\r\n\r\n    get popularity() {\r\n        return this._popularity;\r\n    }\r\n\r\n    get poster() {\r\n        return this._poster_path;\r\n    }\r\n\r\n    get productionCompanies() {\r\n        return this._production_companies;\r\n    }\r\n\r\n    get productionCountries() {\r\n        return this._production_countries;\r\n    }\r\n\r\n    get releaseDate() {\r\n        return this._release_date;\r\n    }\r\n\r\n    get revenue() {\r\n        return this._revenue;\r\n    }\r\n\r\n    get runtime() {\r\n        return this._runtime;\r\n    }\r\n\r\n    get spokenLanguages() {\r\n        return this._spoken_languages;\r\n    }\r\n\r\n    get status() {\r\n        return this._status;\r\n    }\r\n\r\n    get tagline() {\r\n        return this._tagline;\r\n    }\r\n\r\n    get title() {\r\n        return this._title;\r\n    }\r\n\r\n    get video() {\r\n        return this._video;\r\n    }\r\n\r\n    get voteAverage() {\r\n        return this._vote_average;\r\n    }\r\n\r\n    get voteCount() {\r\n        return this._vote_count;\r\n    }\r\n\r\n    get created_by() {\r\n        return this._created_by;\r\n    }\r\n\r\n    get first_release_date() {\r\n        return this._first_release_date;\r\n    }\r\n\r\n    get last_release_date() {\r\n        return this._last_release_date;\r\n    }\r\n\r\n    get total_seasons() {\r\n        return this._total_seasons;\r\n    }\r\n\r\n    get total_episodes() {\r\n        return this._total_episodes;\r\n    }\r\n\r\n    get original_network() {\r\n        return this._original_network;\r\n    }\r\n}","export default class Details {\r\n    constructor(obj){\r\n        this._id = obj.id;\r\n        this._cast = obj.cast;\r\n        this._crew = obj.crew;\r\n    }\r\n\r\n    get id() {\r\n        return this._id;\r\n    }\r\n\r\n    get cast() {\r\n        return this._cast;\r\n    }\r\n\r\n    set cast(value) {\r\n        this._cast = value;\r\n    }\r\n\r\n    get crew() {\r\n        return this._crew;\r\n    }\r\n\r\n    set crew(value) {\r\n        this._crew = value;\r\n    }\r\n}","import {Img, Lightning} from \"@lightningjs/sdk\";\nimport {getImgUrl} from \"../../lib/tools\";\n\nexport default class Item extends Lightning.Component {\n\n    static _template() {\n        return {\n            w: Item.width, h: Item.height,\n            Poster: {\n                w: w=>w, h: h=>h, pivotY: .7, rtt: true,\n                shader: {type: Lightning.shaders.RoundedRectangle, radius: 10},\n                transitions: {\n                    w: {duration: .6, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'},\n                    h: {duration: .6, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}\n                },\n                Image: {\n                    w: w=>w, h: h=>h, scale: 1.2, color: 0xff2f2f2f,\n                    transitions: {\n                        w: {duration: .6, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'},\n                        h: {duration: .6, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}\n                    }\n                },\n                BorderLeft: {\n                    w: 2, h: h=>h, rect: true, color: 0x40ffffff\n                },\n                /*Rating: {\n                    mountX: .5, mountY: 1, x: w=>w / 2, y: 360,\n                    transitions: {\n                        y: {duration: .6, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}\n                    },\n                    texture: Lightning.Tools.getRoundRect(70, 70, 35, 0, 0x00ffffff, true, 0xff081C22),\n                    RatingNumber: {\n                        mount: .5, x: w=>w / 2 + 4, y: h=>h / 2 + 2,\n                        flex: {},\n                        Number: {\n                            text: {text: '0', fontSize: 26, fontFace: \"SourceSansPro-Bold\"}\n                        },\n                        Percentage: {\n                            flexItem: {marginTop: 6},\n                            text: {text: '%', fontSize: 12, fontFace: \"SourceSansPro-Regular\"}\n                        }\n                    },\n                    RatingCircle: {\n                        rect:true, color: 0x00ffffff, rtt:true, mount: .5, x: 36, y: 36, w: 60, h: 60, rotation: Math.PI * .5,\n                        shader: {\n                            type: CircleProgressShader, radius: 30, width: 3, angle: 0.0001, smooth: 0.005, color: 0xffd1215c, backgroundColor: 0xff204529\n                        }\n                    }\n                }*/\n            }\n        };\n    }\n\n    _init() {\n        /*this._angle = 0.001;\n        this._ratingNumber = 0;\n\n        this._focusAnimation = this.tag(\"Rating\").animation({\n            duration: 1.2, stopDuration: .2, stopMethod: \"immediate\", actions:[\n                {t: 'RatingCircle', p:'shader.angle', rv: 0.0001, v: () => {\n                        if (this._angle < this._item.voteAverage / 10) {\n                            this._angle += 0.01;\n                        }\n\n                        if (this._angle < 0.4) {\n                            this.tag(\"RatingCircle\").shader.color = 0xffd1215c;\n                        } else if (this._angle > 0.4 && this._angle < 0.6) {\n                            this.tag(\"RatingCircle\").shader.color = 0xffd2d531;\n                        } else if (this._angle > 0.6) {\n                            this.tag(\"RatingCircle\").shader.color = 0xff21d07a;\n                        }\n\n                        return this._angle;\n                    }},\n                {t: 'Number', p:'text.text', rv: 0, v: () => {\n                        if (this._ratingNumber < this._item.voteAverage * 10) {\n                            this._ratingNumber += 1;\n                        }\n                        return `${Math.floor(this._ratingNumber)}`;\n                    }}\n            ]\n        });*/\n    }\n\n    set item(v) {\n        this._item = v;\n\n        const image = getImgUrl(this._item.poster, 500);\n\n        this.patch({\n            Poster: {\n                Image: {\n                    texture: Img(image).contain(180 * 1.2, 270 * 1.2)\n                }\n            }\n        });\n    }\n\n    set index(v) {\n        this._index = v;\n\n        if (this._index < 8) {\n            this.tag(\"Image\").color = 0xffffffff;\n        }\n    }\n\n    _focus() {\n        this._angle = 0.001;\n        this._ratingNumber = 0;\n\n        this.patch({\n            Poster: {\n                smooth: {scale: 1.2},\n                Image: {\n                    smooth: {scale: 1}\n                },\n                /*Rating: {\n                    smooth: {y: 250}\n                }*/\n            }\n        });\n\n        //this._focusAnimation.start();\n        this.application.emit(\"setItem\", this._item);\n    }\n\n    _unfocus() {\n        this.patch({\n            Poster: {\n                smooth: {scale: 1},\n                Image: {\n                    smooth: {scale: 1.2}\n                },\n                /*Rating: {\n                    smooth: {y: 360}\n                }*/\n            }\n        });\n\n        //this._focusAnimation.stop();\n    }\n\n    static get width() {\n        return 180;\n    }\n\n    static get height(){\n        return 270;\n    }\n\n    static get offset() {\n        return 40;\n    }\n\n}","import { Lightning } from '@lightningjs/sdk'\n\nexport default class ItemWrapper extends Lightning.Component {\n    static _template() {\n        return {\n            clipbox: true\n        };\n    }\n\n    set index(v) {\n        this._index = v;\n    }\n\n    get index() {\n        return this._index;\n    }\n\n    set construct(v){\n        this._construct = v;\n    }\n\n    get construct() {\n        return this._construct;\n    }\n\n    set item(obj) {\n        this._item = obj;\n    }\n\n    get item() {\n        return this._item;\n    }\n\n    set lngItem(v) {\n        this._realItem = v;\n    }\n\n    get lngItem() {\n        return this._realItem;\n    }\n\n    get child(){\n        return this.children[0];\n    }\n\n    create() {\n        const item = this._item;\n        this.children = [{type: this._construct, item, index: this._index}];\n\n        // if item is flagged and has focus, notify parent\n        // that focuspath can be recalculated\n        if(this._notifyOnItemCreation && this.hasFocus()){\n            this._refocus();\n        }\n    }\n\n    _firstActive() {\n        this.create();\n\n        if(!ItemWrapper.FIRST_CREATED){\n            this.fireAncestors(\"$firstItemCreated\");\n            ItemWrapper.FIRST_CREATED = true;\n        }\n    }\n\n    _getFocused() {\n        // due to lazy creation there is the possibility that\n        // an component receives focus before the actual item\n        // is created, therefore we set a flag\n        if(!this.child){\n            this._notifyOnItemCreation = true;\n        }else{\n            return this.child;\n        }\n\n    }\n}\n\nItemWrapper.FIRST_CREATED = false;","import {Colors, Lightning, Router} from '@lightningjs/sdk';\nimport { ItemWrapper } from \"../\";\nimport Button from \"../Button\";\nimport {getFormattedDuration} from \"../../lib/tools\";\nimport {getRuntime} from \"../../lib/api\";\n\nexport default class List extends Lightning.Component {\n\n    static _template() {\n        return {\n            Items: {\n                y: 154, forceZIndexContext: true, boundsMargin: [500, 100, 500, 100],\n                transitions: {\n                    x: {duration: .3, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}\n                }\n            },\n            Focus: {\n                x: -32, y: 102, color: 0xFFE50914,\n                texture: Lightning.Tools.getRoundRect(236, 344, 16, 5, 0xffffffff, true, 0x00ffffff)\n            },\n            About: {\n                x: -32, y: 0, mountY: 1,\n                flex: {direction: \"column\"},\n                RowTrendingAndDuration: {\n                    flex: {direction: \"row\"},\n                    wordWrapWidth: 960,\n                    Trending: {\n                        text: {\n                            text: \"#Trending \",\n                            fontSize: 25,\n                            fontFace: \"SourceSansPro-Bold\",\n                            maxLines: 1,\n                            fontStyle: \"italic\",\n                        },\n                    },\n                    Duration: {\n                        x: 10,\n                        text: {textColor: Colors(\"white\").get(), text: \" •  1 hr 20 min\", fontSize: 22, fontFace: \"SourceSansPro-Regular\",  maxLines: 1},\n                    }\n                },\n                Title: {\n                    marginTop: 10,\n                    text: {fontSize: 50, fontFace: \"SourceSansPro-Bold\", wordWrapWidth: 960, maxLines: 1}\n                },\n                Genres: {\n                    flexItem: {marginTop: -10},\n                    color: 0xFFE50914,\n                    text: {fontSize: 22, fontFace: \"SourceSansPro-Regular\", wordWrapWidth: 960, maxLines: 1},\n                },\n                Overview: {\n                    color: 0xFFD3D3D3, text: {fontSize: 22, fontFace: \"SourceSansPro-Regular\", wordWrapWidth: 960, lineHeight: 38}\n                },\n            }\n        };\n    }\n\n    _construct() {\n        this._index = 0;\n    }\n\n    _init() {\n        this.tag(\"Title\").on(\"txLoaded\", ()=> {\n            this.tag(\"About\").setSmooth(\"y\", 90, {duration: 1, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'});\n        });\n\n        this.application.on(\"setItem\", async (item) => {\n            if (item === this._item) {\n                return;\n            }\n\n            this._item = item;\n\n            const genres = item.genres.map((genre, index) => {\n                if (index < 2) {\n                    return genre.name\n                }\n            }).filter(item => item).join(\" • \");\n\n            this.tag(\"About\").setSmooth(\"y\", 60, {duration: 0});\n\n            let randomColor = this.randomColor;\n            this.patch({\n                Focus: {\n                    color: randomColor,\n                },\n                About: {\n                    RowTrendingAndDuration: {\n                        Trending: {\n                            text: {\n                                textColor: randomColor,\n                                text: \"#Popular \" + (this._index + 1)\n                            }\n                        },\n                        Duration: {\n                            text: {text: \" •  \" + getFormattedDuration(await getRuntime(item.type, item.id))}\n                        }\n                    },\n                    Title: {\n                        text: {text: item.title}\n                    },\n                    Genres: {\n                        text: {text: genres}\n                    },\n                    Overview: {\n                        text: {text: item.overview}\n                    }\n                }\n            });\n        });\n    }\n\n    get activeItem() {\n        return this.tag(\"Items\").children[this._index];\n    }\n\n    set container(v){\n        this._container = v;\n    }\n\n    get container(){\n        return this._container;\n    }\n\n    set itemConstruct(v) {\n        this._itemConstruct = v;\n    }\n\n    get itemConstruct(){\n        return this._itemConstruct;\n    }\n\n    get getRealComponent() {\n        return this.activeItem.child;\n    }\n\n    get realWidth() {\n        let construct = this._itemConstruct;\n        return this._items.length * (construct.width + construct.offset)\n    }\n\n    set items(v) {\n        let construct = this._itemConstruct;\n        this._items = v;\n\n        //@warn: since we lazy create all the items\n        // we need to set the itemWrapper flag to false\n        // so it can notify that the first item is created\n        ItemWrapper.FIRST_CREATED = false;\n\n        this.tag(\"Items\").patch({\n            children: this._createItems({items: this._items, construct})\n        });\n    }\n\n    get items() {\n        return this._items;\n    }\n\n    get randomColor(){\n        let colorNameArray = [\"white\", \"magenta\", \"yellow\", \"green\", \"blue\", \"cyan\"];\n        const random = Math.floor(Math.random() * colorNameArray.length);\n        return Colors(colorNameArray[random]).get();\n    }\n\n    _createItems({items, construct}) {\n        return items.map((item, index) => {\n            return {\n                type: ItemWrapper,\n                construct,\n                index: index,\n                item: item,\n                x: index * (construct.width + construct.offset),\n                w: construct.width,\n                h: construct.height\n            };\n        })\n    }\n\n    _animateToSelected(index = this._index) {\n        this.tag(\"Items\").children.forEach((item, idx) => {\n            const child = item.child;\n\n            if (child) {\n                if (idx > index - 1 && idx < index + 8) {\n                    child.tag(\"Image\").setSmooth(\"color\", 0xffffffff);\n                } else if (idx === index - 1 || idx === index + 8) {\n                    child.tag(\"Image\").setSmooth(\"color\", 0xff2f2f2f);\n                }\n            }\n        });\n\n        this.tag(\"Items\").setSmooth(\"x\", -this.activeItem.finalX);\n    }\n\n    _focus() {\n        this.patch({\n            smooth: {x: [0, {duration: .2, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}]},\n            Focus: {\n                smooth: {alpha: [1, {duration: .4, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}]}\n            },\n            About: {\n                smooth: {\n                    x: [-32, {duration: .2, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}],\n                    y: [90, {duration: .2, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}]\n                }\n            }\n        });\n\n        this._animateToSelected();\n    }\n\n    _unfocus() {\n        this.patch({\n            smooth: {x: [-32, {duration: .4, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}]},\n            Focus: {\n                smooth: {alpha: [0, {duration: .2, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}]}\n            },\n            About: {\n                smooth: {\n                    y: [130, {duration: .4, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}],\n                    x: [0, {duration: .4, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}]\n                }\n            }\n        });\n\n        this.stage.gc();\n    }\n\n    _handleLeft() {\n        if (this._index > 0) {\n            this.select({direction:-1});\n        } else {\n            return false;\n        }\n    }\n\n    _handleRight() {\n        if (this._index < this.tag(\"Items\").children.length - 1) {\n            this.select({direction:1});\n        } else {\n            return false;\n        }\n    }\n\n    _handleEnter() {\n        const item = this.activeItem.item;\n        Router.navigate(`details/${item.type}/${item.id}`, {keepAlive: true});\n    }\n\n    setIndex(index){\n        this._index = index;\n        this._animateToSelected();\n        this._refocus();\n    }\n\n    select({direction}) {\n        this._index += direction;\n        this._animateToSelected();\n    }\n\n    $itemCreatedForFocus(){\n        this.application.updateFocusPath();\n    }\n\n    _getFocused(){\n        return this.activeItem;\n    }\n\n    static get height() {\n        return 560;\n    }\n}","import {Container, Credits, Details, TVDetails} from \"./models\";\nimport {Item, List} from \"../components\";\n\nconst apiKey = `66683917a94e703e14ca150023f4ea7c`;\nconst listComponents = new Map();\nconst itemComponents = new Map();\n\nlet stage;\nlet genres;\n\nlistComponents.set(\"movie\", List);\nlistComponents.set(\"tv\", List);\n\nitemComponents.set(\"movie\", Item);\nitemComponents.set(\"tv\", Item);\n\nexport const init = (stageInstance) =>{\n    stage = stageInstance;\n};\n\nexport const getMovies = async()=> {\n    const movies = await _getPopular(\"movie\");\n    const models = [movies];\n    return _lists(models);\n};\n\nexport const getSportMovies = async()=> {\n    const movies = await _getSportMovies(\"movie\");\n    const models = [movies];\n    return _lists(models);\n};\n\nconst _getSportMovies = async(type)=> {\n    if (!genres) {\n        genres = await _getGenres();\n    }\n\n    return _getMovieSportsData(`/search/${type}`).then(response => {\n        return new Container(response, type, genres);\n    });\n};\n\nexport const getTv = async()=> {\n    const tv = await _getPopular(\"tv\");\n    const models = [tv];\n    return _lists(models);\n};\n\nexport const getDetails = async(type, id)=> {\n    const itemDetails =  await _get(`/${type}/${id}`).then(response => {\n        return type === \"movie\" ? new Details(response) : new TVDetails(response);\n    });\n\n    const credits = await _get(`/${type}/${id}/credits`).then(response => {\n        return new Credits(response);\n    });\n\n    /*console.log(movieDetails)\n    console.log(credits)*/\n\n    return [itemDetails, credits]\n};\n\nexport const getRuntime = async(type, id)=> {\n    return await _get(`/${type}/${id}`).then(response => {\n        return type === \"movie\" ? response.runtime : response.episode_run_time;\n    });\n};\n\nconst _getGenres = async()=> {\n    const movie = await _get(`/genre/movie/list`).then(response => {\n        return response.genres;\n    });\n\n    const tv = await _get(`/genre/tv/list`).then(response => {\n        return response.genres;\n    });\n\n    return [...movie, ...tv]\n};\n\nexport const setGenres = (data)=> {\n    genres = data;\n};\n\nconst _getPopular = async(type)=> {\n    if (!genres) {\n        genres = await _getGenres();\n    }\n\n    return _get(`/${type}/popular`).then(response => {\n        return new Container(response, type, genres);\n    });\n};\n\nconst _get = (url,params)=> {\n    let params_str = `?api_key=${apiKey}`;\n\n    for (let key in params) {\n        if (params.hasOwnProperty(key)) {\n            params_str += \"&\" + key + \"=\" + encodeURIComponent(params[key]);\n        }\n    }\n\n    return fetch(`https://api.themoviedb.org/3${url}${params_str}`, {\n        'Accept': 'application/json'\n    }).then(response => {\n        if (!response.ok) throw \"Response not ok\";\n        return response.json();\n    }).catch(error => {\n        console.error('Error loading ' + url, error);\n        throw error;\n    })\n};\n\nconst _getMovieSportsData = (url,params)=> {\n    let params_str = `?api_key=${apiKey}&query=sport&include_adult=false`;\n\n    for (let key in params) {\n        if (params.hasOwnProperty(key)) {\n            params_str += \"&\" + key + \"=\" + encodeURIComponent(params[key]);\n        }\n    }\n\n    console.log(`https://api.themoviedb.org/3${url}${params_str}`);\n\n    return fetch(`https://api.themoviedb.org/3${url}${params_str}`, {\n        'Accept': 'application/json'\n    }).then(response => {\n        if (!response.ok) throw \"Response not ok\";\n        return response.json();\n    }).catch(error => {\n        console.error('Error loading ' + url, error);\n        throw error;\n    })\n};\n\nconst _lists = (models = []) => {\n    if(!Array.isArray(models)){\n        models = [models];\n    }\n    return models.map(list => {\n        return stage.c({\n            type: listComponents.get(list.type),\n            itemConstruct: itemComponents.get(list.type),\n            items: list.items\n        });\n    });\n};","import {Router, TV} from \"@lightningjs/sdk\";\n\nimport {\n    NotFound, Error, Main, Details, Splash, TVDetails, Player\n} from '../pages';\nimport {getDetailPage, getDetails, getMovies, getSportMovies, getTv} from \"./api\";\n\n\n\n// export default () =>{\n//     Router.root('splash', Splash);\n//\n//     Router.route('movies', Main);\n//     Router.route('tv', Main);\n//     Router.route('details/:itemType/:itemId', Details);\n//\n//     Router.start();\n// }\n\nexport default {\n    root: \"splash\",\n    routes: [\n        {\n            path: 'splash',\n            component: Splash\n        },\n        /*{\n            path: 'home',\n            component: Main,\n            before: async(page)=>{\n                const main = await getMovies();\n                page.main = main;\n            },\n            widgets:[\"Menu\"],\n        },*/\n        {\n            path: 'movies',\n            component: Main,\n            before: async(page)=>{\n                const main = await getMovies();\n                page.main = main;\n            },\n            widgets:[\"Menu\"],\n        },\n        {\n            path: 'tvshows',\n            component: Main,\n            before: async (page) =>{\n                const main = await getTv();\n                page.main = main;\n            },\n            widgets:[\"Menu\"],\n        },\n        {\n            path: 'sports',\n            component: Main,\n            before: async(page)=>{\n                const main = await getSportMovies();\n                page.main = main;\n            },\n            widgets:[\"Menu\"],\n        },\n        {\n            path: 'details/movie/:itemId',\n            component: Details,\n            before: async (page, {itemId}) =>{\n                const details = await getDetails(\"movie\", itemId);\n                page.details = details;\n            },\n            widgets:[\"MenuWithBackButton\"],\n        },\n        {\n            path: 'details/tv/:itemId',\n            component: TVDetails,\n            before: async (page, {itemId}) =>{\n                const details = await getDetails(\"tv\", itemId);\n                page.details = details;\n            },\n            widgets:[\"MenuWithBackButton\"],\n        },\n        {\n            path: 'player',\n            component: Player,\n        },\n        {\n            path: '*',\n            component: NotFound,\n        },\n        {\n            path: '!',\n            component: Error\n        }\n    ],\n}\n\n/*\nexport const applyPlayerModel = (item) => {\n    const {id, title, name, media_type, images: {backdrops}} = item;\n    const backdropPath = backdrops.length > 0 ? backdrops[Math.min(1, backdrops.length-1)].file_path : '';\n    return {\n        id,\n        title: media_type === 'tv' ? name : title,\n        backdrop: `http://image.tmdb.org/t/p/original/${backdropPath}`\n    }\n}*/\n","import {Colors, Lightning, Router, Utils} from '@lightningjs/sdk';\n\nexport default class Menu extends Lightning.Component {\n\n    static _template() {\n        return {\n            TopHeader: {\n                flex: {direction: \"row\"},\n                Logo: {\n                    w: 214,\n                    h: 52,\n                    src: Utils.asset(\"images/logo.png\"),\n                },\n                MenuItems: {\n                    x: 100,\n                    Items: {\n                        //y: 68,\n                        flex: {},\n                    },\n                    Focus: {\n                        rect: true, colorLeft: 0xFFE50914, colorRight: 0xFFE50914,\n                        h: 6, y: 39,\n                        rtt: true, shader: {type: Lightning.shaders.RoundedRectangle, radius: 3},\n                        transitions: {\n                            alpha: {duration: .3, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'},\n                            w: {duration: .3, timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'}\n                        }\n                    }\n                }\n            },\n        };\n    }\n\n    _init() {\n        this._index = 0;\n    }\n\n    get activeItem() {\n        return this.tag(\"Items\").children[this._index];\n    }\n\n    _handleDown() {\n        Router.restoreFocus();\n        this._selectedChild.selected = true\n    }\n\n    _handleLeft() {\n        if (this._index > 0) {\n            this._select(-1);\n        }\n    }\n\n    _handleRight() {\n        //console.log(this.tag(\"Items\").children.length)\n        if (this._index < this.tag(\"Items\").children.length - 1) {\n            this._select(1);\n        }\n    }\n\n    _focus() {\n        this.tag(\"Focus\").w = 0;\n        this.tag(\"Focus\").setSmooth(\"alpha\", 1);\n        this._animateToSelected();\n    }\n\n    _unfocus() {\n        this.tag(\"Focus\").setSmooth(\"alpha\", 0);\n    }\n\n    _select(direction) {\n        this._index += direction;\n        if (this._index < this.tag(\"Items\").children.length) {\n            this._animateToSelected();\n        }\n    }\n\n    _animateToSelected() {\n        this.tag(\"Focus\").patch({\n            smooth: {x: this.activeItem.finalX, w: this.activeItem.finalW}\n        });\n    }\n\n    _handleEnter() {\n        if(this.activeItem.id === 'exit') {\n            this.application.closeApp();\n        }\n        else {\n            Router.navigate(`${this.activeItem.id}`, false);\n            Router.restoreFocus();\n        }\n    }\n\n    _getFocused(){\n        return this.activeItem;\n    }\n\n    _setup() {\n        this._items = ['Movies', 'TV Shows', 'Sports', 'Exit'];\n        const items = this._items.map((item) => {\n            return { type: MenuItem, label: item, selected: false, id: item.toLocaleLowerCase()};\n        });\n        this.tag('Items').add(items);\n    }\n\n    _onActivated(page) {\n        const list = this.tag('Items');\n        const currentRouteId  = page[Router.symbols['route']].toLocaleLowerCase();\n\n        for (let i = 0; i < list.children.length; i++) {\n            list.children[i].selected = list.children[i]._id === currentRouteId\n            if (list.children[i]._id === currentRouteId){\n                this._selectedChild = list.children[i];\n            }\n        }\n    }\n\n}\n\nclass MenuItem extends Lightning.Component {\n\n    static _template() {\n        return {\n            flexItem: {marginRight: 25},\n            text: {text: \"Home\", fontSize: 25, fontFace: \"SourceSansPro-Regular\", fontStyle: \"bold\"}\n        };\n    }\n\n    set label(v) {\n        this._label = v;\n\n        this.patch({\n            text: {text: this._label}\n        });\n    }\n\n    set id(v) {\n        this._id = v.replace(/ /g, \"\");\n    }\n\n    get id() {\n        return this._id;\n    }\n\n    set selected(bool) {\n        if (bool){\n            this.patch({\n                text: {textColor: 0xFFE50914, alpha: 0.6}\n            });\n        }else {\n            this.patch({\n                text: {textColor: Colors('white').get(), alpha: 1}\n            });\n        }\n        this._selected = bool;\n    }\n\n    get selected() {\n        return this._selected;\n    }\n\n    _focus() {\n        this.patch({\n            text: {textColor: 0xFFE50914}\n        });\n    }\n\n    _unfocus() {\n        this.patch({\n            text: {textColor: Colors('white').get()}\n        });\n    }\n}","import {Lightning, Router, Utils} from '@lightningjs/sdk';\r\nimport ImageButton from \"../components/ImageButton\";\r\n\r\nexport default class MenuWithBackButton extends Lightning.Component {\r\n\r\n    static _template() {\r\n        return {\r\n            TopHeader: {\r\n                flex: {direction: \"row\"},\r\n                BackButton: {\r\n                    type: ImageButton, icon: \"ic_back\"\r\n                },\r\n\r\n            },\r\n        };\r\n    }\r\n\r\n    _init() {\r\n        this._index = 0;\r\n    }\r\n\r\n    _handleDown() {\r\n        Router.restoreFocus();\r\n    }\r\n\r\n    _focus() {\r\n        this.patch({\r\n            TopHeader: {\r\n                BackButton:{\r\n                    smooth: {color: 0xFFE50914}\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    _unfocus() {\r\n        this.patch({\r\n            TopHeader: {\r\n                BackButton:{\r\n                    smooth: {color: 0xff404249}\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    _handleEnter() {\r\n        Router.back();\r\n    }\r\n\r\n}","import {Lightning, Router, Utils} from '@lightningjs/sdk';\r\nimport ImageButton from \"../components/ImageButton\";\r\n\r\nexport default class MenuWithBackButton extends Lightning.Component {\r\n\r\n    static _template() {\r\n        return {\r\n            TopHeader: {\r\n                flex: {direction: \"row\"},\r\n                BackButton: {\r\n                    type: ImageButton, icon: \"ic_back\"\r\n                },\r\n                Title: {\r\n                    x: 20,\r\n                    y: 25,\r\n                    text: {text: \"Hello How Are You?\", fontSize: 25, fontFace: \"SourceSansPro-Bold\", wordWrapWidth: 960, maxLines: 1}\r\n                },\r\n            },\r\n        };\r\n    }\r\n\r\n    _init() {\r\n        this._index = 0;\r\n    }\r\n\r\n    _handleDown() {\r\n        Router.restoreFocus();\r\n    }\r\n\r\n    _focus() {\r\n        this.patch({\r\n            TopHeader: {\r\n                BackButton:{\r\n                    smooth: {color: 0xFFE50914}\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    _unfocus() {\r\n        this.patch({\r\n            TopHeader: {\r\n                BackButton:{\r\n                    smooth: {color: 0xff404249}\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    _handleEnter() {\r\n        Router.back();\r\n    }\r\n\r\n}","import { Utils, Router } from '@lightningjs/sdk';\nimport routes from \"./lib/routes\";\nimport {init as initApi} from \"./lib/api\"\nimport {Menu, MenuWithBackButton} from \"./widgets\"\nimport Background from \"./Background\";\nimport {getActivePage, getActiveRoute} from \"@lightningjs/sdk/src/Router/utils/router\";\n\nexport default class App extends Router.App {\n    static getFonts() {\n        return [\n            {family: 'SourceSansPro-Regular', url: Utils.asset('fonts/SourceSansPro-Regular.ttf'), descriptors: {}},\n            {family: 'SourceSansPro-Black', url: Utils.asset('fonts/SourceSansPro-Black.ttf'), descriptors: {}},\n            {family: 'SourceSansPro-Bold', url: Utils.asset('fonts/SourceSansPro-Bold.ttf'), descriptors: {}}\n        ];\n    }\n\n    // when App instance is initialized we call the routes\n    // this will setup all pages and attach them to there route\n    _setup() {\n        initApi(this.stage);\n        Router.startRouter(routes, this);\n\n    }\n\n    static _template() {\n        return {\n            Background: {\n                type: Background, visible: true\n            },\n            // we MUST spread the base-class template\n            // if we want to provide Widgets.\n            ...super._template(),\n            Widgets: {\n                Menu:{\n                    type: Menu, x: 68, y: 30, zIndex: 99, visible: false\n                },\n                MenuWithBackButton:{\n                    type: MenuWithBackButton, x: 68, y: 30, zIndex: 99, visible: true\n                },\n            },\n            Loading: {}\n        };\n    }\n\n    /**\n     * Show app close dialogue\n     * @private\n     */\n    _handleAppClose(){\n        console.log(\"Close app\")\n    }\n}","import { Launch } from '@lightningjs/sdk'\nimport App from './App.js'\n\nexport default function() {\n    return Launch(App, ...arguments)\n}"],"names":["settings","subscribers","initSettings","appSettings","platformSettings","publish","key","value","forEach","subscriber","dotGrab","obj","undefined","keys","split","i","length","Object","get","type","fallback","val","has","set","subscribe","callback","push","unsubscribe","index","findIndex","cb","splice","clearSubscribers","getOwnPropertyNames","prepLog","args","colors","Info","Debug","Warn","Error","Array","from","shift","info","Settings","console","log","apply","arguments","debug","error","warn","method","context","result","e","then","Promise","resolve","reject","sendMetric","event","params","Log","initMetrics","config","metrics","app","page","user","media","errorMetric","message","code","visible","Metric","events","options","reduce","name","Metrics","types","url","abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","interruptbegin","interruptend","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","timeupdate","volumechange","waiting","sourceObject","setup","ready","doSetup","getOwnPropertyDescriptor","__defineGetter__","__defineSetter__","timeout","delay","clearTimeout","setTimeout","basePath","proxyUrl","initUtils","ensureUrlWithProtocol","makeFullStaticPath","window","location","pathname","path","asset","relPath","makeQueryString","test","protocol","origin","charAt","cleanUpPathName","substr","slice","parts","indexOf","pop","join","operator","map","encodeURIComponent","initProfile","lng","mediaUrl","initMediaPlayer","Mediaplayer","Lightning","Component","_construct","_skipRenderToTexture","_metrics","_textureMode","_template","Video","VideoWrap","VideoTexture","pivot","texture","textures","StaticTexture","skipRenderToTexture","v","textureMode","videoView","tag","_init","videoEls","document","getElementsByTagName","videoEl","createElement","setAttribute","style","position","zIndex","display","visibility","body","appendChild","_createVideoTexture","eventHandlers","_registerListeners","handler","currentTime","fire","videoElement","addEventListener","_deregisterListeners","removeEventListener","_attach","_detach","close","stage","gl","glTexture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","videoTexture","source","w","width","h","height","_startUpdatingVideoTexture","_updateVideoTexture","videoWidth","active","Date","getTime","frameCount","webkitDecodedFrameCount","mustUpdate","_lastFrame","_lastTime","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","texImage2D","RGBA","UNSIGNED_BYTE","videoTextureView","videoHeight","expectedAspectRatio","realAspectRatio","scaleX","scaleY","_stopUpdatingVideoTexture","forceRenderUpdate","_updatingVideoTexture","on","removeListener","clearColor","clear","COLOR_BUFFER_BIT","updateSettings","_consumer","consumer","getMediaplayerSettings","assign","Utils","equalValues","_stream","stream","keySystem","navigator","requestMediaKeySystemAccess","id","keySystemAccess","createMediaKeys","createdMediaKeys","setMediaKeys","src","open","catch","Hls","isSupported","_hls","liveDurationInfinity","loadSource","attachMedia","_setHide","hide","_setVideoArea","videoPos","setSmooth","videoPosition","application","noVideo","getAttribute","removeAttribute","load","_clearSrc","playPause","isPlaying","doPause","doPlay","muted","loop","_getState","reload","getPosition","setPosition","pos","getDuration","duration","seek","time","absolute","_videoPos","patch","smooth","x","y","precision","getRenderPrecision","left","Math","round","top","_fireConsumer","_equalInitData","buf1","buf2","byteLength","dv1","Int8Array","dv2","_setState","video","mediaKeys","_previousInitData","initData","_states","Playing","$enter","$exit","Paused","localCookie","constructor","forceCookies","_checkIfLocalStorageWorks","getItem","_getItemLocalStorage","setItem","_setItemLocalStorage","removeItem","_removeItemLocalStorage","_clearLocalStorage","_getItemCookie","_setItemCookie","_removeItemCookie","_clearCookies","localStorage","t","cookie","match","RegExp","replace","o","r","toUTCString","initStorage","namespace","lc","hasRegex","isWildcard","hasLookupId","isNamedGroup","stripRegex","route","char","createRegister","flags","reg","Map","getOwnPropertySymbols","Request","hash","navArgs","storeCaller","_hash","_storeCaller","_register","_isCreated","_isSharedInstance","_cancelled","_copiedHistoryState","isObject","isBoolean","symbols","store","cancel","register","_route","provider","_provider","providerType","_providerType","_page","isCreated","isSharedInstance","isCancelled","copiedHistoryState","Route","acc","isFunction","_cfg","request","component","widgets","cache","hook","beforeNavigate","getFloor","getRoutesByFloor","floor","matches","routes","entries","getRouteByHash","getUrlParts","candidates","hashParts","regexStore","filter","isMatching","regMatches","fullRoute","regex","lookupId","substring","routeParts","j","routePart","hashPart","routeMatches","exec","storeId","routeRegex","expression","modifiers","toLowerCase","sort","a","routeExists","getValuesFromHash","getNamedGroup","storage","decodeURIComponent","getOption","stack","prop","hasOwnProperty","createRoute","preventStorage","bootRequest","after","createRequest","getHashByName","to","getRouteByName","hasDynamicGroup","query","objectToQueryString","keepActivePageAlive","isString","getRoutes","routeOptions","keepAlive","isArray","ucfirst","activeWidget","getReferences","widgetsHost","widget","ref","updateWidgets","configured","emit","state","getWidgetByName","getByRef","focusWidget","setActiveWidget","restoreFocus","getActiveWidget","instance","createComponent","c","history","updateHistory","getActiveHash","forceNavigateStore","activeRoute","toStore","locationInHistory","stateObject","getStateObject","getActivePage","routerConfig","getRouterConfig","prev","getHistoryState","record","replaceHistoryState","historyState","getHistory","setHistory","arr","isMergeableObject","isNonNullObject","isSpecial","stringValue","prototype","toString","call","isReactElement","canUseSymbol","Symbol","for","REACT_ELEMENT_TYPE","$$typeof","emptyTarget","cloneUnlessOtherwiseSpecified","clone","deepmerge","defaultArrayMerge","target","concat","element","getMergeFunction","customMerge","getEnumerableOwnPropertySymbols","symbol","propertyIsEnumerable","getKeys","propertyIsOnObject","object","property","_","propertyIsUnsafe","mergeObject","destination","arrayMerge","sourceIsArray","targetIsArray","sourceAndTargetTypesMatch","all","deepmergeAll","array","next","deepmerge_1","cjs","warned","deprecated","force","Locale","__enabled","fetch","resp","json","loadFromObject","setLanguage","lang","language","tr","__trObj","trObj","fallbackLanguage","values","str","LocalizedString","String","format","sub","string","arg","VersionLabel","rect","color","mount","Text","text","fontSize","lineHeight","_firstActive","version","sdkVersion","loadTexture","renderWidth","renderHeight","FpsIndicator","Tools","getRoundRect","Background","Counter","textAlign","_setup","interval","threshold","fps","lastFps","fpsCalculator","dt","off","setInterval","showFps","bind","clearInterval","abs","bgColor","meta","translations","initLanguage","file","response","setTranslations","default","translationsObj","registry","eventListeners","timeouts","intervals","targets","timeoutId","clearTimeouts","intervalId","clearIntervals","targetIndex","fn","removeEventListeners","_event","getRgbaComponents","argb","g","b","mergeColors","c1","c2","p","r1","g1","b1","a1","r2","g2","b2","a2","calculateAlpha","getArgbNumber","rgba","max","min","argbToHSLA","col","s","l","maxMin","hslaToARGB","hsla","minMax","sextant","fract","minMaxFract","mid1","mid2","white","black","red","green","blue","yellow","cyan","magenta","normalizedColors","addColors","colorsToAdd","cleanUpNormalizedColors","initColors","normalizeColorToARGB","targetColor","check","hex","Color","generate","alpha","percentage","darker","hsl","lighter","saturation","lightness","hue","degrees","mix","AppInstance","defaultOptions","canvas2d","defaultFontFace","customFontFaces","fontLoader","fonts","family","urls","descriptors","fontFace","FontFace","add","promise","App","appData","innerHeight","Application","Deepmerge","canvas","loadFonts","getFonts","locale","getLocale","loadLanguage","loadColors","loaded","forceZIndexContext","showVersion","childList","_refocus","packageInfo","FpsCounter","_handleBack","closeApp","_handleExit","onClose","Registry","remove","cleanupFonts","gc","destroy","delete","focus","_focussed","_getFocused","pagesHost","rootHash","updateHash","beforeEachRoute","afterEachRoute","components","initialised","activePage","activeHash","lastAcceptedHash","previousState","mixin","pages","children","step","preventDefault","bootRouter","appInstance","isPage","getConfigMap","init","cleanHash","isComponentConstructor","root","boot","bootComponent","storeComponent","getComponent","mustUpdateLocationHash","size","updateConfig","onRequestResolved","cleanUp","setActivePage","navigateQueue","lazyDestroy","destroyOnBack","isFromHistory","backtrack","doCleanup","_routedType","scale","getActiveRoute","getLastHash","setLastHash","getPreviousState","getRootHash","getBootRequest","Element","toUpperCase","isPromise","routerSettings","isObj","getQueryStringParams","resumeHash","getResumeHash","parse","getQuery","search","hashParams","urlParams","URLSearchParams","fromHistory","expires","resume","queryParams","dataHooks","execProvider","before","emitProvided","addPersistData","now","urlValues","pageData","k","persist","isPageExpired","hasProvider","getProvider","fade","transition","crossFade","moveOnAxes","axis","direction","bounds","up","down","right","executeTransition","pageIn","pageOut","pageTransition","easing","hasCustomTransitions","smoothIn","smoothInOut","transitionsDisabled","Transitions","expired","loader","handleError","isConstruct","provide","mustReuse","currentRoute","loadType","navigate","opt","RoutedApp","Pages","Loading","Label","Widgets","_widget","_handleKey","Router","focusPage","forcedHash","startRouter","registerListener","start","getHash","bootKey","isDirectLoad","res","queue","handleHashChange","failedHash","handleBootError","setHash","override","queueId","resolveHashChange","contents","module","level","isNaN","_handleAppClose","hashLastPart","isNavigating","isProcessing","initRouter","go","back","setupRoutes","defaultChannels","number","description","entitled","program","title","startTime","ageRating","channels","randomChannel","random","currentChannel","callbacks","methods","getChannel","channel","getProgram","setChannel","newChannel","find","initTV","initPurchase","billingUrl","PinInput","shader","shaders","RoundedRectangle","radius","Nr","textColor","verticalAlign","nr","_timeout","PinDialog","Dialog","Msg","Code","pin","_pin","maskedPin","fill","msg","_msg","parseInt","Pin","_handleEnter","submit","unlocked","contextItems","initPin","pinDialog","contextCheck","includes","show","ApplicationInstance","child","locked","plugins","profile","mediaPlayer","initVideoPlayer","ads","initAds","router","tv","purchase","_videoEl","isVisible","getVideoPlaybackQuality","totalVideoFrames","stop","adsEnabled","_playingAds","playingAds","fireOnConsumer","skipTime","playAfterSeek","hooks","videoPlayerPlugin","deregisterEventListeners","withPrecision","fireHook","customLoader","customUnloader","unloader","setupVideoTag","platformSettingsWidth","platformSettingsHeight","setUpVideoTexture","el","addAt","registerEventListeners","loaderFn","unloaderFn","parseFloat","area","bottom","canInteract","adConfig","enabled","videoId","caid","Ads","prerolls","executeAsPromise","mute","looped","skip","seconds","easeExecution","enableAds","Infinity","autoSetupMixin","getAds","midrolls","postrolls","playSlot","slot","ad","playAd","timeEvents","cleanup","handlers","sendBeacon","firstQuartile","midPoint","thirdQuartile","status","videoPlayerConsumer","preroll","ScaledImageTexture","ImageTexture","_scalingOptions","resizeMode","_getLookupId","_src","getNonDefaults","imageUrl","imageServerUrl","make","setOptions","imageQuality","exact","landscape","portrait","cover","contain","original","CollectionWrapper","Wrapper","_direction","DIRECTION","row","_scrollTransitionSettings","transitions","createSettings","_spacing","_autoResize","_requestingItems","_requestThreshold","_requestsEnabled","_gcThreshold","_gcIncrement","_forceLoad","_updateScrollTransition","wrapper","_scrollTransition","_indexChanged","previousIndex","previous","dataLength","mainIndex","previousMainIndex","lines","signal","enableRequests","scrollCollectionWrapper","setIndex","limitWithinRange","_items","_index","_uids","hadChildren","_collectGarbage","item","items","_normalizeDataItems","plotItems","hasItems","assignedID","removeAt","amount","reposition","_repositionDebounce","repositionItems","_attemptNavigation","first","last","directionIsRow","main","mainDim","mainMarginFrom","mainMarginTo","_getPlotProperties","cw","currentItemWrapper","bound","offset","targetValue","sizes","_getItemSizes","marginFrom","margin","marginTo","scroll","_scroll","jump","backward","forward","mod","actualSize","backwardBound","_normalizePixelToPercentage","forwardBound","isRunning","reset","$childInactive","componentIndex","$getChildComponent","_resizeWrapper","crossSize","crossDim","lastItem","_generateUniqueID","mainDirection","crossDirection","cross","crossMarginTo","crossMarginFrom","itemType","__attached","marginLeft","marginRight","marginTop","marginBottom","immediate","_normalizeDataItem","label","collectionWrapper","isAlive","_handleRight","_handleLeft","_handleUp","_handleDown","_inactive","forceLoad","bool","requestingItems","requestThreshold","num","gcThreshold","currentItem","itemWrappers","scrollTransition","scrollTo","autoResize","spacing","column","Cursor","_blink","_blinkAnimation","animation","repeat","actions","blink","ItemWrapper","clipbox","create","fireAncestors","marginUp","hasFocus","_active","KeyWrapper","_update","currentKey","action","_key","data","keyType","InputField","PreLabel","renderOffscreen","PostLabel","_input","_previousInput","_description","_cursorX","_cursorIndex","_passwordMask","_passwordMode","_autoHideCursor","_labelTxLoaded","onInputChanged","input","toggleCursor","_cursorVisible","cursor","preLabel","postLabel","mountX","autoHideCursor","hasInput","pre","post","cursorIndex","inputText","_inputText","cursorVisible","passwordMode","passwordMask","passwordmask","Key","_backgroundColors","_labelColors","_data","labelText","_labelText","labelColors","backgroundColors","background","focused","unfocused","labelFocused","labelUnfocused","_focus","_unfocus","Keyboard","Keys","_inputField","_maxCharacters","resetFocus","_columnIndex","_rowIndex","_previousKey","_keys","layouts","buttonTypes","styling","_config","_layout","horizontalSpacing","verticalSpacing","align","rowPosition","isEvent","hasLabel","rowIndex","rowHorizontalSpacing","rowAlign","keyPosition","rowHeight","rowKeys","keyIndex","keySpacing","currentPosition","keyboard","rowOffset","rowMount","currentKeyWrapper","targetFound","_findKey","rows","eventFunction","_changeInput","eventData","previousInput","layout","attached","inputField","isComponent","currentRow","_previous","currentRowIndex","currentColumnIndex","tmp","targetRow","currentX","m","keyX","onSpace","onBackspace","onClear","onLayout","currentInputField","currentLayout","maxCharacters","List","crossPos","animateItems","viewboundMain","viewboundCross","renderContext","core","newChildren","mainPos","tcp","existingItemWrapper","assignedX","assignedY","ScrollingLabel","LabelClipper","rtt","FadeOut","LabelWrapper","LabelCopy","_autoStart","_scrollAnimation","_fade","_label","_align","_animationSettings","stopMethod","_updateAnimation","noScroll","labelPos","ALIGN","stopNow","sm","animationSettings","center","Main","Lists","menu","timingFunction","$firstItemCreated","getImgUrl","imgPath","getFormattedDuration","hours","minutes","Button","flex","flexItem","TextWithBox","Colors","fontStyle","CustomTextBox","ImageButton","Icon","icon","Details","Header","PosterAndButton","Poster","Image","IMDBRating","ReleaseAndDuration","ReleaseDate","Duration","maxLines","Title","wordWrapWidth","Overview","GenreLayout","GenreTitle","Genres","CastLayout","CastTitle","Casts","DirectorLayout","DirectorTitle","Director","WriterLayout","WriterTitle","Writer","LanguageLayout","LanguageTitle","Language","_details","details","_credits","image","poster","genres","genre","casts","cast","directers","crew","known_for_department","writers","languages","spokenLanguages","Img","voteAverage","releaseDate","toDateString","runtime","overview","TVDetails","CreatorLayout","Creators","OriginalNetworkLayout","OriginalNetwork","TotalSeasonLayout","TotalSeasons","TotalEpisodeLayout","TotalEpisodes","creators","created_by","creator","originalNetworks","original_network","network","getYear","first_release_date","getFullYear","last_release_date","total_seasons","total_episodes","firstReleaseDate","lastReleaseDate","NoiseShader","WebGLDefaultShader","_time","redraw","setupUniforms","operation","owner","shaderOwner","renderPrecision","ctx","_setUniform","uniform1f","Float32Array","_w","_h","uniform2fv","fragmentShaderSource","ErrorScreen","Popup","alignItems","Subtitle","updateNoise","_updateNoiseInterval","formatTime","videos","IconButton","ProgressBar","Progress","InnerProgress","Timer","_duration","ratio","Backgrounds","BackgroundA","colorTop","colorBottom","BackgroundB","_backgroundIndex","_item","isHide","buttons","interfaceTimeout","Player","TopHeader","BackButton","Ui","mountY","Buttons","_videoIndex","_interfaceVisible","button","$playPause","_toggleInterface","_setInterfaceTimeout","VideoPlayer","_captureKey","$stop","$videoPlayerPlaying","$videoPlayerPause","$videoPlayerAbort","$videoPlayerEnded","$videoPlayerTimeUpdate","$videoPlayerLoadedMetadata","$videoPlayerError","errorMessage","NotFound","Splash","Rectangle","Logo","Spinner","_spinnerAnimation","PI","Container","_total_results","total_results","_type","results","movie","Movie","Tv","total","_adult","adult","_backdrop_path","backdrop_path","_genres","genre_ids","_id","_original_language","original_language","_overview","_popularity","popularity","_poster_path","poster_path","_release_date","release_date","_runtime","_title","_video","_vote_average","vote_average","_vote_count","vote_count","originalLanguage","voteCount","_first_air_date","first_air_date","_name","_origin_country","origin_country","_original_name","original_name","firstAirDate","originalCountry","originalName","_belong_to_collection","belongs_to_collection","_budget","budget","_homepage","homepage","_imdb_id","imdb_id","_original_title","original_title","_production_companies","production_companies","_production_countries","production_countries","_revenue","revenue","_spoken_languages","spoken_languages","_status","_tagline","tagline","belongToCollection","imdbId","originalTitle","productionCompanies","productionCountries","episode_run_time","_created_by","_first_release_date","_last_release_date","last_air_date","_total_seasons","number_of_seasons","_total_episodes","number_of_episodes","_original_network","networks","_cast","_crew","Item","pivotY","BorderLeft","_angle","_ratingNumber","construct","lngItem","_realItem","_notifyOnItemCreation","FIRST_CREATED","Items","boundsMargin","Focus","About","RowTrendingAndDuration","Trending","randomColor","getRuntime","activeItem","container","_container","itemConstruct","_itemConstruct","getRealComponent","realWidth","_createItems","colorNameArray","_animateToSelected","idx","finalX","select","$itemCreatedForFocus","updateFocusPath","apiKey","listComponents","itemComponents","stageInstance","getMovies","movies","_getPopular","models","_lists","getSportMovies","_getSportMovies","_getGenres","_getMovieSportsData","getTv","getDetails","itemDetails","_get","credits","Credits","params_str","ok","list","itemId","Menu","MenuItems","colorLeft","colorRight","_selectedChild","selected","_select","finalW","MenuItem","toLocaleLowerCase","_onActivated","currentRouteId","_selected","MenuWithBackButton","initApi","Launch"],"mappings":"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"}